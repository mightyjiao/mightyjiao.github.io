(self.webpackChunk=self.webpackChunk||[]).push([[727,430,895],{2374:(r,i,t)=>{var e=t(8081),a=t(3645),o=a(e);o.push([r.id,".empty[data-v-2950a167]{color:#909096;height:100%;justify-content:center;position:absolute;width:100%}.content[data-v-2950a167],.empty[data-v-2950a167]{align-items:center;display:flex}.content[data-v-2950a167]{flex-direction:column;margin-bottom:200px}.content[data-v-2950a167]:hover{color:#1c7dff;cursor:pointer}.empty.active[data-v-2950a167]{color:#1c7dff}.tip[data-v-2950a167]{font-size:24px;margin-top:20px}",""]),r.exports=o},8373:(r,i,t)=>{var e=t(8081),a=t(3645),o=a(e);o.push([r.id,".page[data-v-01773029]{display:flex;flex-direction:column;height:100%}.editor-body[data-v-01773029]{display:flex;flex:1;height:0}.canvas-container[data-v-01773029]{flex:1;position:relative;width:0}h1[data-v-01773029]{font-family:sans-serif;font-size:16px;margin-right:12px}.flex-auto[data-v-01773029]{flex:1;width:0}",""]),r.exports=o},6848:(r,i,t)=>{var e=t(2374);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[r.id,e,""]]),e.locals&&(r.exports=e.locals);var a=t(5346).Z,o=a("6ece9e97",e,!0,{sourceMap:!1})},4747:(r,i,t)=>{var e=t(8373);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[r.id,e,""]]),e.locals&&(r.exports=e.locals);var a=t(5346).Z,o=a("177f92c9",e,!0,{sourceMap:!1})},6716:(r,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>D});var e=t(6252),a=t(3577),o=t(2262);const n=["viewBox","width","height"],_=["xlink:href"];function C(P,O,S,E,v,Z){return(0,e.wg)(),(0,e.iD)("svg",{class:"icon-comp",viewBox:v.symbol.viewBox,width:v.width,height:v.height},[(0,e._)("use",{"xlink:href":"#"+v.symbol.id},null,8,_)],8,n)}var f=t(7854),p=t.n(f),g=t(5348),m=t.n(g),l=new(p())({id:"drop-here--vue-type-script-lang-js",use:"drop-here--vue-type-script-lang-js-usage",viewBox:"0 0 205 205",content:'<symbol viewBox="0 0 205 205" fill="none" xmlns="http://www.w3.org/2000/svg" id="drop-here--vue-type-script-lang-js"><rect x="2.9753" y="2.97438" width="200" height="200" rx="16" fill="currentColor" fill-opacity="0.06" stroke="currentColor" stroke-width="4" stroke-dasharray="16 16" /><path fill-rule="evenodd" clip-rule="evenodd" d="M125.481 44.4607C125.481 43.9084 125.033 43.4607 124.481 43.4607H81.6915C81.1392 43.4607 80.6915 43.9084 80.6915 44.4607V110.039C80.6915 110.591 80.2438 111.039 79.6915 111.039H57.9061C57.0373 111.039 56.5818 112.07 57.167 112.712L102.236 162.162C102.633 162.597 103.318 162.597 103.714 162.162L148.784 112.712C149.369 112.07 148.913 111.039 148.045 111.039H126.481C125.928 111.039 125.481 110.591 125.481 110.039V44.4607Z" fill="currentColor" /></symbol>'}),u=m().add(l);const[y,x,A,F]=l.viewBox.split(" "),R={data(){return{symbol:l,width:A,height:F}}};var k=t(3744);const c=(0,k.Z)(R,[["render",C]]);var w=t(1288);const M=(P=>((0,e.dD)("data-v-2950a167"),P=P(),(0,e.Cn)(),P))(()=>(0,e._)("p",{class:"tip"},"Drop Sketch Files Here",-1)),j=(0,e.aZ)({emits:["pick"],setup(P,{emit:O}){let S=(0,o.iH)(!1);const{pick:E}=(0,w.Y)(d=>O("pick",d));function v(d){var h;return Array.from(((h=d.dataTransfer)==null?void 0:h.items)||[]).some(L=>L.kind==="file")}function Z(){S.value=!1}function $(d){d.preventDefault(),v(d)&&(S.value=!0)}function U(d){d.preventDefault(),v(d)&&(S.value=!0)}function b(d){var h;d.preventDefault(),S.value=!1;const I=Array.from(((h=d.dataTransfer)==null?void 0:h.files)||[]).find(L=>L.name.toLowerCase().endsWith(".sketch"));I?O("pick",I):alert("It it not a sketch file!")}return(d,h)=>((0,e.wg)(),(0,e.iD)("div",{class:(0,a.C_)(["empty",{active:(0,o.SU)(S)}]),onDragenter:U,onDragover:$,onDragleave:Z,onDrop:b},[(0,e._)("div",{class:"content",onClick:h[0]||(h[0]=(...I)=>(0,o.SU)(E)&&(0,o.SU)(E)(...I))},[(0,e.Wm)((0,o.SU)(c),{class:"drop-icon"}),M])],34))}});var B=t(6848);const D=(0,k.Z)(j,[["__scopeId","data-v-2950a167"]])},9430:(r,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>_});var e=t(6252),a=t(2262);const _=(0,e.aZ)({emits:["pick"],setup(C,{emit:f}){const p=(0,a.iH)();function g(){var l;(l=p.value)==null||l.click()}function m(){var l;const u=(l=p.value)==null?void 0:l.files;u&&u.length>0&&f("pick",u[0])}return(l,u)=>((0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("input",{ref:(y,x)=>{x.input=y,p.value=y},onChange:m,type:"file",accept:".sketch",style:{display:"none"}},null,544),(0,e._)("button",{onClick:g},"Open File")],64))}})},1895:(r,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>k});var e=t(9744),a=t(4488),o=t(6716),n=t(6252);const _=s=>(_pushScopeId("data-v-01773029"),s=s(),_popScopeId(),s),C={class:"page"},f={class:"editor-body"},p={class:"canvas-container",ref:"canvasContainer"};function g(s,c,w,T,M,j){const B=e.default,H=a.default,D=o.default;return(0,n.wg)(),(0,n.iD)("section",C,[(0,n.Wm)(B,{onPick:s.onPickFile},null,8,["onPick"]),(0,n._)("div",f,[(0,n.Wm)(H),(0,n._)("div",p,[s.isEmpty?((0,n.wg)(),(0,n.j4)(D,{key:0,onPick:s.onPickFile},null,8,["onPick"])):(0,n.kq)("",!0)],512)])])}var m=t(9430),l=t(5519);const u="http://localhost:3031/docs",y="http://localhost:3031/docs/",x=(0,n.aZ)({components:{FileButton:m.default,Outline:a.default,EmptyPlaceholder:o.default,Nav:e.default},data(){return{isEmpty:!0,list:[],pages:[],selectedFile:localStorage.getItem("lastChooseFile")||"",selectedPage:localStorage.getItem("lastChosePage")||""}},mounted(){this.fetchLocalSketchFileList(),(0,n.YP)(l.y.shared.selectedPageIndex,s=>{localStorage.setItem("lastChosePage",this.pages[s]+"")})},methods:{fetchLocalSketchFileList(){return fetch(u).then(s=>s.json()).then(s=>{this.list=s,this.selectedFile||(this.selectedFile=s[0]),this.loadFile()}).catch(()=>{console.log("Cant find local files, please select or drop a file on this web app.")})},loadSketchFile(s){return fetch(s).then(c=>c.status!==200?Promise.reject(new Error("Load sketch file error: "+c.status+":"+c.statusText)):c.arrayBuffer())},loadFile(){this.loadSketchFile(y+this.selectedFile).then(s=>this.openSketch(this.selectedFile,s)).catch(s=>{console.error(s),console.log("Cant load local files. Please check local development env.")})},async openSketch(s,c){await l.y.shared.openSketchArrayBuffer(this.removeExt(s),c,this.$refs.canvasContainer),this.isEmpty=!1,this.pages=l.y.shared.pages,this.selectedPage||(this.selectedPage=this.pages[0]),this.renderPage()},onFileChange(){localStorage.setItem("lastChooseFile",this.selectedFile+""),this.loadFile()},renderPage(){let s=this.pages.indexOf(this.selectedPage);s===-1&&(s=0,this.selectedPage=this.pages[0]),l.y.shared.selectPage(s)},removeExt(s){const c=s.toLowerCase().lastIndexOf(".sketch");return s.slice(0,c)},onPickFile(s){s.arrayBuffer().then(c=>this.openSketch(s.name,c))}}});var A=t(4747),F=t(3744);const k=(0,F.Z)(x,[["render",g],["__scopeId","data-v-01773029"]])},2727:(r,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>f});var e=t(1895),a=t(6252);function o(p,g,m,l,u,y){const x=e.default;return(0,a.wg)(),(0,a.j4)(x)}const n={components:{SkyEditor:e.default}};var _=t(3744);const f=(0,_.Z)(n,[["render",o]])}}]);
