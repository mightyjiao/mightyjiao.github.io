(self.webpackChunk=self.webpackChunk||[]).push([[519],{903:(Ge,te,tt)=>{"use strict";tt.r(te),tt.d(te,{default:()=>at});const at=tt.p+"35878f4eaa41dbef3cb54249b585122c.wasm"},478:(Ge,te,tt)=>{var at="/index.js",vt="/",V=function(){var At=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return At=At||at,function(B){B=B||{};var y;y||(y=typeof B!="undefined"?B:{});var J,dt;y.ready=new Promise(function(t,e){J=t,dt=e}),function(t){t.Wd=t.Wd||[],t.Wd.push(function(){t.MakeSWCanvasSurface=function(e){var n=e;if(n.tagName!=="CANVAS"&&(n=document.getElementById(e),!n))throw"Canvas with id "+e+" was not found";return(e=t.MakeSurface(n.width,n.height))&&(e.Sd=n),e},t.MakeCanvasSurface||(t.MakeCanvasSurface=t.MakeSWCanvasSurface),t.MakeSurface=function(e,n){var o={width:e,height:n,colorType:t.ColorType.RGBA_8888,alphaType:t.AlphaType.Unpremul,colorSpace:t.ColorSpace.SRGB},h=e*n*4,f=t._malloc(h);return(o=t.Surface._makeRasterDirect(o,f,4*e))&&(o.Sd=null,o.Gf=e,o.Df=n,o.Ff=h,o.ff=f,o.getCanvas().clear(t.TRANSPARENT)),o},t.MakeRasterDirectSurface=function(e,n,o){return t.Surface._makeRasterDirect(e,n.byteOffset,o)},t.Surface.prototype.flush=function(e){if(this._flush(),this.Sd){var n=new Uint8ClampedArray(t.HEAPU8.buffer,this.ff,this.Ff);n=new ImageData(n,this.Gf,this.Df),e?this.Sd.getContext("2d").putImageData(n,0,0,e[0],e[1],e[2]-e[0],e[3]-e[1]):this.Sd.getContext("2d").putImageData(n,0,0)}},t.Surface.prototype.dispose=function(){this.ff&&t._free(this.ff),this.delete()},t.currentContext=t.currentContext||function(){},t.setCurrentContext=t.setCurrentContext||function(){}})}(y),function(t){t.Wd=t.Wd||[],t.Wd.push(function(){function e(n,o,h){return n&&n.hasOwnProperty(o)?n[o]:h}t.GetWebGLContext=function(n,o){if(!n)throw"null canvas passed into makeWebGLContext";var h={alpha:e(o,"alpha",1),depth:e(o,"depth",1),stencil:e(o,"stencil",8),antialias:e(o,"antialias",0),premultipliedAlpha:e(o,"premultipliedAlpha",1),preserveDrawingBuffer:e(o,"preserveDrawingBuffer",0),preferLowPowerToHighPerformance:e(o,"preferLowPowerToHighPerformance",0),failIfMajorPerformanceCaveat:e(o,"failIfMajorPerformanceCaveat",0),enableExtensionsByDefault:e(o,"enableExtensionsByDefault",1),explicitSwapControl:e(o,"explicitSwapControl",0),renderViaOffscreenBackBuffer:e(o,"renderViaOffscreenBackBuffer",0)};if(h.majorVersion=o&&o.majorVersion?o.majorVersion:typeof WebGL2RenderingContext!="undefined"?2:1,h.explicitSwapControl)throw"explicitSwapControl is not supported";return n=tr(n,h),n?(Br(n),n):0},t.deleteContext=function(n){wt===W[n]&&(wt=null),typeof JSEvents=="object"&&JSEvents.Kg(W[n].qe.canvas),W[n]&&W[n].qe.canvas&&(W[n].qe.canvas.qf=void 0),W[n]=null},t._setTextureCleanup({deleteTexture:function(n,o){var h=Q[o];h&&W[n].qe.deleteTexture(h),Q[o]=null}}),t.MakeWebGLCanvasSurface=function(n,o,h){o=o||null;var f=n,b=typeof OffscreenCanvas!="undefined"&&f instanceof OffscreenCanvas;if(!(typeof HTMLCanvasElement!="undefined"&&f instanceof HTMLCanvasElement||b||(f=document.getElementById(n),f)))throw"Canvas with id "+n+" was not found";if(n=this.GetWebGLContext(f,h),!n||0>n)throw"failed to create webgl context: err "+n;return h=this.MakeGrContext(n),o=this.MakeOnScreenGLSurface(h,f.width,f.height,o),o?(o.re=n,o.grContext=h,o.openGLversion=f.qf.version,o):(o=f.cloneNode(!0),f.parentNode.replaceChild(o,f),o.classList.add("ck-replaced"),t.MakeSWCanvasSurface(o))},t.MakeCanvasSurface=t.MakeWebGLCanvasSurface,t.Surface.prototype.makeImageFromTexture=function(n,o){o.colorSpace||(o.colorSpace=t.ColorSpace.SRGB);var h=Q.length;return h||(Q.push(null),h=1),Q.push(n),this._makeImageFromTexture(wt.yf,h,o)},t.Surface.prototype.makeImageFromTextureSource=function(n,o,h){h=h||n.naturalHeight||n.videoHeight||n.height,o=o||n.naturalWidth||n.videoWidth||n.width;var f=wt.qe,b=f.createTexture();return f.bindTexture(f.TEXTURE_2D,b),wt.version===2?f.texImage2D(f.TEXTURE_2D,0,f.RGBA,o,h,0,f.RGBA,f.UNSIGNED_BYTE,n):f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,n),f.bindTexture(f.TEXTURE_2D,null),this.makeImageFromTexture(b,{height:h,width:o,colorType:t.ColorType.RGBA_8888,alphaType:t.AlphaType.Unpremul,colorSpace:t.ColorSpace.SRGB})}})}(y),function(t){function e(s,i,l,d,C){for(var A=0;A<s.length;A++)i[A*l+(A*C+d+l)%l]=s[A];return i}function n(s){for(var i=s*s,l=Array(i);i--;)l[i]=i%(s+1)==0?1:0;return l}function o(s){return s?s.constructor===Float32Array&&s.length===4:!1}function h(s){return(_(255*s[3])<<24|_(255*s[0])<<16|_(255*s[1])<<8|_(255*s[2])<<0)>>>0}function f(s){if(s&&s._ck)return s;if(s instanceof Float32Array){for(var i=Math.floor(s.length/4),l=new Uint32Array(i),d=0;d<i;d++)l[d]=h(s.slice(4*d,4*(d+1)));return l}if(s instanceof Uint32Array)return s;if(s instanceof Array&&s[0]instanceof Float32Array)return s.map(h)}function b(s){if(s===void 0)return 1;var i=parseFloat(s);return s&&s.indexOf("%")!==-1?i/100:i}function _(s){return Math.round(Math.max(0,Math.min(s||0,255)))}function F(s,i){i&&i._ck||t._free(s)}function M(s,i,l){if(!s||!s.length)return St;if(s&&s._ck)return s.byteOffset;var d=t[i].BYTES_PER_ELEMENT;return l||(l=t._malloc(s.length*d)),t[i].set(s,l/d),l}function Y(s){var i={ge:St,count:s.length,Pe:t.ColorType.RGBA_F32};if(s instanceof Float32Array)i.ge=M(s,"HEAPF32"),i.count=s.length/4;else if(s instanceof Uint32Array)i.ge=M(s,"HEAPU32"),i.Pe=t.ColorType.RGBA_8888;else if(s instanceof Array){if(s&&s.length){for(var l=t._malloc(16*s.length),d=0,C=l/4,A=0;A<s.length;A++)for(var L=0;4>L;L++)t.HEAPF32[C+d]=s[A][L],d++;s=l}else s=St;i.ge=s}else throw"Invalid argument to copyFlexibleColorArray, Not a color array "+typeof s;return i}function $(s){if(!s)return St;if(s.length){if(s.length===6||s.length===9)return M(s,"HEAPF32",yr),s.length===6&&t.HEAPF32.set(Mi,6+yr/4),yr;if(s.length===16){var i=Mn.toTypedArray();return i[0]=s[0],i[1]=s[1],i[2]=s[3],i[3]=s[4],i[4]=s[5],i[5]=s[7],i[6]=s[12],i[7]=s[13],i[8]=s[15],yr}throw"invalid matrix size"}return i=Mn.toTypedArray(),i[0]=s.m11,i[1]=s.m21,i[2]=s.m41,i[3]=s.m12,i[4]=s.m22,i[5]=s.m42,i[6]=s.m14,i[7]=s.m24,i[8]=s.m44,yr}function ft(s){if(!s)return St;var i=Vn.toTypedArray();if(s.length){if(s.length!==16&&s.length!==6&&s.length!==9)throw"invalid matrix size";return s.length===16?M(s,"HEAPF32",mr):(i.fill(0),i[0]=s[0],i[1]=s[1],i[3]=s[2],i[4]=s[3],i[5]=s[4],i[7]=s[5],i[12]=s[6],i[13]=s[7],i[15]=s[8],s.length===6&&(i[12]=0,i[13]=0,i[15]=1),mr)}return i[0]=s.m11,i[1]=s.m21,i[2]=s.m31,i[3]=s.m41,i[4]=s.m12,i[5]=s.m22,i[6]=s.m32,i[7]=s.m42,i[8]=s.m13,i[9]=s.m23,i[10]=s.m33,i[11]=s.m43,i[12]=s.m14,i[13]=s.m24,i[14]=s.m34,i[15]=s.m44,mr}function I(s){for(var i=Array(16),l=0;16>l;l++)i[l]=t.HEAPF32[s/4+l];return i}function nt(s,i){return M(s,"HEAPF32",i||cn)}function Rt(s,i,l,d){var C=jn.toTypedArray();return C[0]=s,C[1]=i,C[2]=l,C[3]=d,cn}function Yt(s){for(var i=new Float32Array(4),l=0;4>l;l++)i[l]=t.HEAPF32[s/4+l];return i}function Ot(s,i){return M(s,"HEAPF32",i||Ut)}function ge(s,i){return M(s,"HEAPF32",i||Kn)}function ln(){for(var s=0,i=0;i<arguments.length-1;i+=2)s+=arguments[i]*arguments[i+1];return s}function hn(s,i,l){for(var d=Array(s.length),C=0;C<l;C++)for(var A=0;A<l;A++){for(var L=0,N=0;N<l;N++)L+=s[l*C+N]*i[l*N+A];d[C*l+A]=L}return d}function Qn(s,i){for(var l=hn(i[0],i[1],s),d=2;d<i.length;)l=hn(l,i[d],s),d++;return l}t.Color=function(s,i,l,d){return d===void 0&&(d=1),t.Color4f(_(s)/255,_(i)/255,_(l)/255,d)},t.ColorAsInt=function(s,i,l,d){return d===void 0&&(d=255),(_(d)<<24|_(s)<<16|_(i)<<8|_(l)<<0&268435455)>>>0},t.Color4f=function(s,i,l,d){return d===void 0&&(d=1),Float32Array.of(s,i,l,d)},Object.defineProperty(t,"TRANSPARENT",{get:function(){return t.Color4f(0,0,0,0)}}),Object.defineProperty(t,"BLACK",{get:function(){return t.Color4f(0,0,0,1)}}),Object.defineProperty(t,"WHITE",{get:function(){return t.Color4f(1,1,1,1)}}),Object.defineProperty(t,"RED",{get:function(){return t.Color4f(1,0,0,1)}}),Object.defineProperty(t,"GREEN",{get:function(){return t.Color4f(0,1,0,1)}}),Object.defineProperty(t,"BLUE",{get:function(){return t.Color4f(0,0,1,1)}}),Object.defineProperty(t,"YELLOW",{get:function(){return t.Color4f(1,1,0,1)}}),Object.defineProperty(t,"CYAN",{get:function(){return t.Color4f(0,1,1,1)}}),Object.defineProperty(t,"MAGENTA",{get:function(){return t.Color4f(1,0,1,1)}}),t.getColorComponents=function(s){return[Math.floor(255*s[0]),Math.floor(255*s[1]),Math.floor(255*s[2]),s[3]]},t.parseColorString=function(s,i){if(s=s.toLowerCase(),s.startsWith("#")){switch(i=255,s.length){case 9:i=parseInt(s.slice(7,9),16);case 7:var l=parseInt(s.slice(1,3),16),d=parseInt(s.slice(3,5),16),C=parseInt(s.slice(5,7),16);break;case 5:i=17*parseInt(s.slice(4,5),16);case 4:l=17*parseInt(s.slice(1,2),16),d=17*parseInt(s.slice(2,3),16),C=17*parseInt(s.slice(3,4),16)}return t.Color(l,d,C,i/255)}return s.startsWith("rgba")?(s=s.slice(5,-1),s=s.split(","),t.Color(+s[0],+s[1],+s[2],b(s[3]))):s.startsWith("rgb")?(s=s.slice(4,-1),s=s.split(","),t.Color(+s[0],+s[1],+s[2],b(s[3]))):s.startsWith("gray(")||s.startsWith("hsl")||!i||(s=i[s],s===void 0)?t.BLACK:s},t.multiplyByAlpha=function(s,i){return s=s.slice(),s[3]=Math.max(0,Math.min(s[3]*i,1)),s},t.Malloc=function(s,i){var l=t._malloc(i*s.BYTES_PER_ELEMENT);return{_ck:!0,length:i,byteOffset:l,te:null,subarray:function(d,C){return d=this.toTypedArray().subarray(d,C),d._ck=!0,d},toTypedArray:function(){return this.te&&this.te.length?this.te:(this.te=new s(t.HEAPU8.buffer,l,i),this.te._ck=!0,this.te)}}},t.Free=function(s){t._free(s.byteOffset),s.byteOffset=St,s.toTypedArray=null,s.te=null};var yr=St,Mn,mr=St,Vn,cn=St,jn,we,Ut=St,qn,Or=St,ti,Zn=St,ei,Hn=St,ri,Un=St,ni,Kn=St,ii,si=St,Mi=Float32Array.of(0,0,1),St=0;t.onRuntimeInitialized=function(){function s(i,l,d,C,A,L){L||(L=4*C.width,C.colorType===t.ColorType.RGBA_F16?L*=2:C.colorType===t.ColorType.RGBA_F32&&(L*=4));var N=L*C.height,q=A?A.byteOffset:t._malloc(N);if(!i._readPixels(C,q,L,l,d))return A||t._free(q),null;if(A)return A.toTypedArray();switch(C.colorType){case t.ColorType.RGBA_8888:case t.ColorType.RGBA_F16:i=new Uint8Array(t.HEAPU8.buffer,q,N).slice();break;case t.ColorType.RGBA_F32:i=new Float32Array(t.HEAPU8.buffer,q,N).slice();break;default:return null}return t._free(q),i}jn=t.Malloc(Float32Array,4),cn=jn.byteOffset,Vn=t.Malloc(Float32Array,16),mr=Vn.byteOffset,Mn=t.Malloc(Float32Array,9),yr=Mn.byteOffset,ni=t.Malloc(Float32Array,12),Kn=ni.byteOffset,ii=t.Malloc(Float32Array,12),si=ii.byteOffset,we=t.Malloc(Float32Array,4),Ut=we.byteOffset,qn=t.Malloc(Float32Array,4),Or=qn.byteOffset,ti=t.Malloc(Float32Array,3),Zn=ti.byteOffset,ei=t.Malloc(Float32Array,3),Hn=ei.byteOffset,ri=t.Malloc(Int32Array,4),Un=ri.byteOffset,t.ColorSpace.SRGB=t.ColorSpace._MakeSRGB(),t.ColorSpace.DISPLAY_P3=t.ColorSpace._MakeDisplayP3(),t.ColorSpace.ADOBE_RGB=t.ColorSpace._MakeAdobeRGB(),t.GlyphRunFlags={IsWhiteSpace:t._GlyphRunFlags_isWhiteSpace},t.Path.MakeFromCmds=function(i){var l=M(i,"HEAPF32"),d=t.Path._MakeFromCmds(l,i.length);return F(l,i),d},t.Path.MakeFromVerbsPointsWeights=function(i,l,d){var C=M(i,"HEAPU8"),A=M(l,"HEAPF32"),L=M(d,"HEAPF32"),N=t.Path._MakeFromVerbsPointsWeights(C,i.length,A,l.length,L,d&&d.length||0);return F(C,i),F(A,l),F(L,d),N},t.Path.prototype.addArc=function(i,l,d){return i=Ot(i),this._addArc(i,l,d),this},t.Path.prototype.addOval=function(i,l,d){return d===void 0&&(d=1),i=Ot(i),this._addOval(i,!!l,d),this},t.Path.prototype.addPath=function(){var i=Array.prototype.slice.call(arguments),l=i[0],d=!1;if(typeof i[i.length-1]=="boolean"&&(d=i.pop()),i.length===1)this._addPath(l,1,0,0,0,1,0,0,0,1,d);else if(i.length===2)i=i[1],this._addPath(l,i[0],i[1],i[2],i[3],i[4],i[5],i[6]||0,i[7]||0,i[8]||1,d);else if(i.length===7||i.length===10)this._addPath(l,i[1],i[2],i[3],i[4],i[5],i[6],i[7]||0,i[8]||0,i[9]||1,d);else return null;return this},t.Path.prototype.addPoly=function(i,l){var d=M(i,"HEAPF32");return this._addPoly(d,i.length/2,l),F(d,i),this},t.Path.prototype.addRect=function(i,l){return i=Ot(i),this._addRect(i,!!l),this},t.Path.prototype.addRRect=function(i,l){return i=ge(i),this._addRRect(i,!!l),this},t.Path.prototype.addVerbsPointsWeights=function(i,l,d){var C=M(i,"HEAPU8"),A=M(l,"HEAPF32"),L=M(d,"HEAPF32");this._addVerbsPointsWeights(C,i.length,A,l.length,L,d&&d.length||0),F(C,i),F(A,l),F(L,d)},t.Path.prototype.arc=function(i,l,d,C,A,L){return i=t.LTRBRect(i-d,l-d,i+d,l+d),A=(A-C)/Math.PI*180-360*!!L,L=new t.Path,L.addArc(i,C/Math.PI*180,A),this.addPath(L,!0),L.delete(),this},t.Path.prototype.arcToOval=function(i,l,d,C){return i=Ot(i),this._arcToOval(i,l,d,C),this},t.Path.prototype.arcToRotated=function(i,l,d,C,A,L,N){return this._arcToRotated(i,l,d,!!C,!!A,L,N),this},t.Path.prototype.arcToTangent=function(i,l,d,C,A){return this._arcToTangent(i,l,d,C,A),this},t.Path.prototype.close=function(){return this._close(),this},t.Path.prototype.conicTo=function(i,l,d,C,A){return this._conicTo(i,l,d,C,A),this},t.Path.prototype.computeTightBounds=function(i){this._computeTightBounds(Ut);var l=we.toTypedArray();return i?(i.set(l),i):l.slice()},t.Path.prototype.cubicTo=function(i,l,d,C,A,L){return this._cubicTo(i,l,d,C,A,L),this},t.Path.prototype.dash=function(i,l,d){return this._dash(i,l,d)?this:null},t.Path.prototype.getBounds=function(i){this._getBounds(Ut);var l=we.toTypedArray();return i?(i.set(l),i):l.slice()},t.Path.prototype.lineTo=function(i,l){return this._lineTo(i,l),this},t.Path.prototype.moveTo=function(i,l){return this._moveTo(i,l),this},t.Path.prototype.offset=function(i,l){return this._transform(1,0,i,0,1,l,0,0,1),this},t.Path.prototype.quadTo=function(i,l,d,C){return this._quadTo(i,l,d,C),this},t.Path.prototype.rArcTo=function(i,l,d,C,A,L,N){return this._rArcTo(i,l,d,C,A,L,N),this},t.Path.prototype.rConicTo=function(i,l,d,C,A){return this._rConicTo(i,l,d,C,A),this},t.Path.prototype.rCubicTo=function(i,l,d,C,A,L){return this._rCubicTo(i,l,d,C,A,L),this},t.Path.prototype.rLineTo=function(i,l){return this._rLineTo(i,l),this},t.Path.prototype.rMoveTo=function(i,l){return this._rMoveTo(i,l),this},t.Path.prototype.rQuadTo=function(i,l,d,C){return this._rQuadTo(i,l,d,C),this},t.Path.prototype.stroke=function(i){return i=i||{},i.width=i.width||1,i.miter_limit=i.miter_limit||4,i.cap=i.cap||t.StrokeCap.Butt,i.join=i.join||t.StrokeJoin.Miter,i.precision=i.precision||1,this._stroke(i)?this:null},t.Path.prototype.transform=function(){if(arguments.length===1){var i=arguments[0];this._transform(i[0],i[1],i[2],i[3],i[4],i[5],i[6]||0,i[7]||0,i[8]||1)}else if(arguments.length===6||arguments.length===9)i=arguments,this._transform(i[0],i[1],i[2],i[3],i[4],i[5],i[6]||0,i[7]||0,i[8]||1);else throw"transform expected to take 1 or 9 arguments. Got "+arguments.length;return this},t.Path.prototype.trim=function(i,l,d){return this._trim(i,l,!!d)?this:null},t.Image.prototype.makeShaderCubic=function(i,l,d,C,A){return A=$(A),this._makeShaderCubic(i,l,d,C,A)},t.Image.prototype.makeShaderOptions=function(i,l,d,C,A){return A=$(A),this._makeShaderOptions(i,l,d,C,A)},t.Image.prototype.readPixels=function(i,l,d,C,A){return s(this,i,l,d,C,A)},t.Canvas.prototype.clear=function(i){i=nt(i),this._clear(i)},t.Canvas.prototype.clipRRect=function(i,l,d){i=ge(i),this._clipRRect(i,l,d)},t.Canvas.prototype.clipRect=function(i,l,d){i=Ot(i),this._clipRect(i,l,d)},t.Canvas.prototype.quickReject=function(i){return i=Ot(i),this._quickReject(i)},t.Canvas.prototype.concat=function(i){i=ft(i),this._concat(i)},t.Canvas.prototype.drawArc=function(i,l,d,C,A){i=Ot(i),this._drawArc(i,l,d,C,A)},t.Canvas.prototype.drawAtlas=function(i,l,d,C,A,L,N){if(i&&C&&l&&d&&l.length===d.length){A||(A=t.BlendMode.SrcOver);var q=M(l,"HEAPF32"),ot=M(d,"HEAPF32"),bt=d.length/4,P=M(f(L),"HEAPU32");if(N&&"B"in N&&"C"in N)this._drawAtlasCubic(i,ot,q,P,bt,A,N.B,N.C,C);else{let K=t.FilterMode.Linear,yt=t.MipmapMode.None;N&&(K=N.filter,"mipmap"in N&&(yt=N.mipmap)),this._drawAtlasOptions(i,ot,q,P,bt,A,K,yt,C)}F(q,l),F(ot,d),F(P,L)}},t.Canvas.prototype.drawColor=function(i,l){i=nt(i),l!==void 0?this._drawColor(i,l):this._drawColor(i)},t.Canvas.prototype.drawColorComponents=function(i,l,d,C,A){i=Rt(i,l,d,C),A!==void 0?this._drawColor(i,A):this._drawColor(i)},t.Canvas.prototype.drawDRRect=function(i,l,d){i=ge(i,Kn),l=ge(l,si),this._drawDRRect(i,l,d)},t.Canvas.prototype.drawGlyphs=function(i,l,d,C,A,L){if(!(2*i.length<=l.length))throw"Not enough positions for the array of gyphs";const N=M(i,"HEAPU16"),q=M(l,"HEAPF32");this._drawGlyphs(i.length,N,q,d,C,A,L),F(q,l),F(N,i)},t.Canvas.prototype.drawImageNine=function(i,l,d,C,A){l=M(l,"HEAP32",Un),d=Ot(d),this._drawImageNine(i,l,d,C,A||null)},t.Canvas.prototype.drawImageRect=function(i,l,d,C,A){Ot(l,Ut),Ot(d,Or),this._drawImageRect(i,Ut,Or,C,!!A)},t.Canvas.prototype.drawImageRectCubic=function(i,l,d,C,A,L){Ot(l,Ut),Ot(d,Or),this._drawImageRectCubic(i,Ut,Or,C,A,L||null)},t.Canvas.prototype.drawImageRectOptions=function(i,l,d,C,A,L){Ot(l,Ut),Ot(d,Or),this._drawImageRectOptions(i,Ut,Or,C,A,L||null)},t.Canvas.prototype.drawOval=function(i,l){i=Ot(i),this._drawOval(i,l)},t.Canvas.prototype.drawPatch=function(i,l,d,C,A){if(24>i.length)throw"Need 12 cubic points";if(l&&4>l.length)throw"Need 4 colors";if(d&&8>d.length)throw"Need 4 shader coordinates";const L=M(i,"HEAPF32"),N=l?M(f(l),"HEAPU32"):St,q=d?M(d,"HEAPF32"):St;C||(C=t.BlendMode.Modulate),this._drawPatch(L,N,q,C,A),F(q,d),F(N,l),F(L,i)},t.Canvas.prototype.drawPoints=function(i,l,d){var C=M(l,"HEAPF32");this._drawPoints(i,C,l.length/2,d),F(C,l)},t.Canvas.prototype.drawRRect=function(i,l){i=ge(i),this._drawRRect(i,l)},t.Canvas.prototype.drawRect=function(i,l){i=Ot(i),this._drawRect(i,l)},t.Canvas.prototype.drawShadow=function(i,l,d,C,A,L,N){var q=M(A,"HEAPF32"),ot=M(L,"HEAPF32");l=M(l,"HEAPF32",Zn),d=M(d,"HEAPF32",Hn),this._drawShadow(i,l,d,C,q,ot,N),F(q,A),F(ot,L)},t.getShadowLocalBounds=function(i,l,d,C,A,L,N){return i=$(i),d=M(d,"HEAPF32",Zn),C=M(C,"HEAPF32",Hn),this._getShadowLocalBounds(i,l,d,C,A,L,Ut)?(l=we.toTypedArray(),N?(N.set(l),N):l.slice()):null},t.Canvas.prototype.getLocalToDevice=function(){return this._getLocalToDevice(mr),I(mr)},t.Canvas.prototype.findMarkedCTM=function(i){return this._findMarkedCTM(i,mr)?I(mr):null},t.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(yr);for(var i=Array(9),l=0;9>l;l++)i[l]=t.HEAPF32[yr/4+l];return i},t.Canvas.prototype.readPixels=function(i,l,d,C,A){return s(this,i,l,d,C,A)},t.Canvas.prototype.saveLayer=function(i,l,d,C){return l=Ot(l),this._saveLayer(i||null,l,d||null,C||0)},t.Canvas.prototype.writePixels=function(i,l,d,C,A,L,N,q){if(i.byteLength%(l*d))throw"pixels length must be a multiple of the srcWidth * srcHeight";var ot=i.byteLength/(l*d);L=L||t.AlphaType.Unpremul,N=N||t.ColorType.RGBA_8888,q=q||t.ColorSpace.SRGB;var bt=ot*l;return ot=M(i,"HEAPU8"),l=this._writePixels({width:l,height:d,colorType:N,alphaType:L,colorSpace:q},ot,bt,C,A),F(ot,i),l},t.ColorFilter.MakeBlend=function(i,l){return i=nt(i),t.ColorFilter._MakeBlend(i,l)},t.ColorFilter.MakeMatrix=function(i){if(!i||i.length!==20)throw"invalid color matrix";var l=M(i,"HEAPF32"),d=t.ColorFilter._makeMatrix(l);return F(l,i),d},t.ContourMeasure.prototype.getPosTan=function(i,l){return this._getPosTan(i,Ut),i=we.toTypedArray(),l?(l.set(i),l):i.slice()},t.ImageFilter.MakeDropShadow=function(i,l,d,C,A,L){return A=nt(A),t.ImageFilter._MakeDropShadow(i,l,d,C,A,L)},t.ImageFilter.MakeMatrixTransform=function(i,l,d){if(i=$(i),"B"in l&&"C"in l)return t.ImageFilter._MakeMatrixTransformCubic(i,l.Dg,l.Eg,d);const C=l.filter;let A=t.MipmapMode.None;return"mipmap"in l&&(A=l.mipmap),t.ImageFilter._MakeMatrixTransformOptions(i,C,A,d)},t.Paint.prototype.getColor=function(){return this._getColor(cn),Yt(cn)},t.Paint.prototype.setColor=function(i,l){l=l||null,i=nt(i),this._setColor(i,l)},t.Paint.prototype.setColorComponents=function(i,l,d,C,A){A=A||null,i=Rt(i,l,d,C),this._setColor(i,A)},t.Path.prototype.getPoint=function(i,l){return this._getPoint(i,Ut),i=we.toTypedArray(),l?(l[0]=i[0],l[1]=i[1],l):i.slice(0,2)},t.PictureRecorder.prototype.beginRecording=function(i){return i=Ot(i),this._beginRecording(i)},t.Surface.prototype.makeImageSnapshot=function(i){return i=M(i,"HEAP32",Un),this._makeImageSnapshot(i)},t.Surface.prototype.requestAnimationFrame=function(i,l){this.Le||(this.Le=this.getCanvas()),requestAnimationFrame(function(){this.re!==void 0&&t.setCurrentContext(this.re),i(this.Le),this.flush(l)}.bind(this))},t.Surface.prototype.drawOnce=function(i,l){this.Le||(this.Le=this.getCanvas()),requestAnimationFrame(function(){this.re!==void 0&&t.setCurrentContext(this.re),i(this.Le),this.flush(l),this.dispose()}.bind(this))},t.PathEffect.MakeDash=function(i,l){if(l||(l=0),!i.length||i.length%2==1)throw"Intervals array must have even length";var d=M(i,"HEAPF32");return l=t.PathEffect._MakeDash(d,i.length,l),F(d,i),l},t.Shader.MakeColor=function(i,l){return l=l||null,i=nt(i),t.Shader._MakeColor(i,l)},t.Shader.Blend=t.Shader.MakeBlend,t.Shader.Color=t.Shader.MakeColor,t.Shader.MakeLinearGradient=function(i,l,d,C,A,L,N,q){q=q||null;var ot=Y(d),bt=M(C,"HEAPF32");N=N||0,L=$(L);var P=we.toTypedArray();return P.set(i),P.set(l,2),i=t.Shader._MakeLinearGradient(Ut,ot.ge,ot.Pe,bt,ot.count,A,N,L,q),F(ot.ge,d),C&&F(bt,C),i},t.Shader.MakeRadialGradient=function(i,l,d,C,A,L,N,q){q=q||null;var ot=Y(d),bt=M(C,"HEAPF32");return N=N||0,L=$(L),i=t.Shader._MakeRadialGradient(i[0],i[1],l,ot.ge,ot.Pe,bt,ot.count,A,N,L,q),F(ot.ge,d),C&&F(bt,C),i},t.Shader.MakeSweepGradient=function(i,l,d,C,A,L,N,q,ot,bt){bt=bt||null;var P=Y(d),K=M(C,"HEAPF32");return N=N||0,q=q||0,ot=ot||360,L=$(L),i=t.Shader._MakeSweepGradient(i,l,P.ge,P.Pe,K,P.count,A,q,ot,N,L,bt),F(P.ge,d),C&&F(K,C),i},t.Shader.MakeTwoPointConicalGradient=function(i,l,d,C,A,L,N,q,ot,bt){bt=bt||null;var P=Y(A),K=M(L,"HEAPF32");ot=ot||0,q=$(q);var yt=we.toTypedArray();return yt.set(i),yt.set(d,2),i=t.Shader._MakeTwoPointConicalGradient(Ut,l,C,P.ge,P.Pe,K,P.count,N,ot,q,bt),F(P.ge,A),L&&F(K,L),i},t.Vertices.prototype.bounds=function(i){this._bounds(Ut);var l=we.toTypedArray();return i?(i.set(l),i):l.slice()},t.Wd&&t.Wd.forEach(function(i){i()})},t.computeTonalColors=function(s){var i=M(s.ambient,"HEAPF32"),l=M(s.spot,"HEAPF32");this._computeTonalColors(i,l);var d={ambient:Yt(i),spot:Yt(l)};return F(i,s.ambient),F(l,s.spot),d},t.LTRBRect=function(s,i,l,d){return Float32Array.of(s,i,l,d)},t.XYWHRect=function(s,i,l,d){return Float32Array.of(s,i,s+l,i+d)},t.LTRBiRect=function(s,i,l,d){return Int32Array.of(s,i,l,d)},t.XYWHiRect=function(s,i,l,d){return Int32Array.of(s,i,s+l,i+d)},t.RRectXY=function(s,i,l){return Float32Array.of(s[0],s[1],s[2],s[3],i,l,i,l,i,l,i,l)},t.MakeAnimatedImageFromEncoded=function(s){s=new Uint8Array(s);var i=t._malloc(s.byteLength);return t.HEAPU8.set(s,i),(s=t._decodeAnimatedImage(i,s.byteLength))?s:null},t.MakeImageFromEncoded=function(s){s=new Uint8Array(s);var i=t._malloc(s.byteLength);return t.HEAPU8.set(s,i),(s=t._decodeImage(i,s.byteLength))?s:null};var un=null;t.MakeImageFromCanvasImageSource=function(s){var i=s.width,l=s.height;un||(un=document.createElement("canvas")),un.width=i,un.height=l;var d=un.getContext("2d");return d.drawImage(s,0,0),s=d.getImageData(0,0,i,l),t.MakeImage({width:i,height:l,alphaType:t.AlphaType.Unpremul,colorType:t.ColorType.RGBA_8888,colorSpace:t.ColorSpace.SRGB},s.data,4*i)},t.MakeImage=function(s,i,l){var d=t._malloc(i.length);return t.HEAPU8.set(i,d),t._MakeImage(s,d,i.length,l)},t.MakeVertices=function(s,i,l,d,C,A){var L=C&&C.length||0,N=0;return l&&l.length&&(N|=1),d&&d.length&&(N|=2),A===void 0||A||(N|=4),s=new t._VerticesBuilder(s,i.length/2,L,N),M(i,"HEAPF32",s.positions()),s.texCoords()&&M(l,"HEAPF32",s.texCoords()),s.colors()&&M(f(d),"HEAPU32",s.colors()),s.indices()&&M(C,"HEAPU16",s.indices()),s.detach()},t.Matrix={},t.Matrix.identity=function(){return n(3)},t.Matrix.invert=function(s){var i=s[0]*s[4]*s[8]+s[1]*s[5]*s[6]+s[2]*s[3]*s[7]-s[2]*s[4]*s[6]-s[1]*s[3]*s[8]-s[0]*s[5]*s[7];return i?[(s[4]*s[8]-s[5]*s[7])/i,(s[2]*s[7]-s[1]*s[8])/i,(s[1]*s[5]-s[2]*s[4])/i,(s[5]*s[6]-s[3]*s[8])/i,(s[0]*s[8]-s[2]*s[6])/i,(s[2]*s[3]-s[0]*s[5])/i,(s[3]*s[7]-s[4]*s[6])/i,(s[1]*s[6]-s[0]*s[7])/i,(s[0]*s[4]-s[1]*s[3])/i]:null},t.Matrix.mapPoints=function(s,i){for(var l=0;l<i.length;l+=2){var d=i[l],C=i[l+1],A=s[6]*d+s[7]*C+s[8],L=s[3]*d+s[4]*C+s[5];i[l]=(s[0]*d+s[1]*C+s[2])/A,i[l+1]=L/A}return i},t.Matrix.multiply=function(){return Qn(3,arguments)},t.Matrix.rotated=function(s,i,l){i=i||0,l=l||0;var d=Math.sin(s);return s=Math.cos(s),[s,-d,ln(d,l,1-s,i),d,s,ln(-d,i,1-s,l),0,0,1]},t.Matrix.scaled=function(s,i,l,d){l=l||0,d=d||0;var C=e([s,i],n(3),3,0,1);return e([l-s*l,d-i*d],C,3,2,0)},t.Matrix.skewed=function(s,i,l,d){l=l||0,d=d||0;var C=e([s,i],n(3),3,1,-1);return e([-s*l,-i*d],C,3,2,0)},t.Matrix.translated=function(s,i){return e(arguments,n(3),3,2,0)},t.Vector={},t.Vector.dot=function(s,i){return s.map(function(l,d){return l*i[d]}).reduce(function(l,d){return l+d})},t.Vector.lengthSquared=function(s){return t.Vector.dot(s,s)},t.Vector.length=function(s){return Math.sqrt(t.Vector.lengthSquared(s))},t.Vector.mulScalar=function(s,i){return s.map(function(l){return l*i})},t.Vector.add=function(s,i){return s.map(function(l,d){return l+i[d]})},t.Vector.sub=function(s,i){return s.map(function(l,d){return l-i[d]})},t.Vector.dist=function(s,i){return t.Vector.length(t.Vector.sub(s,i))},t.Vector.normalize=function(s){return t.Vector.mulScalar(s,1/t.Vector.length(s))},t.Vector.cross=function(s,i){return[s[1]*i[2]-s[2]*i[1],s[2]*i[0]-s[0]*i[2],s[0]*i[1]-s[1]*i[0]]},t.M44={},t.M44.identity=function(){return n(4)},t.M44.translated=function(s){return e(s,n(4),4,3,0)},t.M44.scaled=function(s){return e(s,n(4),4,0,1)},t.M44.rotated=function(s,i){return t.M44.rotatedUnitSinCos(t.Vector.normalize(s),Math.sin(i),Math.cos(i))},t.M44.rotatedUnitSinCos=function(s,i,l){var d=s[0],C=s[1];s=s[2];var A=1-l;return[A*d*d+l,A*d*C-i*s,A*d*s+i*C,0,A*d*C+i*s,A*C*C+l,A*C*s-i*d,0,A*d*s-i*C,A*C*s+i*d,A*s*s+l,0,0,0,0,1]},t.M44.lookat=function(s,i,l){i=t.Vector.normalize(t.Vector.sub(i,s)),l=t.Vector.normalize(l),l=t.Vector.normalize(t.Vector.cross(i,l));var d=t.M44.identity();return e(l,d,4,0,0),e(t.Vector.cross(l,i),d,4,1,0),e(t.Vector.mulScalar(i,-1),d,4,2,0),e(s,d,4,3,0),s=t.M44.invert(d),s===null?t.M44.identity():s},t.M44.perspective=function(s,i,l){var d=1/(i-s);return l/=2,l=Math.cos(l)/Math.sin(l),[l,0,0,0,0,l,0,0,0,0,(i+s)*d,2*i*s*d,0,0,-1,1]},t.M44.rc=function(s,i,l){return s[4*i+l]},t.M44.multiply=function(){return Qn(4,arguments)},t.M44.invert=function(s){var i=s[0],l=s[4],d=s[8],C=s[12],A=s[1],L=s[5],N=s[9],q=s[13],ot=s[2],bt=s[6],P=s[10],K=s[14],yt=s[3],Lt=s[7],ce=s[11];s=s[15];var Te=i*L-l*A,Ae=i*N-d*A,ue=i*q-C*A,G=l*N-d*L,c=l*q-C*L,v=d*q-C*N,k=ot*Lt-bt*yt,O=ot*ce-P*yt,j=ot*s-K*yt,U=bt*ce-P*Lt,it=bt*s-K*Lt,Bt=P*s-K*ce,ye=Te*Bt-Ae*it+ue*U+G*j-c*O+v*k,zt=1/ye;return ye===0||zt===1/0?null:(Te*=zt,Ae*=zt,ue*=zt,G*=zt,c*=zt,v*=zt,k*=zt,O*=zt,j*=zt,U*=zt,it*=zt,Bt*=zt,i=[L*Bt-N*it+q*U,N*j-A*Bt-q*O,A*it-L*j+q*k,L*O-A*U-N*k,d*it-l*Bt-C*U,i*Bt-d*j+C*O,l*j-i*it-C*k,i*U-l*O+d*k,Lt*v-ce*c+s*G,ce*ue-yt*v-s*Ae,yt*c-Lt*ue+s*Te,Lt*Ae-yt*G-ce*Te,P*c-bt*v-K*G,ot*v-P*ue+K*Ae,bt*ue-ot*c-K*Te,ot*G-bt*Ae+P*Te],i.every(function(nr){return!isNaN(nr)&&nr!==1/0&&nr!==-1/0})?i:null)},t.M44.transpose=function(s){return[s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]]},t.M44.mustInvert=function(s){if(s=t.M44.invert(s),s===null)throw"Matrix not invertible";return s},t.M44.setupCamera=function(s,i,l){var d=t.M44.lookat(l.eye,l.coa,l.up);return l=t.M44.perspective(l.near,l.far,l.angle),i=[(s[2]-s[0])/2,(s[3]-s[1])/2,i],s=t.M44.multiply(t.M44.translated([(s[0]+s[2])/2,(s[1]+s[3])/2,0]),t.M44.scaled(i)),t.M44.multiply(s,l,d,t.M44.mustInvert(s))},t.ColorMatrix={},t.ColorMatrix.identity=function(){var s=new Float32Array(20);return s[0]=1,s[6]=1,s[12]=1,s[18]=1,s},t.ColorMatrix.scaled=function(s,i,l,d){var C=new Float32Array(20);return C[0]=s,C[6]=i,C[12]=l,C[18]=d,C};var Ti=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];t.ColorMatrix.rotated=function(s,i,l){var d=t.ColorMatrix.identity();return s=Ti[s],d[s[0]]=l,d[s[1]]=i,d[s[2]]=-i,d[s[3]]=l,d},t.ColorMatrix.postTranslate=function(s,i,l,d,C){return s[4]+=i,s[9]+=l,s[14]+=d,s[19]+=C,s},t.ColorMatrix.concat=function(s,i){for(var l=new Float32Array(20),d=0,C=0;20>C;C+=5){for(var A=0;4>A;A++)l[d++]=s[C]*i[A]+s[C+1]*i[A+5]+s[C+2]*i[A+10]+s[C+3]*i[A+15];l[d++]=s[C]*i[4]+s[C+1]*i[9]+s[C+2]*i[14]+s[C+3]*i[19]+s[C+4]}return l},function(s){s.Wd=s.Wd||[],s.Wd.push(function(){function i(P){if(!P||!P.length)return[];for(var K=[],yt=0;yt<P.length;yt+=5){var Lt=s.LTRBRect(P[yt],P[yt+1],P[yt+2],P[yt+3]);Lt.direction=P[yt+4]===0?s.TextDirection.RTL:s.TextDirection.LTR,K.push(Lt)}return s._free(P.byteOffset),K}function l(P){return P=P||{},P.weight===void 0&&(P.weight=s.FontWeight.Normal),P.width=P.width||s.FontWidth.Normal,P.slant=P.slant||s.FontSlant.Upright,P}function d(P){if(!P||!P.length)return St;for(var K=[],yt=0;yt<P.length;yt++){var Lt=C(P[yt]);K.push(Lt)}return M(K,"HEAPU32")}function C(P){if(N[P])return N[P];var K=$t(P)+1,yt=s._malloc(K);return qt(P,gt,yt,K),N[P]=yt}function A(P){if(P._colorPtr=nt(P.color),P._foregroundColorPtr=St,P._backgroundColorPtr=St,P._decorationColorPtr=St,P.foregroundColor&&(P._foregroundColorPtr=nt(P.foregroundColor,q)),P.backgroundColor&&(P._backgroundColorPtr=nt(P.backgroundColor,ot)),P.decorationColor&&(P._decorationColorPtr=nt(P.decorationColor,bt)),Array.isArray(P.fontFamilies)&&P.fontFamilies.length?(P._fontFamiliesPtr=d(P.fontFamilies),P._fontFamiliesLen=P.fontFamilies.length):(P._fontFamiliesPtr=St,P._fontFamiliesLen=0),P.locale){var K=P.locale;P._localePtr=C(K),P._localeLen=$t(K)+1}else P._localePtr=St,P._localeLen=0;if(Array.isArray(P.shadows)&&P.shadows.length){K=P.shadows;var yt=K.map(function(G){return G.color||s.BLACK}),Lt=K.map(function(G){return G.blurRadius||0});P._shadowLen=K.length;for(var ce=s._malloc(8*K.length),Te=ce/4,Ae=0;Ae<K.length;Ae++){var ue=K[Ae].offset||[0,0];s.HEAPF32[Te]=ue[0],s.HEAPF32[Te+1]=ue[1],Te+=2}P._shadowColorsPtr=Y(yt).ge,P._shadowOffsetsPtr=ce,P._shadowBlurRadiiPtr=M(Lt,"HEAPF32")}else P._shadowLen=0,P._shadowColorsPtr=St,P._shadowOffsetsPtr=St,P._shadowBlurRadiiPtr=St;Array.isArray(P.fontFeatures)&&P.fontFeatures.length?(K=P.fontFeatures,yt=K.map(function(G){return G.name}),Lt=K.map(function(G){return G.value}),P._fontFeatureLen=K.length,P._fontFeatureNamesPtr=d(yt),P._fontFeatureValuesPtr=M(Lt,"HEAPU32")):(P._fontFeatureLen=0,P._fontFeatureNamesPtr=St,P._fontFeatureValuesPtr=St)}function L(P){s._free(P._fontFamiliesPtr),s._free(P._localePtr),s._free(P._shadowColorsPtr),s._free(P._shadowOffsetsPtr),s._free(P._shadowBlurRadiiPtr),s._free(P._fontFeatureNamesPtr),s._free(P._fontFeatureValuesPtr)}s.Paragraph.prototype.getRectsForRange=function(P,K,yt,Lt){return P=this._getRectsForRange(P,K,yt,Lt),i(P)},s.Paragraph.prototype.getRectsForPlaceholders=function(){var P=this._getRectsForPlaceholders();return i(P)},s.TypefaceFontProvider.prototype.registerFont=function(P,K){if(P=s.FontMgr.RefDefault().MakeTypefaceFromData(P),!P)return null;K=C(K),this._registerFont(P,K)},s.ParagraphStyle=function(P){if(P.disableHinting=P.disableHinting||!1,P.ellipsis){var K=P.ellipsis;P._ellipsisPtr=C(K),P._ellipsisLen=$t(K)+1}else P._ellipsisPtr=St,P._ellipsisLen=0;return P.heightMultiplier=P.heightMultiplier||0,P.maxLines=P.maxLines||0,K=(K=P.strutStyle)||{},K.strutEnabled=K.strutEnabled||!1,K.strutEnabled&&Array.isArray(K.fontFamilies)&&K.fontFamilies.length?(K._fontFamiliesPtr=d(K.fontFamilies),K._fontFamiliesLen=K.fontFamilies.length):(K._fontFamiliesPtr=St,K._fontFamiliesLen=0),K.fontStyle=l(K.fontStyle),K.fontSize=K.fontSize||0,K.heightMultiplier=K.heightMultiplier||0,K.halfLeading=K.halfLeading||!1,K.leading=K.leading||0,K.forceStrutHeight=K.forceStrutHeight||!1,P.strutStyle=K,P.textAlign=P.textAlign||s.TextAlign.Start,P.textDirection=P.textDirection||s.TextDirection.LTR,P.textHeightBehavior=P.textHeightBehavior||s.TextHeightBehavior.All,P.textStyle=s.TextStyle(P.textStyle),P},s.TextStyle=function(P){return P.color||(P.color=s.BLACK),P.decoration=P.decoration||0,P.decorationThickness=P.decorationThickness||0,P.decorationStyle=P.decorationStyle||s.DecorationStyle.Solid,P.textBaseline=P.textBaseline||s.TextBaseline.Alphabetic,P.fontSize=P.fontSize||0,P.letterSpacing=P.letterSpacing||0,P.wordSpacing=P.wordSpacing||0,P.heightMultiplier=P.heightMultiplier||0,P.halfLeading=P.halfLeading||!1,P.fontStyle=l(P.fontStyle),P};var N={},q=s._malloc(16),ot=s._malloc(16),bt=s._malloc(16);s.ParagraphBuilder.Make=function(P,K){return A(P.textStyle),K=s.ParagraphBuilder._Make(P,K),L(P.textStyle),K},s.ParagraphBuilder.MakeFromFontProvider=function(P,K){return A(P.textStyle),K=s.ParagraphBuilder._MakeFromFontProvider(P,K),L(P.textStyle),K},s.ParagraphBuilder.ShapeText=function(P,K,yt){let Lt=0;for(const ce of K)Lt+=ce.length;if(Lt!==P.length)throw"Accumulated block lengths must equal text.length";return s.ParagraphBuilder._ShapeText(P,K,yt)},s.ParagraphBuilder.prototype.pushStyle=function(P){A(P),this._pushStyle(P),L(P)},s.ParagraphBuilder.prototype.pushPaintStyle=function(P,K,yt){A(P),this._pushPaintStyle(P,K,yt),L(P)},s.ParagraphBuilder.prototype.pushFgPaintStyle=function(P,K){A(P),this._pushFgPaintStyle(P,K),L(P)},s.ParagraphBuilder.prototype.addPlaceholder=function(P,K,yt,Lt,ce){yt=yt||s.PlaceholderAlignment.Baseline,Lt=Lt||s.TextBaseline.Alphabetic,this._addPlaceholder(P||0,K||0,yt,Lt,ce||0)}})}(y),t.MakeManagedAnimation=function(s,i,l,d,C){if(!t._MakeManagedAnimation)throw"Not compiled with MakeManagedAnimation";if(l||(l=""),!i)return t._MakeManagedAnimation(s,0,St,St,St,l,d,C);for(var A=[],L=[],N=[],q=Object.keys(i||{}),ot=0;ot<q.length;ot++){var bt=q[ot],P=new Uint8Array(i[bt]),K=t._malloc(P.byteLength);t.HEAPU8.set(P,K),L.push(K),N.push(P.byteLength),P=$t(bt)+1,K=t._malloc(P),qt(bt,gt,K,P),A.push(K)}return i=M(A,"HEAPU32"),L=M(L,"HEAPU32"),N=M(N,"HEAPU32"),s=t._MakeManagedAnimation(s,q.length,i,L,N,l,d,C),t._free(i),t._free(L),t._free(N),s},function(s){s.Wd=s.Wd||[],s.Wd.push(function(){s.Animation.prototype.render=function(i,l){Ot(l,Ut),this._render(i,Ut)},s.Animation.prototype.size=function(i){this._size(Ut);var l=we.toTypedArray();return i?(i[0]=l[0],i[1]=l[1],i):l.slice(0,2)},s.ManagedAnimation&&(s.ManagedAnimation.prototype.render=function(i,l){Ot(l,Ut),this._render(i,Ut)},s.ManagedAnimation.prototype.seek=function(i,l){return this._seek(i,Ut),i=we.toTypedArray(),l?(l.set(i),l):i.slice()},s.ManagedAnimation.prototype.seekFrame=function(i,l){return this._seekFrame(i,Ut),i=we.toTypedArray(),l?(l.set(i),l):i.slice()},s.ManagedAnimation.prototype.setColor=function(i,l){return l=nt(l),this._setColor(i,l)},s.ManagedAnimation.prototype.size=function(i){this._size(Ut);var l=we.toTypedArray();return i?(i[0]=l[0],i[1]=l[1],i):l.slice(0,2)})})}(y),t.MakeParticles=function(s,i){if(!t._MakeParticles)throw"Not compiled with MakeParticles";if(!i)return t._MakeParticles(s,0,St,St,St);for(var l=[],d=[],C=[],A=Object.keys(i||{}),L=0;L<A.length;L++){var N=A[L],q=new Uint8Array(i[N]),ot=t._malloc(q.byteLength);t.HEAPU8.set(q,ot),d.push(ot),C.push(q.byteLength),q=$t(N)+1,ot=t._malloc(q),qt(N,gt,ot,q),l.push(ot)}return i=M(l,"HEAPU32"),d=M(d,"HEAPU32"),C=M(C,"HEAPU32"),s=t._MakeParticles(s,A.length,i,d,C),t._free(i),t._free(d),t._free(C),s},t.Wd=t.Wd||[],t.Wd.push(function(){t.ParticleEffect.prototype.uniforms=function(){var s=this._uniformPtr(),i=this.getUniformFloatCount();return!s||0>=i?new Float32Array:new Float32Array(t.HEAPU8.buffer,s,i)},t.ParticleEffect.prototype.setPosition=function(s){this._setPosition(s[0],s[1])}}),t.Wd=t.Wd||[],t.Wd.push(function(){t.Path.prototype.op=function(s,i){return this._op(s,i)?this:null},t.Path.prototype.simplify=function(){return this._simplify()?this:null}}),t.Wd=t.Wd||[],t.Wd.push(function(){t.Canvas.prototype.drawText=function(s,i,l,d,C){var A=$t(s),L=t._malloc(A+1);qt(s,gt,L,A+1),this._drawSimpleText(L,A,i,l,C,d),t._free(L)},t.Font.prototype.getGlyphBounds=function(s,i,l){var d=M(s,"HEAPU16"),C=t._malloc(16*s.length);return this._getGlyphWidthBounds(d,s.length,St,C,i||null),i=new Float32Array(t.HEAPU8.buffer,C,4*s.length),F(d,s),l?(l.set(i),t._free(C),l):(s=Float32Array.from(i),t._free(C),s)},t.Font.prototype.getGlyphIDs=function(s,i,l){i||(i=s.length);var d=$t(s)+1,C=t._malloc(d);return qt(s,gt,C,d),s=t._malloc(2*i),i=this._getGlyphIDs(C,d-1,i,s),t._free(C),0>i?(t._free(s),null):(C=new Uint16Array(t.HEAPU8.buffer,s,i),l?(l.set(C),t._free(s),l):(l=Uint16Array.from(C),t._free(s),l))},t.Font.prototype.getGlyphIntercepts=function(s,i,l,d){var C=M(s,"HEAPU16"),A=M(i,"HEAPF32");return this._getGlyphIntercepts(C,s.length,!(s&&s._ck),A,i.length,!(i&&i._ck),l,d)},t.Font.prototype.getGlyphWidths=function(s,i,l){var d=M(s,"HEAPU16"),C=t._malloc(4*s.length);return this._getGlyphWidthBounds(d,s.length,C,St,i||null),i=new Float32Array(t.HEAPU8.buffer,C,s.length),F(d,s),l?(l.set(i),t._free(C),l):(s=Float32Array.from(i),t._free(C),s)},t.FontMgr.FromData=function(){if(!arguments.length)return null;var s=arguments;if(s.length===1&&Array.isArray(s[0])&&(s=arguments[0]),!s.length)return null;for(var i=[],l=[],d=0;d<s.length;d++){var C=new Uint8Array(s[d]),A=M(C,"HEAPU8");i.push(A),l.push(C.byteLength)}return i=M(i,"HEAPU32"),l=M(l,"HEAPU32"),s=t.FontMgr._fromData(i,l,s.length),t._free(i),t._free(l),s},t.FontMgr.prototype.MakeTypefaceFromData=function(s){s=new Uint8Array(s);var i=M(s,"HEAPU8");return(s=this._makeTypefaceFromData(i,s.byteLength))?s:null},t.Typeface.MakeFreeTypeFaceFromData=function(s){s=new Uint8Array(s);var i=M(s,"HEAPU8");return(s=t.Typeface._MakeFreeTypeFaceFromData(i,s.byteLength))?s:null},t.Typeface.prototype.getGlyphIDs=function(s,i,l){i||(i=s.length);var d=$t(s)+1,C=t._malloc(d);return qt(s,gt,C,d),s=t._malloc(2*i),i=this._getGlyphIDs(C,d-1,i,s),t._free(C),0>i?(t._free(s),null):(C=new Uint16Array(t.HEAPU8.buffer,s,i),l?(l.set(C),t._free(s),l):(l=Uint16Array.from(C),t._free(s),l))},t.TextBlob.MakeOnPath=function(s,i,l,d){if(s&&s.length&&i&&i.countPoints()){if(i.countPoints()===1)return this.MakeFromText(s,l);d||(d=0);var C=l.getGlyphIDs(s);C=l.getGlyphWidths(C);var A=[];i=new t.ContourMeasureIter(i,!1,1);for(var L=i.next(),N=new Float32Array(4),q=0;q<s.length&&L;q++){var ot=C[q];if(d+=ot/2,d>L.length()){if(L.delete(),L=i.next(),!L){s=s.substring(0,q);break}d=ot/2}L.getPosTan(d,N);var bt=N[2],P=N[3];A.push(bt,P,N[0]-ot/2*bt,N[1]-ot/2*P),d+=ot/2}return s=this.MakeFromRSXform(s,A,l),L&&L.delete(),i.delete(),s}},t.TextBlob.MakeFromRSXform=function(s,i,l){var d=$t(s)+1,C=t._malloc(d);return qt(s,gt,C,d),s=M(i,"HEAPF32"),l=t.TextBlob._MakeFromRSXform(C,d-1,s,l),t._free(C),l||null},t.TextBlob.MakeFromRSXformGlyphs=function(s,i,l){var d=M(s,"HEAPU16");return i=M(i,"HEAPF32"),l=t.TextBlob._MakeFromRSXformGlyphs(d,2*s.length,i,l),F(d,s),l||null},t.TextBlob.MakeFromGlyphs=function(s,i){var l=M(s,"HEAPU16");return i=t.TextBlob._MakeFromGlyphs(l,2*s.length,i),F(l,s),i||null},t.TextBlob.MakeFromText=function(s,i){var l=$t(s)+1,d=t._malloc(l);return qt(s,gt,d,l),s=t.TextBlob._MakeFromText(d,l-1,i),t._free(d),s||null},t.MallocGlyphIDs=function(s){return t.Malloc(Uint16Array,s)}}),t.Wd=t.Wd||[],t.Wd.push(function(){t.MakePicture=function(s){s=new Uint8Array(s);var i=t._malloc(s.byteLength);return t.HEAPU8.set(s,i),(s=t._MakePicture(i,s.byteLength))?s:null}}),t.Wd=t.Wd||[],t.Wd.push(function(){t.RuntimeEffect.Make=function(s,i){return t.RuntimeEffect._Make(s,{onError:i||function(l){console.log("RuntimeEffect error",l)}})},t.RuntimeEffect.prototype.makeShader=function(s,i,l){var d=M(s,"HEAPF32");return l=$(l),this._makeShader(d,4*s.length,!!i,l)},t.RuntimeEffect.prototype.makeShaderWithChildren=function(s,i,l,d){var C=M(s,"HEAPF32");d=$(d);for(var A=[],L=0;L<l.length;L++)A.push(l[L].Rd.Vd);return l=M(A,"HEAPU32"),this._makeShaderWithChildren(C,4*s.length,!!i,l,A.length,d)}}),function(){function s(G){for(var c=0;c<G.length;c++)if(G[c]!==void 0&&!Number.isFinite(G[c]))return!1;return!0}function i(G){var c=t.getColorComponents(G);G=c[0];var v=c[1],k=c[2];return c=c[3],c===1?(G=G.toString(16).toLowerCase(),v=v.toString(16).toLowerCase(),k=k.toString(16).toLowerCase(),G=G.length===1?"0"+G:G,v=v.length===1?"0"+v:v,k=k.length===1?"0"+k:k,"#"+G+v+k):(c=c===0||c===1?c:c.toFixed(8),"rgba("+G+", "+v+", "+k+", "+c+")")}function l(G){return t.parseColorString(G,Te)}function d(G){if(G=Ae.exec(G),!G)return null;var c=parseFloat(G[4]),v=16;switch(G[5]){case"em":case"rem":v=16*c;break;case"pt":v=4*c/3;break;case"px":v=c;break;case"pc":v=16*c;break;case"in":v=96*c;break;case"cm":v=96*c/2.54;break;case"mm":v=96/25.4*c;break;case"q":v=96/25.4/4*c;break;case"%":v=16/75*c}return{style:G[1],variant:G[2],weight:G[3],sizePx:v,family:G[6].trim()}}function C(G){this.Sd=G,this.Ud=new t.Paint,this.Ud.setAntiAlias(!0),this.Ud.setStrokeMiter(10),this.Ud.setStrokeCap(t.StrokeCap.Butt),this.Ud.setStrokeJoin(t.StrokeJoin.Miter),this.Ue="10px monospace",this.we=new t.Font(null,10),this.we.setSubpixel(!0),this.fe=this.le=t.BLACK,this.ze=0,this.Ne=t.TRANSPARENT,this.Be=this.Ae=0,this.Oe=this.ne=1,this.Me=0,this.ye=[],this.Td=t.BlendMode.SrcOver,this.Ud.setStrokeWidth(this.Oe),this.Ud.setBlendMode(this.Td),this.Yd=new t.Path,this.Zd=t.Matrix.identity(),this.rf=[],this.Fe=[],this.pe=function(){this.Yd.delete(),this.Ud.delete(),this.we.delete(),this.Fe.forEach(function(c){c.pe()})},Object.defineProperty(this,"currentTransform",{enumerable:!0,get:function(){return{a:this.Zd[0],c:this.Zd[1],e:this.Zd[2],b:this.Zd[3],d:this.Zd[4],f:this.Zd[5]}},set:function(c){c.a&&this.setTransform(c.a,c.b,c.c,c.d,c.e,c.f)}}),Object.defineProperty(this,"fillStyle",{enumerable:!0,get:function(){return o(this.fe)?i(this.fe):this.fe},set:function(c){typeof c=="string"?this.fe=l(c):c.xe&&(this.fe=c)}}),Object.defineProperty(this,"font",{enumerable:!0,get:function(){return this.Ue},set:function(c){var v=d(c),k=v.family;v.typeface=ue[k]?ue[k][(v.style||"normal")+"|"+(v.variant||"normal")+"|"+(v.weight||"normal")]||ue[k]["*"]:null,v&&(this.we.setSize(v.sizePx),this.we.setTypeface(v.typeface),this.Ue=c)}}),Object.defineProperty(this,"globalAlpha",{enumerable:!0,get:function(){return this.ne},set:function(c){!isFinite(c)||0>c||1<c||(this.ne=c)}}),Object.defineProperty(this,"globalCompositeOperation",{enumerable:!0,get:function(){switch(this.Td){case t.BlendMode.SrcOver:return"source-over";case t.BlendMode.DstOver:return"destination-over";case t.BlendMode.Src:return"copy";case t.BlendMode.Dst:return"destination";case t.BlendMode.Clear:return"clear";case t.BlendMode.SrcIn:return"source-in";case t.BlendMode.DstIn:return"destination-in";case t.BlendMode.SrcOut:return"source-out";case t.BlendMode.DstOut:return"destination-out";case t.BlendMode.SrcATop:return"source-atop";case t.BlendMode.DstATop:return"destination-atop";case t.BlendMode.Xor:return"xor";case t.BlendMode.Plus:return"lighter";case t.BlendMode.Multiply:return"multiply";case t.BlendMode.Screen:return"screen";case t.BlendMode.Overlay:return"overlay";case t.BlendMode.Darken:return"darken";case t.BlendMode.Lighten:return"lighten";case t.BlendMode.ColorDodge:return"color-dodge";case t.BlendMode.ColorBurn:return"color-burn";case t.BlendMode.HardLight:return"hard-light";case t.BlendMode.SoftLight:return"soft-light";case t.BlendMode.Difference:return"difference";case t.BlendMode.Exclusion:return"exclusion";case t.BlendMode.Hue:return"hue";case t.BlendMode.Saturation:return"saturation";case t.BlendMode.Color:return"color";case t.BlendMode.Luminosity:return"luminosity"}},set:function(c){switch(c){case"source-over":this.Td=t.BlendMode.SrcOver;break;case"destination-over":this.Td=t.BlendMode.DstOver;break;case"copy":this.Td=t.BlendMode.Src;break;case"destination":this.Td=t.BlendMode.Dst;break;case"clear":this.Td=t.BlendMode.Clear;break;case"source-in":this.Td=t.BlendMode.SrcIn;break;case"destination-in":this.Td=t.BlendMode.DstIn;break;case"source-out":this.Td=t.BlendMode.SrcOut;break;case"destination-out":this.Td=t.BlendMode.DstOut;break;case"source-atop":this.Td=t.BlendMode.SrcATop;break;case"destination-atop":this.Td=t.BlendMode.DstATop;break;case"xor":this.Td=t.BlendMode.Xor;break;case"lighter":this.Td=t.BlendMode.Plus;break;case"plus-lighter":this.Td=t.BlendMode.Plus;break;case"plus-darker":throw"plus-darker is not supported";case"multiply":this.Td=t.BlendMode.Multiply;break;case"screen":this.Td=t.BlendMode.Screen;break;case"overlay":this.Td=t.BlendMode.Overlay;break;case"darken":this.Td=t.BlendMode.Darken;break;case"lighten":this.Td=t.BlendMode.Lighten;break;case"color-dodge":this.Td=t.BlendMode.ColorDodge;break;case"color-burn":this.Td=t.BlendMode.ColorBurn;break;case"hard-light":this.Td=t.BlendMode.HardLight;break;case"soft-light":this.Td=t.BlendMode.SoftLight;break;case"difference":this.Td=t.BlendMode.Difference;break;case"exclusion":this.Td=t.BlendMode.Exclusion;break;case"hue":this.Td=t.BlendMode.Hue;break;case"saturation":this.Td=t.BlendMode.Saturation;break;case"color":this.Td=t.BlendMode.Color;break;case"luminosity":this.Td=t.BlendMode.Luminosity;break;default:return}this.Ud.setBlendMode(this.Td)}}),Object.defineProperty(this,"imageSmoothingEnabled",{enumerable:!0,get:function(){return!0},set:function(){}}),Object.defineProperty(this,"imageSmoothingQuality",{enumerable:!0,get:function(){return"high"},set:function(){}}),Object.defineProperty(this,"lineCap",{enumerable:!0,get:function(){switch(this.Ud.getStrokeCap()){case t.StrokeCap.Butt:return"butt";case t.StrokeCap.Round:return"round";case t.StrokeCap.Square:return"square"}},set:function(c){switch(c){case"butt":this.Ud.setStrokeCap(t.StrokeCap.Butt);break;case"round":this.Ud.setStrokeCap(t.StrokeCap.Round);break;case"square":this.Ud.setStrokeCap(t.StrokeCap.Square)}}}),Object.defineProperty(this,"lineDashOffset",{enumerable:!0,get:function(){return this.Me},set:function(c){isFinite(c)&&(this.Me=c)}}),Object.defineProperty(this,"lineJoin",{enumerable:!0,get:function(){switch(this.Ud.getStrokeJoin()){case t.StrokeJoin.Miter:return"miter";case t.StrokeJoin.Round:return"round";case t.StrokeJoin.Bevel:return"bevel"}},set:function(c){switch(c){case"miter":this.Ud.setStrokeJoin(t.StrokeJoin.Miter);break;case"round":this.Ud.setStrokeJoin(t.StrokeJoin.Round);break;case"bevel":this.Ud.setStrokeJoin(t.StrokeJoin.Bevel)}}}),Object.defineProperty(this,"lineWidth",{enumerable:!0,get:function(){return this.Ud.getStrokeWidth()},set:function(c){0>=c||!c||(this.Oe=c,this.Ud.setStrokeWidth(c))}}),Object.defineProperty(this,"miterLimit",{enumerable:!0,get:function(){return this.Ud.getStrokeMiter()},set:function(c){0>=c||!c||this.Ud.setStrokeMiter(c)}}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,get:function(){return this.ze},set:function(c){0>c||!isFinite(c)||(this.ze=c)}}),Object.defineProperty(this,"shadowColor",{enumerable:!0,get:function(){return i(this.Ne)},set:function(c){this.Ne=l(c)}}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,get:function(){return this.Ae},set:function(c){isFinite(c)&&(this.Ae=c)}}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,get:function(){return this.Be},set:function(c){isFinite(c)&&(this.Be=c)}}),Object.defineProperty(this,"strokeStyle",{enumerable:!0,get:function(){return i(this.le)},set:function(c){typeof c=="string"?this.le=l(c):c.xe&&(this.le=c)}}),this.arc=function(c,v,k,O,j,U){P(this.Yd,c,v,k,k,0,O,j,U)},this.arcTo=function(c,v,k,O,j){q(this.Yd,c,v,k,O,j)},this.beginPath=function(){this.Yd.delete(),this.Yd=new t.Path},this.bezierCurveTo=function(c,v,k,O,j,U){var it=this.Yd;s([c,v,k,O,j,U])&&(it.isEmpty()&&it.moveTo(c,v),it.cubicTo(c,v,k,O,j,U))},this.clearRect=function(c,v,k,O){this.Ud.setStyle(t.PaintStyle.Fill),this.Ud.setBlendMode(t.BlendMode.Clear),this.Sd.drawRect(t.XYWHRect(c,v,k,O),this.Ud),this.Ud.setBlendMode(this.Td)},this.clip=function(c,v){typeof c=="string"?(v=c,c=this.Yd):c&&c.ef&&(c=c.$d),c||(c=this.Yd),c=c.copy(),v&&v.toLowerCase()==="evenodd"?c.setFillType(t.FillType.EvenOdd):c.setFillType(t.FillType.Winding),this.Sd.clipPath(c,t.ClipOp.Intersect,!0),c.delete()},this.closePath=function(){ot(this.Yd)},this.createImageData=function(){if(arguments.length===1){var c=arguments[0];return new L(new Uint8ClampedArray(4*c.width*c.height),c.width,c.height)}if(arguments.length===2){c=arguments[0];var v=arguments[1];return new L(new Uint8ClampedArray(4*c*v),c,v)}throw"createImageData expects 1 or 2 arguments, got "+arguments.length},this.createLinearGradient=function(c,v,k,O){if(s(arguments)){var j=new N(c,v,k,O);return this.Fe.push(j),j}},this.createPattern=function(c,v){return c=new Lt(c,v),this.Fe.push(c),c},this.createRadialGradient=function(c,v,k,O,j,U){if(s(arguments)){var it=new ce(c,v,k,O,j,U);return this.Fe.push(it),it}},this.drawImage=function(c){var v=this.Te();if(arguments.length===3||arguments.length===5)var k=t.XYWHRect(arguments[1],arguments[2],arguments[3]||c.width(),arguments[4]||c.height()),O=t.XYWHRect(0,0,c.width(),c.height());else if(arguments.length===9)k=t.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),O=t.XYWHRect(arguments[1],arguments[2],arguments[3],arguments[4]);else throw"invalid number of args for drawImage, need 3, 5, or 9; got "+arguments.length;this.Sd.drawImageRect(c,O,k,v,!1),v.dispose()},this.ellipse=function(c,v,k,O,j,U,it,Bt){P(this.Yd,c,v,k,O,j,U,it,Bt)},this.Te=function(){var c=this.Ud.copy();if(c.setStyle(t.PaintStyle.Fill),o(this.fe)){var v=t.multiplyByAlpha(this.fe,this.ne);c.setColor(v)}else v=this.fe.xe(this.Zd),c.setColor(t.Color(0,0,0,this.ne)),c.setShader(v);return c.dispose=function(){this.delete()},c},this.fill=function(c,v){if(typeof c=="string"?(v=c,c=this.Yd):c&&c.ef&&(c=c.$d),v==="evenodd")this.Yd.setFillType(t.FillType.EvenOdd);else{if(v!=="nonzero"&&v)throw"invalid fill rule";this.Yd.setFillType(t.FillType.Winding)}c||(c=this.Yd),v=this.Te();var k=this.Ce(v);k&&(this.Sd.save(),this.ue(),this.Sd.drawPath(c,k),this.Sd.restore(),k.dispose()),this.Sd.drawPath(c,v),v.dispose()},this.fillRect=function(c,v,k,O){var j=this.Te(),U=this.Ce(j);U&&(this.Sd.save(),this.ue(),this.Sd.drawRect(t.XYWHRect(c,v,k,O),U),this.Sd.restore(),U.dispose()),this.Sd.drawRect(t.XYWHRect(c,v,k,O),j),j.dispose()},this.fillText=function(c,v,k){var O=this.Te();c=t.TextBlob.MakeFromText(c,this.we);var j=this.Ce(O);j&&(this.Sd.save(),this.ue(),this.Sd.drawTextBlob(c,v,k,j),this.Sd.restore(),j.dispose()),this.Sd.drawTextBlob(c,v,k,O),c.delete(),O.dispose()},this.getImageData=function(c,v,k,O){return(c=this.Sd.readPixels(c,v,{width:k,height:O,colorType:t.ColorType.RGBA_8888,alphaType:t.AlphaType.Unpremul,colorSpace:t.ColorSpace.SRGB}))?new L(new Uint8ClampedArray(c.buffer),k,O):null},this.getLineDash=function(){return this.ye.slice()},this.sf=function(c){var v=t.Matrix.invert(this.Zd);return t.Matrix.mapPoints(v,c),c},this.isPointInPath=function(c,v,k){var O=arguments;if(O.length===3)var j=this.Yd;else if(O.length===4)j=O[0],c=O[1],v=O[2],k=O[3];else throw"invalid arg count, need 3 or 4, got "+O.length;return!isFinite(c)||!isFinite(v)||(k=k||"nonzero",k!=="nonzero"&&k!=="evenodd")?!1:(O=this.sf([c,v]),c=O[0],v=O[1],j.setFillType(k==="nonzero"?t.FillType.Winding:t.FillType.EvenOdd),j.contains(c,v))},this.isPointInStroke=function(c,v){var k=arguments;if(k.length===2)var O=this.Yd;else if(k.length===3)O=k[0],c=k[1],v=k[2];else throw"invalid arg count, need 2 or 3, got "+k.length;return!isFinite(c)||!isFinite(v)?!1:(k=this.sf([c,v]),c=k[0],v=k[1],O=O.copy(),O.setFillType(t.FillType.Winding),O.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.Ud.getStrokeCap(),join:this.Ud.getStrokeJoin(),precision:.3}),k=O.contains(c,v),O.delete(),k)},this.lineTo=function(c,v){K(this.Yd,c,v)},this.measureText=function(){throw Error("Clients wishing to properly measure text should use the Paragraph API")},this.moveTo=function(c,v){var k=this.Yd;s([c,v])&&k.moveTo(c,v)},this.putImageData=function(c,v,k,O,j,U,it){if(s([v,k,O,j,U,it])){if(O===void 0)this.Sd.writePixels(c.data,c.width,c.height,v,k);else if(O=O||0,j=j||0,U=U||c.width,it=it||c.height,0>U&&(O+=U,U=Math.abs(U)),0>it&&(j+=it,it=Math.abs(it)),0>O&&(U+=O,O=0),0>j&&(it+=j,j=0),!(0>=U||0>=it)){c=t.MakeImage({width:c.width,height:c.height,alphaType:t.AlphaType.Unpremul,colorType:t.ColorType.RGBA_8888,colorSpace:t.ColorSpace.SRGB},c.data,4*c.width);var Bt=t.XYWHRect(O,j,U,it);v=t.XYWHRect(v+O,k+j,U,it),k=t.Matrix.invert(this.Zd),this.Sd.save(),this.Sd.concat(k),this.Sd.drawImageRect(c,Bt,v,null,!1),this.Sd.restore(),c.delete()}}},this.quadraticCurveTo=function(c,v,k,O){var j=this.Yd;s([c,v,k,O])&&(j.isEmpty()&&j.moveTo(c,v),j.quadTo(c,v,k,O))},this.rect=function(c,v,k,O){var j=this.Yd;c=t.XYWHRect(c,v,k,O),s(c)&&j.addRect(c)},this.resetTransform=function(){this.Yd.transform(this.Zd);var c=t.Matrix.invert(this.Zd);this.Sd.concat(c),this.Zd=this.Sd.getTotalMatrix()},this.restore=function(){var c=this.rf.pop();if(c){var v=t.Matrix.multiply(this.Zd,t.Matrix.invert(c.Jf));this.Yd.transform(v),this.Ud.delete(),this.Ud=c.fg,this.ye=c.bg,this.Oe=c.xg,this.le=c.wg,this.fe=c.fs,this.Ae=c.ug,this.Be=c.vg,this.ze=c.jg,this.Ne=c.tg,this.ne=c.Qf,this.Td=c.Rf,this.Me=c.cg,this.Ue=c.Pf,this.Sd.restore(),this.Zd=this.Sd.getTotalMatrix()}},this.rotate=function(c){if(isFinite(c)){var v=t.Matrix.rotated(-c);this.Yd.transform(v),this.Sd.rotate(c/Math.PI*180,0,0),this.Zd=this.Sd.getTotalMatrix()}},this.save=function(){if(this.fe.ve){var c=this.fe.ve();this.Fe.push(c)}else c=this.fe;if(this.le.ve){var v=this.le.ve();this.Fe.push(v)}else v=this.le;this.rf.push({Jf:this.Zd.slice(),bg:this.ye.slice(),xg:this.Oe,wg:v,fs:c,ug:this.Ae,vg:this.Be,jg:this.ze,tg:this.Ne,Qf:this.ne,cg:this.Me,Rf:this.Td,fg:this.Ud.copy(),Pf:this.Ue}),this.Sd.save()},this.scale=function(c,v){if(s(arguments)){var k=t.Matrix.scaled(1/c,1/v);this.Yd.transform(k),this.Sd.scale(c,v),this.Zd=this.Sd.getTotalMatrix()}},this.setLineDash=function(c){for(var v=0;v<c.length;v++)if(!isFinite(c[v])||0>c[v])return;c.length%2==1&&Array.prototype.push.apply(c,c),this.ye=c},this.setTransform=function(c,v,k,O,j,U){s(arguments)&&(this.resetTransform(),this.transform(c,v,k,O,j,U))},this.ue=function(){var c=t.Matrix.invert(this.Zd);this.Sd.concat(c),this.Sd.concat(t.Matrix.translated(this.Ae,this.Be)),this.Sd.concat(this.Zd)},this.Ce=function(c){var v=t.multiplyByAlpha(this.Ne,this.ne);if(!t.getColorComponents(v)[3]||!(this.ze||this.Be||this.Ae))return null;c=c.copy(),c.setColor(v);var k=t.MaskFilter.MakeBlur(t.BlurStyle.Normal,this.ze/2,!1);return c.setMaskFilter(k),c.dispose=function(){k.delete(),this.delete()},c},this.gf=function(){var c=this.Ud.copy();if(c.setStyle(t.PaintStyle.Stroke),o(this.le)){var v=t.multiplyByAlpha(this.le,this.ne);c.setColor(v)}else v=this.le.xe(this.Zd),c.setColor(t.Color(0,0,0,this.ne)),c.setShader(v);if(c.setStrokeWidth(this.Oe),this.ye.length){var k=t.PathEffect.MakeDash(this.ye,this.Me);c.setPathEffect(k)}return c.dispose=function(){k&&k.delete(),this.delete()},c},this.stroke=function(c){c=c?c.$d:this.Yd;var v=this.gf(),k=this.Ce(v);k&&(this.Sd.save(),this.ue(),this.Sd.drawPath(c,k),this.Sd.restore(),k.dispose()),this.Sd.drawPath(c,v),v.dispose()},this.strokeRect=function(c,v,k,O){var j=this.gf(),U=this.Ce(j);U&&(this.Sd.save(),this.ue(),this.Sd.drawRect(t.XYWHRect(c,v,k,O),U),this.Sd.restore(),U.dispose()),this.Sd.drawRect(t.XYWHRect(c,v,k,O),j),j.dispose()},this.strokeText=function(c,v,k){var O=this.gf();c=t.TextBlob.MakeFromText(c,this.we);var j=this.Ce(O);j&&(this.Sd.save(),this.ue(),this.Sd.drawTextBlob(c,v,k,j),this.Sd.restore(),j.dispose()),this.Sd.drawTextBlob(c,v,k,O),c.delete(),O.dispose()},this.translate=function(c,v){if(s(arguments)){var k=t.Matrix.translated(-c,-v);this.Yd.transform(k),this.Sd.translate(c,v),this.Zd=this.Sd.getTotalMatrix()}},this.transform=function(c,v,k,O,j,U){c=[c,k,j,v,O,U,0,0,1],v=t.Matrix.invert(c),this.Yd.transform(v),this.Sd.concat(c),this.Zd=this.Sd.getTotalMatrix()},this.addHitRegion=function(){},this.clearHitRegions=function(){},this.drawFocusIfNeeded=function(){},this.removeHitRegion=function(){},this.scrollPathIntoView=function(){},Object.defineProperty(this,"canvas",{value:null,writable:!1})}function A(G){this.hf=G,this.re=new C(G.getCanvas()),this.Ve=[],this.Cf=t.FontMgr.RefDefault(),this.decodeImage=function(c){if(c=t.MakeImageFromEncoded(c),!c)throw"Invalid input";return this.Ve.push(c),c},this.loadFont=function(c,v){if(c=this.Cf.MakeTypefaceFromData(c),!c)return null;this.Ve.push(c);var k=(v.style||"normal")+"|"+(v.variant||"normal")+"|"+(v.weight||"normal");v=v.family,ue[v]||(ue[v]={"*":c}),ue[v][k]=c},this.makePath2D=function(c){return c=new yt(c),this.Ve.push(c.$d),c},this.getContext=function(c){return c==="2d"?this.re:null},this.toDataURL=function(c,v){this.hf.flush();var k=this.hf.makeImageSnapshot();if(k){c=c||"image/png";var O=t.ImageFormat.PNG;if(c==="image/jpeg"&&(O=t.ImageFormat.JPEG),v=k.encodeToBytes(O,v||.92)){if(k.delete(),c="data:"+c+";base64,",typeof Buffer!="undefined")v=Buffer.from(v).toString("base64");else{k=0,O=v.length;for(var j="",U;k<O;)U=v.slice(k,Math.min(k+32768,O)),j+=String.fromCharCode.apply(null,U),k+=32768;v=btoa(j)}return c+v}}},this.dispose=function(){this.re.pe(),this.Ve.forEach(function(c){c.delete()}),this.hf.dispose()}}function L(G,c,v){if(!c||v===0)throw"invalid dimensions, width and height must be non-zero";if(G.length%4)throw"arr must be a multiple of 4";v=v||G.length/(4*c),Object.defineProperty(this,"data",{value:G,writable:!1}),Object.defineProperty(this,"height",{value:v,writable:!1}),Object.defineProperty(this,"width",{value:c,writable:!1})}function N(G,c,v,k){this.be=null,this.ie=[],this.de=[],this.addColorStop=function(O,j){if(0>O||1<O||!isFinite(O))throw"offset must be between 0 and 1 inclusively";j=l(j);var U=this.de.indexOf(O);if(U!==-1)this.ie[U]=j;else{for(U=0;U<this.de.length&&!(this.de[U]>O);U++);this.de.splice(U,0,O),this.ie.splice(U,0,j)}},this.ve=function(){var O=new N(G,c,v,k);return O.ie=this.ie.slice(),O.de=this.de.slice(),O},this.pe=function(){this.be&&(this.be.delete(),this.be=null)},this.xe=function(O){var j=[G,c,v,k];t.Matrix.mapPoints(O,j),O=j[0];var U=j[1],it=j[2];return j=j[3],this.pe(),this.be=t.Shader.MakeLinearGradient([O,U],[it,j],this.ie,this.de,t.TileMode.Clamp)}}function q(G,c,v,k,O,j){if(s([c,v,k,O,j])){if(0>j)throw"radii cannot be negative";G.isEmpty()&&G.moveTo(c,v),G.arcToTangent(c,v,k,O,j)}}function ot(G){if(!G.isEmpty()){var c=G.getBounds();(c[3]-c[1]||c[2]-c[0])&&G.close()}}function bt(G,c,v,k,O,j,U){U=(U-j)/Math.PI*180,j=j/Math.PI*180,c=t.LTRBRect(c-k,v-O,c+k,v+O),1e-5>Math.abs(Math.abs(U)-360)?(v=U/2,G.arcToOval(c,j,v,!1),G.arcToOval(c,j+v,v,!1)):G.arcToOval(c,j,U,!1)}function P(G,c,v,k,O,j,U,it,Bt){if(s([c,v,k,O,j,U,it])){if(0>k||0>O)throw"radii cannot be negative";var ye=2*Math.PI,zt=U%ye;0>zt&&(zt+=ye);var nr=zt-U;U=zt,it+=nr,!Bt&&it-U>=ye?it=U+ye:Bt&&U-it>=ye?it=U-ye:!Bt&&U>it?it=U+(ye-(U-it)%ye):Bt&&U<it&&(it=U-(ye-(it-U)%ye)),j?(Bt=t.Matrix.rotated(j,c,v),j=t.Matrix.rotated(-j,c,v),G.transform(j),bt(G,c,v,k,O,U,it),G.transform(Bt)):bt(G,c,v,k,O,U,it)}}function K(G,c,v){s([c,v])&&(G.isEmpty()&&G.moveTo(c,v),G.lineTo(c,v))}function yt(G){this.$d=null,this.$d=typeof G=="string"?t.Path.MakeFromSVGString(G):G&&G.ef?G.$d.copy():new t.Path,this.ef=function(){return this.$d},this.addPath=function(c,v){v||(v={a:1,c:0,e:0,b:0,d:1,f:0}),this.$d.addPath(c.$d,[v.a,v.c,v.e,v.b,v.d,v.f])},this.arc=function(c,v,k,O,j,U){P(this.$d,c,v,k,k,0,O,j,U)},this.arcTo=function(c,v,k,O,j){q(this.$d,c,v,k,O,j)},this.bezierCurveTo=function(c,v,k,O,j,U){var it=this.$d;s([c,v,k,O,j,U])&&(it.isEmpty()&&it.moveTo(c,v),it.cubicTo(c,v,k,O,j,U))},this.closePath=function(){ot(this.$d)},this.ellipse=function(c,v,k,O,j,U,it,Bt){P(this.$d,c,v,k,O,j,U,it,Bt)},this.lineTo=function(c,v){K(this.$d,c,v)},this.moveTo=function(c,v){var k=this.$d;s([c,v])&&k.moveTo(c,v)},this.quadraticCurveTo=function(c,v,k,O){var j=this.$d;s([c,v,k,O])&&(j.isEmpty()&&j.moveTo(c,v),j.quadTo(c,v,k,O))},this.rect=function(c,v,k,O){var j=this.$d;c=t.XYWHRect(c,v,k,O),s(c)&&j.addRect(c)}}function Lt(G,c){switch(this.be=null,this.Ef=G,this._transform=t.Matrix.identity(),c===""&&(c="repeat"),c){case"repeat-x":this.De=t.TileMode.Repeat,this.Ee=t.TileMode.Decal;break;case"repeat-y":this.De=t.TileMode.Decal,this.Ee=t.TileMode.Repeat;break;case"repeat":this.Ee=this.De=t.TileMode.Repeat;break;case"no-repeat":this.Ee=this.De=t.TileMode.Decal;break;default:throw"invalid repetition mode "+c}this.setTransform=function(v){v=[v.a,v.c,v.e,v.b,v.d,v.f,0,0,1],s(v)&&(this._transform=v)},this.ve=function(){var v=new Lt;return v.De=this.De,v.Ee=this.Ee,v},this.pe=function(){this.be&&(this.be.delete(),this.be=null)},this.xe=function(){return this.pe(),this.be=this.Ef.makeShaderCubic(this.De,this.Ee,1/3,1/3,this._transform)}}function ce(G,c,v,k,O,j){this.be=null,this.ie=[],this.de=[],this.addColorStop=function(U,it){if(0>U||1<U||!isFinite(U))throw"offset must be between 0 and 1 inclusively";it=l(it);var Bt=this.de.indexOf(U);if(Bt!==-1)this.ie[Bt]=it;else{for(Bt=0;Bt<this.de.length&&!(this.de[Bt]>U);Bt++);this.de.splice(Bt,0,U),this.ie.splice(Bt,0,it)}},this.ve=function(){var U=new ce(G,c,v,k,O,j);return U.ie=this.ie.slice(),U.de=this.de.slice(),U},this.pe=function(){this.be&&(this.be.delete(),this.be=null)},this.xe=function(U){var it=[G,c,k,O];t.Matrix.mapPoints(U,it);var Bt=it[0],ye=it[1],zt=it[2];it=it[3];var nr=(Math.abs(U[0])+Math.abs(U[4]))/2;return U=v*nr,nr*=j,this.pe(),this.be=t.Shader.MakeTwoPointConicalGradient([Bt,ye],U,[zt,it],nr,this.ie,this.de,t.TileMode.Clamp)}}t._testing={};var Te={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),lightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};t._testing.parseColor=l,t._testing.colorToString=i;var Ae=/(italic|oblique|normal|)\s*(small-caps|normal|)\s*(bold|bolder|lighter|[1-9]00|normal|)\s*([\d\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)/,ue={"Noto Mono":{"*":null},monospace:{"*":null}};t._testing.parseFontString=d,t.MakeCanvas=function(G,c){return(G=t.MakeSurface(G,c))?new A(G):null},t.ImageData=function(){if(arguments.length===2){var G=arguments[0],c=arguments[1];return new L(new Uint8ClampedArray(4*G*c),G,c)}if(arguments.length===3){var v=arguments[0];if(v.prototype.constructor!==Uint8ClampedArray)throw"bytes must be given as a Uint8ClampedArray";if(G=arguments[1],c=arguments[2],v%4)throw"bytes must be given in a multiple of 4";if(v%G)throw"bytes must divide evenly by width";if(c&&c!==v/(4*G))throw"invalid height given";return new L(v,G,v/(4*G))}throw"invalid number of arguments - takes 2 or 3, saw "+arguments.length}}()}(y);var Pt={},Ct;for(Ct in y)y.hasOwnProperty(Ct)&&(Pt[Ct]=y[Ct]);var Zt="./this.program";function _t(t,e){throw e}var Dt=!1,It=!1,T=!1,Jt=!1;Dt=typeof window=="object",It=typeof importScripts=="function",T=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Jt=!Dt&&!T&&!It;var Vt="",Kt,Se,Ie,Nt,me;T?(Vt=It?tt(391).dirname(Vt)+"/":vt+"/",Kt=function(t,e){return Nt||(Nt=tt(3428)),me||(me=tt(391)),t=me.normalize(t),Nt.readFileSync(t,e?null:"utf8")},Ie=function(t){return t=Kt(t,!0),t.buffer||(t=new Uint8Array(t)),ir(t.buffer),t},1<process.argv.length&&(Zt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof Wn))throw t}),process.on("unhandledRejection",de),_t=function(t){process.exit(t)},y.inspect=function(){return"[Emscripten Module object]"}):Jt?(typeof read!="undefined"&&(Kt=function(t){return read(t)}),Ie=function(t){return typeof readbuffer=="function"?new Uint8Array(readbuffer(t)):(t=read(t,"binary"),ir(typeof t=="object"),t)},typeof quit=="function"&&(_t=function(t){quit(t)}),typeof print!="undefined"&&(typeof console=="undefined"&&(console={}),console.log=print,console.warn=console.error=typeof printErr!="undefined"?printErr:print)):(Dt||It)&&(It?Vt=self.location.href:typeof document!="undefined"&&document.currentScript&&(Vt=document.currentScript.src),At&&(Vt=At),Vt.indexOf("blob:")!==0?Vt=Vt.substr(0,Vt.lastIndexOf("/")+1):Vt="",Kt=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},It&&(Ie=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),Se=function(t,e,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){o.status==200||o.status==0&&o.response?e(o.response):n()},o.onerror=n,o.send(null)});var _e=y.print||console.log.bind(console),xe=y.printErr||console.warn.bind(console);for(Ct in Pt)Pt.hasOwnProperty(Ct)&&(y[Ct]=Pt[Ct]);Pt=null,y.thisProgram&&(Zt=y.thisProgram),y.quit&&(_t=y.quit);var Ft=0,Oe;y.wasmBinary&&(Oe=y.wasmBinary);var vr=y.noExitRuntime||!0;typeof WebAssembly!="object"&&de("no native wasm support detected");var wr,Sr=!1;function ir(t,e){t||de("Assertion failed: "+e)}var Lr=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function Cr(t,e,n){var o=e+n;for(n=e;t[n]&&!(n>=o);)++n;if(16<n-e&&t.subarray&&Lr)return Lr.decode(t.subarray(e,n));for(o="";e<n;){var h=t[e++];if(h&128){var f=t[e++]&63;if((h&224)==192)o+=String.fromCharCode((h&31)<<6|f);else{var b=t[e++]&63;h=(h&240)==224?(h&15)<<12|f<<6|b:(h&7)<<18|f<<12|b<<6|t[e++]&63,65536>h?o+=String.fromCharCode(h):(h-=65536,o+=String.fromCharCode(55296|h>>10,56320|h&1023))}}else o+=String.fromCharCode(h)}return o}function Fe(t,e){return t?Cr(gt,t,e):""}function qt(t,e,n,o){if(!(0<o))return 0;var h=n;o=n+o-1;for(var f=0;f<t.length;++f){var b=t.charCodeAt(f);if(55296<=b&&57343>=b){var _=t.charCodeAt(++f);b=65536+((b&1023)<<10)|_&1023}if(127>=b){if(n>=o)break;e[n++]=b}else{if(2047>=b){if(n+1>=o)break;e[n++]=192|b>>6}else{if(65535>=b){if(n+2>=o)break;e[n++]=224|b>>12}else{if(n+3>=o)break;e[n++]=240|b>>18,e[n++]=128|b>>12&63}e[n++]=128|b>>6&63}e[n++]=128|b&63}}return e[n]=0,n-h}function $t(t){for(var e=0,n=0;n<t.length;++n){var o=t.charCodeAt(n);55296<=o&&57343>=o&&(o=65536+((o&1023)<<10)|t.charCodeAt(++n)&1023),127>=o?++e:e=2047>=o?e+2:65535>=o?e+3:e+4}return e}var Le=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):void 0;function Ye(t,e){for(var n=t>>1,o=n+e/2;!(n>=o)&&Wt[n];)++n;if(n<<=1,32<n-t&&Le)return Le.decode(gt.subarray(t,n));for(n="",o=0;!(o>=e/2);++o){var h=De[t+2*o>>1];if(h==0)break;n+=String.fromCharCode(h)}return n}function br(t,e,n){if(n===void 0&&(n=2147483647),2>n)return 0;n-=2;var o=e;n=n<2*t.length?n/2:t.length;for(var h=0;h<n;++h)De[e>>1]=t.charCodeAt(h),e+=2;return De[e>>1]=0,e-o}function sr(t){return 2*t.length}function Qr(t,e){for(var n=0,o="";!(n>=e/4);){var h=Z[t+4*n>>2];if(h==0)break;++n,65536<=h?(h-=65536,o+=String.fromCharCode(55296|h>>10,56320|h&1023)):o+=String.fromCharCode(h)}return o}function Pr(t,e,n){if(n===void 0&&(n=2147483647),4>n)return 0;var o=e;n=o+n-4;for(var h=0;h<t.length;++h){var f=t.charCodeAt(h);if(55296<=f&&57343>=f){var b=t.charCodeAt(++h);f=65536+((f&1023)<<10)|b&1023}if(Z[e>>2]=f,e+=4,e+4>n)break}return Z[e>>2]=0,e-o}function qr(t){for(var e=0,n=0;n<t.length;++n){var o=t.charCodeAt(n);55296<=o&&57343>=o&&++n,e+=4}return e}var ke,fe,gt,De,Wt,Z,ee,lt,Ve;function Ce(){var t=wr.buffer;ke=t,y.HEAP8=fe=new Int8Array(t),y.HEAP16=De=new Int16Array(t),y.HEAP32=Z=new Int32Array(t),y.HEAPU8=gt=new Uint8Array(t),y.HEAPU16=Wt=new Uint16Array(t),y.HEAPU32=ee=new Uint32Array(t),y.HEAPF32=lt=new Float32Array(t),y.HEAPF64=Ve=new Float64Array(t)}var Ht,Dr=[],_r=[],Vr=[];function xr(){var t=y.preRun.shift();Dr.unshift(t)}var oe=0,je=null,Ne=null;y.preloadedImages={},y.preloadedAudios={};function de(t){throw y.onAbort&&y.onAbort(t),xe(t),Sr=!0,t=new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info."),dt(t),t}function Xe(){return ae.startsWith("data:application/octet-stream;base64,")}var ae="canvaskit.wasm";if(!Xe()){var jr=ae;ae=y.locateFile?y.locateFile(jr,Vt):Vt+jr}function or(){var t=ae;try{if(t==ae&&Oe)return new Uint8Array(Oe);if(Ie)return Ie(t);throw"both async and sync fetching of the wasm failed"}catch(e){de(e)}}function Zr(){if(!Oe&&(Dt||It)){if(typeof fetch=="function"&&!ae.startsWith("file://"))return fetch(ae,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+ae+"'";return t.arrayBuffer()}).catch(function(){return or()});if(Se)return new Promise(function(t,e){Se(ae,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return or()})}function ze(t){for(;0<t.length;){var e=t.shift();if(typeof e=="function")e(y);else{var n=e.Gg;typeof n=="number"?e.jf===void 0?Ht.get(n)():Ht.get(n)(e.jf):n(e.jf===void 0?null:e.jf)}}}function Je(t){this.Vd=t-16,this.og=function(e){Z[this.Vd+8>>2]=e},this.lg=function(e){Z[this.Vd+0>>2]=e},this.mg=function(){Z[this.Vd+4>>2]=0},this.kg=function(){fe[this.Vd+12>>0]=0},this.ng=function(){fe[this.Vd+13>>0]=0},this.Zf=function(e,n){this.og(e),this.lg(n),this.mg(),this.kg(),this.ng()}}var Mr=0,X={},p=[null,[],[]],E={},z={};function rt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function st(t){return this.fromWireType(ee[t>>2])}var pt={},mt={},Gt={};function Ee(t){if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var e=t.charCodeAt(0);return 48<=e&&57>=e?"_"+t:t}function ar(t,e){return t=Ee(t),new Function("body","return function "+t+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(e)}function tn(t){var e=Error,n=ar(t,function(o){this.name=t,this.message=o,o=Error(o).stack,o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var fn=void 0;function $e(t){throw new fn(t)}function be(t,e,n){function o(_){_=n(_),_.length!==t.length&&$e("Mismatched type converter count");for(var F=0;F<t.length;++F)Me(t[F],_[F])}t.forEach(function(_){Gt[_]=e});var h=Array(e.length),f=[],b=0;e.forEach(function(_,F){mt.hasOwnProperty(_)?h[F]=mt[_]:(f.push(_),pt.hasOwnProperty(_)||(pt[_]=[]),pt[_].push(function(){h[F]=mt[_],++b,b===f.length&&o(h)}))}),f.length===0&&o(h)}function Hr(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var dn=void 0;function jt(t){for(var e="";gt[t];)e+=dn[gt[t++]];return e}var lr=void 0;function xt(t){throw new lr(t)}function Me(t,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var o=e.name;if(t||xt('type "'+o+'" must have a positive integer typeid pointer'),mt.hasOwnProperty(t)){if(n.Yf)return;xt("Cannot register type '"+o+"' twice")}mt[t]=e,delete Gt[t],pt.hasOwnProperty(t)&&(e=pt[t],delete pt[t],e.forEach(function(h){h()}))}function en(t){xt(t.Rd.ae.Xd.name+" instance already deleted")}var Tr=!1;function pn(){}function gn(t){--t.count.value,t.count.value===0&&(t.he?t.ke.oe(t.he):t.ae.Xd.oe(t.Vd))}function hr(t){return typeof FinalizationGroup=="undefined"?(hr=function(e){return e},t):(Tr=new FinalizationGroup(function(e){for(var n=e.next();!n.done;n=e.next())n=n.value,n.Vd?gn(n):console.warn("object already deleted: "+n.Vd)}),hr=function(e){return Tr.register(e,e.Rd,e.Rd),e},pn=function(e){Tr.unregister(e.Rd)},hr(t))}var Ar=void 0,Fr=[];function rn(){for(;Fr.length;){var t=Fr.pop();t.Rd.Ie=!1,t.delete()}}function Ze(){}var yn={};function We(t,e,n){if(t[e].ce===void 0){var o=t[e];t[e]=function(){return t[e].ce.hasOwnProperty(arguments.length)||xt("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].ce+")!"),t[e].ce[arguments.length].apply(this,arguments)},t[e].ce=[],t[e].ce[o.Ge]=o}}function Qe(t,e,n){y.hasOwnProperty(t)?((n===void 0||y[t].ce!==void 0&&y[t].ce[n]!==void 0)&&xt("Cannot register public name '"+t+"' twice"),We(y,t,t),y.hasOwnProperty(n)&&xt("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),y[t].ce[n]=e):(y[t]=e,n!==void 0&&(y[t].Ig=n))}function re(t,e,n,o,h,f,b,_){this.name=t,this.constructor=e,this.Je=n,this.oe=o,this.me=h,this.Sf=f,this.Se=b,this.Mf=_,this.hg=[]}function cr(t,e,n){for(;e!==n;)e.Se||xt("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.Se(t),e=e.me;return t}function nn(t,e){return e===null?(this.lf&&xt("null is not a valid "+this.name),0):(e.Rd||xt('Cannot pass "'+qe(e)+'" as a '+this.name),e.Rd.Vd||xt("Cannot pass deleted object as a pointer of type "+this.name),cr(e.Rd.Vd,e.Rd.ae.Xd,this.Xd))}function Tn(t,e){if(e===null){if(this.lf&&xt("null is not a valid "+this.name),this.Xe){var n=this.mf();return t!==null&&t.push(this.oe,n),n}return 0}if(e.Rd||xt('Cannot pass "'+qe(e)+'" as a '+this.name),e.Rd.Vd||xt("Cannot pass deleted object as a pointer of type "+this.name),!this.We&&e.Rd.ae.We&&xt("Cannot convert argument of type "+(e.Rd.ke?e.Rd.ke.name:e.Rd.ae.name)+" to parameter type "+this.name),n=cr(e.Rd.Vd,e.Rd.ae.Xd,this.Xd),this.Xe)switch(e.Rd.he===void 0&&xt("Passing raw pointer to smart pointer is illegal"),this.sg){case 0:e.Rd.ke===this?n=e.Rd.he:xt("Cannot convert argument of type "+(e.Rd.ke?e.Rd.ke.name:e.Rd.ae.name)+" to parameter type "+this.name);break;case 1:n=e.Rd.he;break;case 2:if(e.Rd.ke===this)n=e.Rd.he;else{var o=e.clone();n=this.ig(n,pe(function(){o.delete()})),t!==null&&t.push(this.oe,n)}break;default:xt("Unsupporting sharing policy")}return n}function An(t,e){return e===null?(this.lf&&xt("null is not a valid "+this.name),0):(e.Rd||xt('Cannot pass "'+qe(e)+'" as a '+this.name),e.Rd.Vd||xt("Cannot pass deleted object as a pointer of type "+this.name),e.Rd.ae.We&&xt("Cannot convert argument of type "+e.Rd.ae.name+" to parameter type "+this.name),cr(e.Rd.Vd,e.Rd.ae.Xd,this.Xd))}function Ur(t,e,n){return e===n?t:n.me===void 0?null:(t=Ur(t,e,n.me),t===null?null:n.Mf(t))}var kr={};function Fn(t,e){for(e===void 0&&xt("ptr should not be undefined");t.me;)e=t.Se(e),t=t.me;return kr[e]}function Kr(t,e){return e.ae&&e.Vd||$e("makeClassHandle requires ptr and ptrType"),!!e.ke!=!!e.he&&$e("Both smartPtrType and smartPtr must be specified"),e.count={value:1},hr(Object.create(t,{Rd:{value:e}}))}function ve(t,e,n,o,h,f,b,_,F,M,Y){this.name=t,this.Xd=e,this.lf=n,this.We=o,this.Xe=h,this.gg=f,this.sg=b,this.Af=_,this.mf=F,this.ig=M,this.oe=Y,h||e.me!==void 0?this.toWireType=Tn:(this.toWireType=o?nn:An,this.je=null)}function Er(t,e,n){y.hasOwnProperty(t)||$e("Replacing nonexistant public symbol"),y[t].ce!==void 0&&n!==void 0?y[t].ce[n]=e:(y[t]=e,y[t].Ge=n)}function kn(t,e){var n=[];return function(){n.length=arguments.length;for(var o=0;o<arguments.length;o++)n[o]=arguments[o];return t.includes("j")?(o=y["dynCall_"+t],o=n&&n.length?o.apply(null,[e].concat(n)):o.call(null,e)):o=Ht.get(e).apply(null,n),o}}function Qt(t,e){t=jt(t);var n=t.includes("j")?kn(t,e):Ht.get(e);return typeof n!="function"&&xt("unknown function pointer with signature "+t+": "+e),n}var sn=void 0;function He(t){t=Jn(t);var e=jt(t);return Ke(t),e}function ur(t,e){function n(f){h[f]||mt[f]||(Gt[f]?Gt[f].forEach(n):(o.push(f),h[f]=!0))}var o=[],h={};throw e.forEach(n),new sn(t+": "+o.map(He).join([", "]))}function Gr(t){var e=Function;if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=ar(e.name||"unknownFunctionName",function(){});return n.prototype=e.prototype,n=new n,t=e.apply(n,t),t instanceof Object?t:n}function Yr(t,e,n,o,h){var f=e.length;2>f&&xt("argTypes array size mismatch! Must at least get return value and 'this' types!");var b=e[1]!==null&&n!==null,_=!1;for(n=1;n<e.length;++n)if(e[n]!==null&&e[n].je===void 0){_=!0;break}var F=e[0].name!=="void",M="",Y="";for(n=0;n<f-2;++n)M+=(n!==0?", ":"")+"arg"+n,Y+=(n!==0?", ":"")+"arg"+n+"Wired";t="return function "+Ee(t)+"("+M+`) {
if (arguments.length !== `+(f-2)+`) {
throwBindingError('function `+t+" called with ' + arguments.length + ' arguments, expected "+(f-2)+` args!');
}
`,_&&(t+=`var destructors = [];
`);var $=_?"destructors":"null";for(M="throwBindingError invoker fn runDestructors retType classParam".split(" "),o=[xt,o,h,rt,e[0],e[1]],b&&(t+="var thisWired = classParam.toWireType("+$+`, this);
`),n=0;n<f-2;++n)t+="var arg"+n+"Wired = argType"+n+".toWireType("+$+", arg"+n+"); // "+e[n+2].name+`
`,M.push("argType"+n),o.push(e[n+2]);if(b&&(Y="thisWired"+(0<Y.length?", ":"")+Y),t+=(F?"var rv = ":"")+"invoker(fn"+(0<Y.length?", ":"")+Y+`);
`,_)t+=`runDestructors(destructors);
`;else for(n=b?1:2;n<e.length;++n)f=n===1?"thisWired":"arg"+(n-2)+"Wired",e[n].je!==null&&(t+=f+"_dtor("+f+"); // "+e[n].name+`
`,M.push(f+"_dtor"),o.push(e[n].je));return F&&(t+=`var ret = retType.fromWireType(rv);
return ret;
`),M.push(t+`}
`),Gr(M).apply(null,o)}function Nr(t,e){for(var n=[],o=0;o<t;o++)n.push(Z[(e>>2)+o]);return n}var Xr=[],ne=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function zr(t){4<t&&--ne[t].nf==0&&(ne[t]=void 0,Xr.push(t))}function pe(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=Xr.length?Xr.pop():ne.length;return ne[e]={nf:1,value:t},e}}function mn(t,e,n){switch(e){case 0:return function(o){return this.fromWireType((n?fe:gt)[o])};case 1:return function(o){return this.fromWireType((n?De:Wt)[o>>1])};case 2:return function(o){return this.fromWireType((n?Z:ee)[o>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function fr(t,e){var n=mt[t];return n===void 0&&xt(e+" has unknown type "+He(t)),n}function qe(t){if(t===null)return"null";var e=typeof t;return e==="object"||e==="array"||e==="function"?t.toString():""+t}function En(t,e){switch(e){case 2:return function(n){return this.fromWireType(lt[n>>2])};case 3:return function(n){return this.fromWireType(Ve[n>>3])};default:throw new TypeError("Unknown float type: "+t)}}function Rn(t,e,n){switch(e){case 0:return n?function(o){return fe[o]}:function(o){return gt[o]};case 1:return n?function(o){return De[o>>1]}:function(o){return Wt[o>>1]};case 2:return n?function(o){return Z[o>>2]}:function(o){return ee[o>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Xt(t){return t||xt("Cannot use deleted val. handle = "+t),ne[t].value}var vn={};function Rr(t){var e=vn[t];return e===void 0?jt(t):e}var dr=[];function wn(){return typeof globalThis=="object"?globalThis:Function("return this")()}function Bn(t){var e=dr.length;return dr.push(t),e}function In(t,e){for(var n=Array(t),o=0;o<t;++o)n[o]=fr(Z[(e>>2)+o],"parameter "+o);return n}var m={},r;T?r=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:typeof dateNow!="undefined"?r=dateNow:r=function(){return performance.now()};function a(t){var e=t.getExtension("ANGLE_instanced_arrays");e&&(t.vertexAttribDivisor=function(n,o){e.vertexAttribDivisorANGLE(n,o)},t.drawArraysInstanced=function(n,o,h,f){e.drawArraysInstancedANGLE(n,o,h,f)},t.drawElementsInstanced=function(n,o,h,f,b){e.drawElementsInstancedANGLE(n,o,h,f,b)})}function u(t){var e=t.getExtension("OES_vertex_array_object");e&&(t.createVertexArray=function(){return e.createVertexArrayOES()},t.deleteVertexArray=function(n){e.deleteVertexArrayOES(n)},t.bindVertexArray=function(n){e.bindVertexArrayOES(n)},t.isVertexArray=function(n){return e.isVertexArrayOES(n)})}function g(t){var e=t.getExtension("WEBGL_draw_buffers");e&&(t.drawBuffers=function(n,o){e.drawBuffersWEBGL(n,o)})}var S=1,w=[],R=[],D=[],H=[],Q=[],et=[],ut=[],W=[],ht=[],ct=[],Mt={},Tt={},ie=4;function kt(t){er||(er=t)}function Ue(t){for(var e=S++,n=t.length;n<e;n++)t[n]=null;return e}function tr(t,e){t.xf||(t.xf=t.getContext,t.getContext=function(o,h){return h=t.xf(o,h),o=="webgl"==h instanceof WebGLRenderingContext?h:null});var n=1<e.majorVersion?t.getContext("webgl2",e):t.getContext("webgl",e);return n?Jr(n,e):0}function Jr(t,e){var n=Ue(W),o={yf:n,attributes:e,version:e.majorVersion,qe:t};return t.canvas&&(t.canvas.qf=o),W[n]=o,(typeof e.Nf=="undefined"||e.Nf)&&Re(o),n}function Br(t){return wt=W[t],y.Fg=x=wt&&wt.qe,!(t&&!x)}function Re(t){if(t||(t=wt),!t.$f){t.$f=!0;var e=t.qe;a(e),u(e),g(e),e.uf=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),e.zf=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=t.version&&(e.vf=e.getExtension("EXT_disjoint_timer_query_webgl2")),(2>t.version||!e.vf)&&(e.vf=e.getExtension("EXT_disjoint_timer_query")),e.Hg=e.getExtension("WEBGL_multi_draw"),(e.getSupportedExtensions()||[]).forEach(function(n){n.includes("lose_context")||n.includes("debug")||e.getExtension(n)})}}var wt,er,rr=[];function Be(t,e,n,o){for(var h=0;h<t;h++){var f=x[n](),b=f&&Ue(o);f?(f.name=b,o[b]=f):kt(1282),Z[e+4*h>>2]=b}}function $r(t,e){if(e){var n=void 0;switch(t){case 36346:n=1;break;case 36344:return;case 34814:case 36345:n=0;break;case 34466:var o=x.getParameter(34467);n=o?o.length:0;break;case 33309:if(2>wt.version){kt(1282);return}n=2*(x.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>wt.version){kt(1280);return}n=t==33307?3:0}if(n===void 0)switch(o=x.getParameter(t),typeof o){case"number":n=o;break;case"boolean":n=o?1:0;break;case"string":kt(1280);return;case"object":if(o===null)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:n=0;break;default:kt(1280);return}else{if(o instanceof Float32Array||o instanceof Uint32Array||o instanceof Int32Array||o instanceof Array){for(t=0;t<o.length;++t)Z[e+4*t>>2]=o[t];return}try{n=o.name|0}catch(h){kt(1280),xe("GL_INVALID_ENUM in glGet0v: Unknown object returned from WebGL getParameter("+t+")! (error: "+h+")");return}}break;default:kt(1280),xe("GL_INVALID_ENUM in glGet0v: Native code calling glGet0v("+t+") and it returns "+o+" of type "+typeof o+"!");return}Z[e>>2]=n}else kt(1281)}function pr(t){var e=$t(t)+1,n=an(e);return qt(t,gt,n,e),n}function Ir(t){return t-=5120,t==0?fe:t==1?gt:t==2?De:t==4?Z:t==6?lt:t==5||t==28922||t==28520||t==30779||t==30782?ee:Wt}function Wr(t,e,n,o,h){t=Ir(t);var f=31-Math.clz32(t.BYTES_PER_ELEMENT),b=ie;return t.subarray(h>>f,h+o*(n*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1)*(1<<f)+b-1&-b)>>f)}function Et(t){var e=x.Kf,n=e.df[t];return 0<=n&&(e.df[t]=n=x.getUniformLocation(e,e.Bf[t]+(0<n?"["+n+"]":""))),n}var gr=[],on=[],Gn={};function Yn(){if(!On){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Zt||"./this.program"},e;for(e in Gn)t[e]=Gn[e];var n=[];for(e in t)n.push(e+"="+t[e]);On=n}return On}var On;function Sn(t){return t%4==0&&(t%100!=0||t%400==0)}function Ln(t,e){for(var n=0,o=0;o<=e;n+=t[o++]);return n}var Cn=[31,29,31,30,31,30,31,31,30,31,30,31],bn=[31,28,31,30,31,30,31,31,30,31,30,31];function Pn(t,e){for(t=new Date(t.getTime());0<e;){var n=t.getMonth(),o=(Sn(t.getFullYear())?Cn:bn)[n];if(e>o-t.getDate())e-=o-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1));else{t.setDate(t.getDate()+e);break}}return t}function oi(t,e,n,o){function h(I,nt,Rt){for(I=typeof I=="number"?I.toString():I||"";I.length<nt;)I=Rt[0]+I;return I}function f(I,nt){return h(I,nt,"0")}function b(I,nt){function Rt(Ot){return 0>Ot?-1:0<Ot?1:0}var Yt;return(Yt=Rt(I.getFullYear()-nt.getFullYear()))===0&&(Yt=Rt(I.getMonth()-nt.getMonth()))===0&&(Yt=Rt(I.getDate()-nt.getDate())),Yt}function _(I){switch(I.getDay()){case 0:return new Date(I.getFullYear()-1,11,29);case 1:return I;case 2:return new Date(I.getFullYear(),0,3);case 3:return new Date(I.getFullYear(),0,2);case 4:return new Date(I.getFullYear(),0,1);case 5:return new Date(I.getFullYear()-1,11,31);case 6:return new Date(I.getFullYear()-1,11,30)}}function F(I){I=Pn(new Date(I.ee+1900,0,1),I.cf);var nt=new Date(I.getFullYear()+1,0,4),Rt=_(new Date(I.getFullYear(),0,4));return nt=_(nt),0>=b(Rt,I)?0>=b(nt,I)?I.getFullYear()+1:I.getFullYear():I.getFullYear()-1}var M=Z[o+40>>2];o={Ag:Z[o>>2],zg:Z[o+4>>2],af:Z[o+8>>2],Re:Z[o+12>>2],Ke:Z[o+16>>2],ee:Z[o+20>>2],bf:Z[o+24>>2],cf:Z[o+28>>2],Lg:Z[o+32>>2],yg:Z[o+36>>2],Bg:M?Fe(M):""},n=Fe(n),M={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Y in M)n=n.replace(new RegExp(Y,"g"),M[Y]);var $="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ft="January February March April May June July August September October November December".split(" ");M={"%a":function(I){return $[I.bf].substring(0,3)},"%A":function(I){return $[I.bf]},"%b":function(I){return ft[I.Ke].substring(0,3)},"%B":function(I){return ft[I.Ke]},"%C":function(I){return f((I.ee+1900)/100|0,2)},"%d":function(I){return f(I.Re,2)},"%e":function(I){return h(I.Re,2," ")},"%g":function(I){return F(I).toString().substring(2)},"%G":function(I){return F(I)},"%H":function(I){return f(I.af,2)},"%I":function(I){return I=I.af,I==0?I=12:12<I&&(I-=12),f(I,2)},"%j":function(I){return f(I.Re+Ln(Sn(I.ee+1900)?Cn:bn,I.Ke-1),3)},"%m":function(I){return f(I.Ke+1,2)},"%M":function(I){return f(I.zg,2)},"%n":function(){return`
`},"%p":function(I){return 0<=I.af&&12>I.af?"AM":"PM"},"%S":function(I){return f(I.Ag,2)},"%t":function(){return"	"},"%u":function(I){return I.bf||7},"%U":function(I){var nt=new Date(I.ee+1900,0,1),Rt=nt.getDay()===0?nt:Pn(nt,7-nt.getDay());return I=new Date(I.ee+1900,I.Ke,I.Re),0>b(Rt,I)?f(Math.ceil((31-Rt.getDate()+(Ln(Sn(I.getFullYear())?Cn:bn,I.getMonth()-1)-31)+I.getDate())/7),2):b(Rt,nt)===0?"01":"00"},"%V":function(I){var nt=new Date(I.ee+1901,0,4),Rt=_(new Date(I.ee+1900,0,4));nt=_(nt);var Yt=Pn(new Date(I.ee+1900,0,1),I.cf);return 0>b(Yt,Rt)?"53":0>=b(nt,Yt)?"01":f(Math.ceil((Rt.getFullYear()<I.ee+1900?I.cf+32-Rt.getDate():I.cf+1-Rt.getDate())/7),2)},"%w":function(I){return I.bf},"%W":function(I){var nt=new Date(I.ee,0,1),Rt=nt.getDay()===1?nt:Pn(nt,nt.getDay()===0?1:7-nt.getDay()+1);return I=new Date(I.ee+1900,I.Ke,I.Re),0>b(Rt,I)?f(Math.ceil((31-Rt.getDate()+(Ln(Sn(I.getFullYear())?Cn:bn,I.getMonth()-1)-31)+I.getDate())/7),2):b(Rt,nt)===0?"01":"00"},"%y":function(I){return(I.ee+1900).toString().substring(2)},"%Y":function(I){return I.ee+1900},"%z":function(I){I=I.yg;var nt=0<=I;return I=Math.abs(I)/60,(nt?"+":"-")+String("0000"+(I/60*100+I%60)).slice(-4)},"%Z":function(I){return I.Bg},"%%":function(){return"%"}};for(Y in M)n.includes(Y)&&(n=n.replace(new RegExp(Y,"g"),M[Y](o)));return Y=hi(n),Y.length>e?0:(fe.set(Y,t),Y.length-1)}fn=y.InternalError=tn("InternalError");for(var Nn=Array(256),_n=0;256>_n;++_n)Nn[_n]=String.fromCharCode(_n);dn=Nn,lr=y.BindingError=tn("BindingError"),Ze.prototype.isAliasOf=function(t){if(!(this instanceof Ze&&t instanceof Ze))return!1;var e=this.Rd.ae.Xd,n=this.Rd.Vd,o=t.Rd.ae.Xd;for(t=t.Rd.Vd;e.me;)n=e.Se(n),e=e.me;for(;o.me;)t=o.Se(t),o=o.me;return e===o&&n===t},Ze.prototype.clone=function(){if(this.Rd.Vd||en(this),this.Rd.Qe)return this.Rd.count.value+=1,this;var t=hr,e=Object,n=e.create,o=Object.getPrototypeOf(this),h=this.Rd;return t=t(n.call(e,o,{Rd:{value:{count:h.count,Ie:h.Ie,Qe:h.Qe,Vd:h.Vd,ae:h.ae,he:h.he,ke:h.ke}}})),t.Rd.count.value+=1,t.Rd.Ie=!1,t},Ze.prototype.delete=function(){this.Rd.Vd||en(this),this.Rd.Ie&&!this.Rd.Qe&&xt("Object already scheduled for deletion"),pn(this),gn(this.Rd),this.Rd.Qe||(this.Rd.he=void 0,this.Rd.Vd=void 0)},Ze.prototype.isDeleted=function(){return!this.Rd.Vd},Ze.prototype.deleteLater=function(){return this.Rd.Vd||en(this),this.Rd.Ie&&!this.Rd.Qe&&xt("Object already scheduled for deletion"),Fr.push(this),Fr.length===1&&Ar&&Ar(rn),this.Rd.Ie=!0,this},ve.prototype.Tf=function(t){return this.Af&&(t=this.Af(t)),t},ve.prototype.tf=function(t){this.oe&&this.oe(t)},ve.prototype.argPackAdvance=8,ve.prototype.readValueFromPointer=st,ve.prototype.deleteObject=function(t){t!==null&&t.delete()},ve.prototype.fromWireType=function(t){function e(){return this.Xe?Kr(this.Xd.Je,{ae:this.gg,Vd:n,ke:this,he:t}):Kr(this.Xd.Je,{ae:this,Vd:t})}var n=this.Tf(t);if(!n)return this.tf(t),null;var o=Fn(this.Xd,n);if(o!==void 0)return o.Rd.count.value===0?(o.Rd.Vd=n,o.Rd.he=t,o.clone()):(o=o.clone(),this.tf(t),o);if(o=this.Xd.Sf(n),o=yn[o],!o)return e.call(this);o=this.We?o.If:o.pointerType;var h=Ur(n,this.Xd,o.Xd);return h===null?e.call(this):this.Xe?Kr(o.Xd.Je,{ae:o,Vd:h,ke:this,he:t}):Kr(o.Xd.Je,{ae:o,Vd:h})},y.getInheritedInstanceCount=function(){return Object.keys(kr).length},y.getLiveInheritedInstances=function(){var t=[],e;for(e in kr)kr.hasOwnProperty(e)&&t.push(kr[e]);return t},y.flushPendingDeletes=rn,y.setDelayFunction=function(t){Ar=t,Fr.length&&Ar&&Ar(rn)},sn=y.UnboundTypeError=tn("UnboundTypeError"),y.count_emval_handles=function(){for(var t=0,e=5;e<ne.length;++e)ne[e]!==void 0&&++t;return t},y.get_first_emval=function(){for(var t=5;t<ne.length;++t)if(ne[t]!==void 0)return ne[t];return null};for(var x,Pe=0;32>Pe;++Pe)rr.push(Array(Pe));var ai=new Float32Array(288);for(Pe=0;288>Pe;++Pe)gr[Pe]=ai.subarray(0,Pe+1);var li=new Int32Array(288);for(Pe=0;288>Pe;++Pe)on[Pe]=li.subarray(0,Pe+1);function hi(t){var e=Array($t(t)+1);return qt(t,e,0,e.length),e}var ci={S:function(t){return an(t+16)+16},N:function(t,e,n){throw new Je(t).Zf(e,n),Mr++,t},O:function(){return 0},zb:function(){},Bb:function(){return 0},yb:function(t,e,n,o,h,f){return f<<=12,(o&16)!=0&&t%65536!=0?e=-28:(o&32)!=0?(t=$n(65536,e))?(Xn(t,0,e),X[t]={eg:t,dg:e,Hf:!0,fd:h,Jg:n,flags:o,offset:f},e=t):e=-48:e=-52,e},xb:function(t,e){if((t|0)==-1||e===0)t=-28;else{var n=X[t];n&&e===n.dg&&(X[t]=null,n.Hf&&Ke(n.eg)),t=0}return t},Q:function(){},M:function(){},x:function(t){var e=z[t];delete z[t];var n=e.mf,o=e.oe,h=e.wf,f=h.map(function(b){return b.Xf}).concat(h.map(function(b){return b.qg}));be([t],f,function(b){var _={};return h.forEach(function(F,M){var Y=b[M],$=F.Vf,ft=F.Wf,I=b[M+h.length],nt=F.pg,Rt=F.rg;_[F.Of]={read:function(Yt){return Y.fromWireType($(ft,Yt))},write:function(Yt,Ot){var ge=[];nt(Rt,Yt,I.toWireType(ge,Ot)),rt(ge)}}}),[{name:e.name,fromWireType:function(F){var M={},Y;for(Y in _)M[Y]=_[Y].read(F);return o(F),M},toWireType:function(F,M){for(var Y in _)if(!(Y in M))throw new TypeError('Missing field:  "'+Y+'"');var $=n();for(Y in _)_[Y].write($,M[Y]);return F!==null&&F.push(o,$),$},argPackAdvance:8,readValueFromPointer:st,je:o}]})},qb:function(){},Eb:function(t,e,n,o,h){var f=Hr(n);e=jt(e),Me(t,{name:e,fromWireType:function(b){return!!b},toWireType:function(b,_){return _?o:h},argPackAdvance:8,readValueFromPointer:function(b){if(n===1)var _=fe;else if(n===2)_=De;else if(n===4)_=Z;else throw new TypeError("Unknown boolean type size: "+e);return this.fromWireType(_[b>>f])},je:null})},l:function(t,e,n,o,h,f,b,_,F,M,Y,$,ft){Y=jt(Y),f=Qt(h,f),_&&(_=Qt(b,_)),M&&(M=Qt(F,M)),ft=Qt($,ft);var I=Ee(Y);Qe(I,function(){ur("Cannot construct "+Y+" due to unbound types",[o])}),be([t,e,n],o?[o]:[],function(nt){if(nt=nt[0],o)var Rt=nt.Xd,Yt=Rt.Je;else Yt=Ze.prototype;nt=ar(I,function(){if(Object.getPrototypeOf(this)!==Ot)throw new lr("Use 'new' to construct "+Y);if(ge.se===void 0)throw new lr(Y+" has no accessible constructor");var hn=ge.se[arguments.length];if(hn===void 0)throw new lr("Tried to invoke ctor of "+Y+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(ge.se).toString()+") parameters instead!");return hn.apply(this,arguments)});var Ot=Object.create(Yt,{constructor:{value:nt}});nt.prototype=Ot;var ge=new re(Y,nt,Ot,ft,Rt,f,_,M);Rt=new ve(Y,ge,!0,!1,!1),Yt=new ve(Y+"*",ge,!1,!1,!1);var ln=new ve(Y+" const*",ge,!1,!0,!1);return yn[t]={pointerType:Yt,If:ln},Er(I,nt),[Rt,Yt,ln]})},f:function(t,e,n,o,h,f,b){var _=Nr(n,o);e=jt(e),f=Qt(h,f),be([],[t],function(F){function M(){ur("Cannot call "+Y+" due to unbound types",_)}F=F[0];var Y=F.name+"."+e,$=F.Xd.constructor;return $[e]===void 0?(M.Ge=n-1,$[e]=M):(We($,e,Y),$[e].ce[n-1]=M),be([],_,function(ft){return ft=[ft[0],null].concat(ft.slice(1)),ft=Yr(Y,ft,null,f,b),$[e].ce===void 0?(ft.Ge=n-1,$[e]=ft):$[e].ce[n-1]=ft,[]}),[]})},w:function(t,e,n,o,h,f){ir(0<e);var b=Nr(e,n);h=Qt(o,h);var _=[f],F=[];be([],[t],function(M){M=M[0];var Y="constructor "+M.name;if(M.Xd.se===void 0&&(M.Xd.se=[]),M.Xd.se[e-1]!==void 0)throw new lr("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+M.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return M.Xd.se[e-1]=function(){ur("Cannot construct "+M.name+" due to unbound types",b)},be([],b,function($){return M.Xd.se[e-1]=function(){arguments.length!==e-1&&xt(Y+" called with "+arguments.length+" arguments, expected "+(e-1)),F.length=0,_.length=e;for(var ft=1;ft<e;++ft)_[ft]=$[ft].toWireType(F,arguments[ft-1]);return ft=h.apply(null,_),rt(F),$[0].fromWireType(ft)},[]}),[]})},c:function(t,e,n,o,h,f,b,_){var F=Nr(n,o);e=jt(e),f=Qt(h,f),be([],[t],function(M){function Y(){ur("Cannot call "+$+" due to unbound types",F)}M=M[0];var $=M.name+"."+e;_&&M.Xd.hg.push(e);var ft=M.Xd.Je,I=ft[e];return I===void 0||I.ce===void 0&&I.className!==M.name&&I.Ge===n-2?(Y.Ge=n-2,Y.className=M.name,ft[e]=Y):(We(ft,e,$),ft[e].ce[n-2]=Y),be([],F,function(nt){return nt=Yr($,nt,M,f,b),ft[e].ce===void 0?(nt.Ge=n-2,ft[e]=nt):ft[e].ce[n-2]=nt,[]}),[]})},X:function(t,e,n){t=jt(t),be([],[e],function(o){return o=o[0],y[t]=o.fromWireType(n),[]})},Db:function(t,e){e=jt(e),Me(t,{name:e,fromWireType:function(n){var o=ne[n].value;return zr(n),o},toWireType:function(n,o){return pe(o)},argPackAdvance:8,readValueFromPointer:st,je:null})},k:function(t,e,n,o){function h(){}n=Hr(n),e=jt(e),h.values={},Me(t,{name:e,constructor:h,fromWireType:function(f){return this.constructor.values[f]},toWireType:function(f,b){return b.value},argPackAdvance:8,readValueFromPointer:mn(e,n,o),je:null}),Qe(e,h)},j:function(t,e,n){var o=fr(t,"enum");e=jt(e),t=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:ar(o.name+"_"+e,function(){})}}),t.values[n]=o,t[e]=o},R:function(t,e,n){n=Hr(n),e=jt(e),Me(t,{name:e,fromWireType:function(o){return o},toWireType:function(o,h){if(typeof h!="number"&&typeof h!="boolean")throw new TypeError('Cannot convert "'+qe(h)+'" to '+this.name);return h},argPackAdvance:8,readValueFromPointer:En(e,n),je:null})},q:function(t,e,n,o,h,f){var b=Nr(e,n);t=jt(t),h=Qt(o,h),Qe(t,function(){ur("Cannot call "+t+" due to unbound types",b)},e-1),be([],b,function(_){return _=[_[0],null].concat(_.slice(1)),Er(t,Yr(t,_,null,h,f),e-1),[]})},z:function(t,e,n,o,h){function f(M){return M}e=jt(e),h===-1&&(h=4294967295);var b=Hr(n);if(o===0){var _=32-8*n;f=function(M){return M<<_>>>_}}var F=e.includes("unsigned");Me(t,{name:e,fromWireType:f,toWireType:function(M,Y){if(typeof Y!="number"&&typeof Y!="boolean")throw new TypeError('Cannot convert "'+qe(Y)+'" to '+this.name);if(Y<o||Y>h)throw new TypeError('Passing a number "'+qe(Y)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+o+", "+h+"]!");return F?Y>>>0:Y|0},argPackAdvance:8,readValueFromPointer:Rn(e,b,o!==0),je:null})},v:function(t,e,n){function o(f){f>>=2;var b=ee;return new h(ke,b[f+1],b[f])}var h=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];n=jt(n),Me(t,{name:n,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{Yf:!0})},o:function(t,e,n,o,h,f,b,_,F,M,Y,$){n=jt(n),f=Qt(h,f),_=Qt(b,_),M=Qt(F,M),$=Qt(Y,$),be([t],[e],function(ft){return ft=ft[0],[new ve(n,ft.Xd,!1,!1,!0,ft,o,f,_,M,$)]})},T:function(t,e){e=jt(e);var n=e==="std::string";Me(t,{name:e,fromWireType:function(o){var h=ee[o>>2];if(n)for(var f=o+4,b=0;b<=h;++b){var _=o+4+b;if(b==h||gt[_]==0){if(f=Fe(f,_-f),F===void 0)var F=f;else F+=String.fromCharCode(0),F+=f;f=_+1}}else{for(F=Array(h),b=0;b<h;++b)F[b]=String.fromCharCode(gt[o+4+b]);F=F.join("")}return Ke(o),F},toWireType:function(o,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var f=typeof h=="string";f||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||xt("Cannot pass non-string to std::string");var b=(n&&f?function(){return $t(h)}:function(){return h.length})(),_=an(4+b+1);if(ee[_>>2]=b,n&&f)qt(h,gt,_+4,b+1);else if(f)for(f=0;f<b;++f){var F=h.charCodeAt(f);255<F&&(Ke(_),xt("String has UTF-16 code units that do not fit in 8 bits")),gt[_+4+f]=F}else for(f=0;f<b;++f)gt[_+4+f]=h[f];return o!==null&&o.push(Ke,_),_},argPackAdvance:8,readValueFromPointer:st,je:function(o){Ke(o)}})},H:function(t,e,n){if(n=jt(n),e===2)var o=Ye,h=br,f=sr,b=function(){return Wt},_=1;else e===4&&(o=Qr,h=Pr,f=qr,b=function(){return ee},_=2);Me(t,{name:n,fromWireType:function(F){for(var M=ee[F>>2],Y=b(),$,ft=F+4,I=0;I<=M;++I){var nt=F+4+I*e;(I==M||Y[nt>>_]==0)&&(ft=o(ft,nt-ft),$===void 0?$=ft:($+=String.fromCharCode(0),$+=ft),ft=nt+e)}return Ke(F),$},toWireType:function(F,M){typeof M!="string"&&xt("Cannot pass non-string to C++ string type "+n);var Y=f(M),$=an(4+Y+e);return ee[$>>2]=Y>>_,h(M,$+4,Y+e),F!==null&&F.push(Ke,$),$},argPackAdvance:8,readValueFromPointer:st,je:function(F){Ke(F)}})},y:function(t,e,n,o,h,f){z[t]={name:jt(e),mf:Qt(n,o),oe:Qt(h,f),wf:[]}},h:function(t,e,n,o,h,f,b,_,F,M){z[t].wf.push({Of:jt(e),Xf:n,Vf:Qt(o,h),Wf:f,qg:b,pg:Qt(_,F),rg:M})},Fb:function(t,e){e=jt(e),Me(t,{ag:!0,name:e,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},B:function(t,e,n){t=Xt(t),e=fr(e,"emval::as");var o=[],h=pe(o);return Z[n>>2]=h,e.toWireType(o,t)},F:function(t,e,n,o,h){t=dr[t],e=Xt(e),n=Rr(n);var f=[];return Z[o>>2]=pe(f),t(e,n,f,h)},C:function(t,e,n,o){t=dr[t],e=Xt(e),n=Rr(n),t(e,n,null,o)},E:zr,pb:function(t){return t===0?pe(wn()):(t=Rr(t),pe(wn()[t]))},A:function(t,e){e=In(t,e);for(var n=e[0],o=n.name+"_$"+e.slice(1).map(function(M){return M.name}).join("_")+"$",h=["retType"],f=[n],b="",_=0;_<t-1;++_)b+=(_!==0?", ":"")+"arg"+_,h.push("argType"+_),f.push(e[1+_]);o="return function "+Ee("methodCaller_"+o)+`(handle, name, destructors, args) {
`;var F=0;for(_=0;_<t-1;++_)o+="    var arg"+_+" = argType"+_+".readValueFromPointer(args"+(F?"+"+F:"")+`);
`,F+=e[_+1].argPackAdvance;for(o+="    var rv = handle[name]("+b+`);
`,_=0;_<t-1;++_)e[_+1].deleteObject&&(o+="    argType"+_+".deleteObject(arg"+_+`);
`);return n.ag||(o+=`    return retType.toWireType(destructors, rv);
`),h.push(o+`};
`),t=Gr(h).apply(null,f),Bn(t)},K:function(t,e){return t=Xt(t),e=Xt(e),pe(t[e])},L:function(t){4<t&&(ne[t].nf+=1)},mb:function(t,e,n,o){t=Xt(t);var h=m[e];if(!h){h="";for(var f=0;f<e;++f)h+=(f!==0?", ":"")+"arg"+f;var b="return function emval_allocator_"+e+`(constructor, argTypes, args) {
`;for(f=0;f<e;++f)b+="var argType"+f+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+f+'], "parameter '+f+`");
var arg`+f+" = argType"+f+`.readValueFromPointer(args);
args += argType`+f+`['argPackAdvance'];
`;h=new Function("requireRegisteredType","Module","__emval_register",b+("var obj = new constructor("+h+`);
return __emval_register(obj);
}
`))(fr,y,pe),m[e]=h}return h(t,n,o)},ib:function(){return pe([])},Ca:function(t){return pe(Rr(t))},jb:function(){return pe({})},hb:function(t){return t=Xt(t),!t},lb:function(t){rt(ne[t].value),zr(t)},u:function(t,e,n){t=Xt(t),e=Xt(e),n=Xt(n),t[e]=n},t:function(t,e){return t=fr(t,"_emval_take_value"),t=t.readValueFromPointer(e),pe(t)},d:function(){de()},sb:function(t,e){if(t===0)t=Date.now();else if(t===1||t===4)t=r();else return Z[zn()>>2]=28,-1;return Z[e>>2]=t/1e3|0,Z[e+4>>2]=t%1e3*1e6|0,0},Zc:function(t){x.activeTexture(t)},_c:function(t,e){x.attachShader(R[t],et[e])},$c:function(t,e,n){x.bindAttribLocation(R[t],e,Fe(n))},ad:function(t,e){t==35051?x.kf=e:t==35052&&(x.He=e),x.bindBuffer(t,w[e])},ac:function(t,e){x.bindFramebuffer(t,D[e])},bc:function(t,e){x.bindRenderbuffer(t,H[e])},Ob:function(t,e){x.bindSampler(t,ht[e])},bd:function(t,e){x.bindTexture(t,Q[e])},vc:function(t){x.bindVertexArray(ut[t])},yc:function(t){x.bindVertexArray(ut[t])},cd:function(t,e,n,o){x.blendColor(t,e,n,o)},dd:function(t){x.blendEquation(t)},ed:function(t,e){x.blendFunc(t,e)},Vb:function(t,e,n,o,h,f,b,_,F,M){x.blitFramebuffer(t,e,n,o,h,f,b,_,F,M)},Z:function(t,e,n,o){2<=wt.version?n?x.bufferData(t,gt,o,n,e):x.bufferData(t,e,o):x.bufferData(t,n?gt.subarray(n,n+e):e,o)},_:function(t,e,n,o){2<=wt.version?x.bufferSubData(t,e,gt,o,n):x.bufferSubData(t,e,gt.subarray(o,o+n))},cc:function(t){return x.checkFramebufferStatus(t)},$:function(t){x.clear(t)},aa:function(t,e,n,o){x.clearColor(t,e,n,o)},ba:function(t){x.clearStencil(t)},eb:function(t,e,n,o){return x.clientWaitSync(ct[t],e,(n>>>0)+4294967296*o)},ca:function(t,e,n,o){x.colorMask(!!t,!!e,!!n,!!o)},da:function(t){x.compileShader(et[t])},ea:function(t,e,n,o,h,f,b,_){2<=wt.version?x.He?x.compressedTexImage2D(t,e,n,o,h,f,b,_):x.compressedTexImage2D(t,e,n,o,h,f,gt,_,b):x.compressedTexImage2D(t,e,n,o,h,f,_?gt.subarray(_,_+b):null)},fa:function(t,e,n,o,h,f,b,_,F){2<=wt.version?x.He?x.compressedTexSubImage2D(t,e,n,o,h,f,b,_,F):x.compressedTexSubImage2D(t,e,n,o,h,f,b,gt,F,_):x.compressedTexSubImage2D(t,e,n,o,h,f,b,F?gt.subarray(F,F+_):null)},ga:function(t,e,n,o,h,f,b,_){x.copyTexSubImage2D(t,e,n,o,h,f,b,_)},ia:function(){var t=Ue(R),e=x.createProgram();return e.name=t,e.$e=e.Ye=e.Ze=0,e.pf=1,R[t]=e,t},ja:function(t){var e=Ue(et);return et[e]=x.createShader(t),e},ka:function(t){x.cullFace(t)},la:function(t,e){for(var n=0;n<t;n++){var o=Z[e+4*n>>2],h=w[o];h&&(x.deleteBuffer(h),h.name=0,w[o]=null,o==x.kf&&(x.kf=0),o==x.He&&(x.He=0))}},dc:function(t,e){for(var n=0;n<t;++n){var o=Z[e+4*n>>2],h=D[o];h&&(x.deleteFramebuffer(h),h.name=0,D[o]=null)}},ma:function(t){if(t){var e=R[t];e?(x.deleteProgram(e),e.name=0,R[t]=null):kt(1281)}},ec:function(t,e){for(var n=0;n<t;n++){var o=Z[e+4*n>>2],h=H[o];h&&(x.deleteRenderbuffer(h),h.name=0,H[o]=null)}},Pb:function(t,e){for(var n=0;n<t;n++){var o=Z[e+4*n>>2],h=ht[o];h&&(x.deleteSampler(h),h.name=0,ht[o]=null)}},na:function(t){if(t){var e=et[t];e?(x.deleteShader(e),et[t]=null):kt(1281)}},Xb:function(t){if(t){var e=ct[t];e?(x.deleteSync(e),e.name=0,ct[t]=null):kt(1281)}},oa:function(t,e){for(var n=0;n<t;n++){var o=Z[e+4*n>>2],h=Q[o];h&&(x.deleteTexture(h),h.name=0,Q[o]=null)}},wc:function(t,e){for(var n=0;n<t;n++){var o=Z[e+4*n>>2];x.deleteVertexArray(ut[o]),ut[o]=null}},zc:function(t,e){for(var n=0;n<t;n++){var o=Z[e+4*n>>2];x.deleteVertexArray(ut[o]),ut[o]=null}},pa:function(t){x.depthMask(!!t)},qa:function(t){x.disable(t)},ra:function(t){x.disableVertexAttribArray(t)},sa:function(t,e,n){x.drawArrays(t,e,n)},tc:function(t,e,n,o){x.drawArraysInstanced(t,e,n,o)},rc:function(t,e,n,o,h){x.uf.drawArraysInstancedBaseInstanceWEBGL(t,e,n,o,h)},pc:function(t,e){for(var n=rr[t],o=0;o<t;o++)n[o]=Z[e+4*o>>2];x.drawBuffers(n)},ta:function(t,e,n,o){x.drawElements(t,e,n,o)},uc:function(t,e,n,o,h){x.drawElementsInstanced(t,e,n,o,h)},sc:function(t,e,n,o,h,f,b){x.uf.drawElementsInstancedBaseVertexBaseInstanceWEBGL(t,e,n,o,h,f,b)},jc:function(t,e,n,o,h,f){x.drawElements(t,o,h,f)},ua:function(t){x.enable(t)},va:function(t){x.enableVertexAttribArray(t)},Tb:function(t,e){return(t=x.fenceSync(t,e))?(e=Ue(ct),t.name=e,ct[e]=t,e):0},wa:function(){x.finish()},xa:function(){x.flush()},fc:function(t,e,n,o){x.framebufferRenderbuffer(t,e,n,H[o])},gc:function(t,e,n,o,h){x.framebufferTexture2D(t,e,n,Q[o],h)},ya:function(t){x.frontFace(t)},za:function(t,e){Be(t,e,"createBuffer",w)},hc:function(t,e){Be(t,e,"createFramebuffer",D)},ic:function(t,e){Be(t,e,"createRenderbuffer",H)},Qb:function(t,e){Be(t,e,"createSampler",ht)},Aa:function(t,e){Be(t,e,"createTexture",Q)},xc:function(t,e){Be(t,e,"createVertexArray",ut)},Ac:function(t,e){Be(t,e,"createVertexArray",ut)},Yb:function(t){x.generateMipmap(t)},Ba:function(t,e,n){n?Z[n>>2]=x.getBufferParameter(t,e):kt(1281)},Da:function(){var t=x.getError()||er;return er=0,t},Zb:function(t,e,n,o){t=x.getFramebufferAttachmentParameter(t,e,n),(t instanceof WebGLRenderbuffer||t instanceof WebGLTexture)&&(t=t.name|0),Z[o>>2]=t},cb:function(t,e){$r(t,e)},Ea:function(t,e,n,o){t=x.getProgramInfoLog(R[t]),t===null&&(t="(unknown error)"),e=0<e&&o?qt(t,gt,o,e):0,n&&(Z[n>>2]=e)},Fa:function(t,e,n){if(n)if(t>=S)kt(1281);else if(t=R[t],e==35716)t=x.getProgramInfoLog(t),t===null&&(t="(unknown error)"),Z[n>>2]=t.length+1;else if(e==35719){if(!t.$e)for(e=0;e<x.getProgramParameter(t,35718);++e)t.$e=Math.max(t.$e,x.getActiveUniform(t,e).name.length+1);Z[n>>2]=t.$e}else if(e==35722){if(!t.Ye)for(e=0;e<x.getProgramParameter(t,35721);++e)t.Ye=Math.max(t.Ye,x.getActiveAttrib(t,e).name.length+1);Z[n>>2]=t.Ye}else if(e==35381){if(!t.Ze)for(e=0;e<x.getProgramParameter(t,35382);++e)t.Ze=Math.max(t.Ze,x.getActiveUniformBlockName(t,e).length+1);Z[n>>2]=t.Ze}else Z[n>>2]=x.getProgramParameter(t,e);else kt(1281)},_b:function(t,e,n){n?Z[n>>2]=x.getRenderbufferParameter(t,e):kt(1281)},Ga:function(t,e,n,o){t=x.getShaderInfoLog(et[t]),t===null&&(t="(unknown error)"),e=0<e&&o?qt(t,gt,o,e):0,n&&(Z[n>>2]=e)},Lb:function(t,e,n,o){t=x.getShaderPrecisionFormat(t,e),Z[n>>2]=t.rangeMin,Z[n+4>>2]=t.rangeMax,Z[o>>2]=t.precision},Ha:function(t,e,n){n?e==35716?(t=x.getShaderInfoLog(et[t]),t===null&&(t="(unknown error)"),Z[n>>2]=t?t.length+1:0):e==35720?(t=x.getShaderSource(et[t]),Z[n>>2]=t?t.length+1:0):Z[n>>2]=x.getShaderParameter(et[t],e):kt(1281)},J:function(t){var e=Mt[t];if(!e){switch(t){case 7939:e=x.getSupportedExtensions()||[],e=e.concat(e.map(function(o){return"GL_"+o})),e=pr(e.join(" "));break;case 7936:case 7937:case 37445:case 37446:(e=x.getParameter(t))||kt(1280),e=e&&pr(e);break;case 7938:e=x.getParameter(7938),e=2<=wt.version?"OpenGL ES 3.0 ("+e+")":"OpenGL ES 2.0 ("+e+")",e=pr(e);break;case 35724:e=x.getParameter(35724);var n=e.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);n!==null&&(n[1].length==3&&(n[1]+="0"),e="OpenGL ES GLSL ES "+n[1]+" ("+e+")"),e=pr(e);break;default:kt(1280)}Mt[t]=e}return e},db:function(t,e){if(2>wt.version)return kt(1282),0;var n=Tt[t];if(n)return 0>e||e>=n.length?(kt(1281),0):n[e];switch(t){case 7939:return n=x.getSupportedExtensions()||[],n=n.concat(n.map(function(o){return"GL_"+o})),n=n.map(function(o){return pr(o)}),n=Tt[t]=n,0>e||e>=n.length?(kt(1281),0):n[e];default:return kt(1280),0}},Ia:function(t,e){function n(I){return I.slice(-1)=="]"&&I.lastIndexOf("[")}e=Fe(e),t=R[t];var o=t.df,h=t.Cg,f,b=0,_=e,F=n(e);if(!o)for(t.df=o={},t.Bf={},f=0;f<x.getProgramParameter(t,35718);++f){var M=x.getActiveUniform(t,f),Y=M.name;M=M.size;var $=n(Y);$=0<$?Y.slice(0,$):Y;var ft=t.pf;for(t.pf+=M,h[$]=[M,ft],Y=0;Y<M;++Y)o[ft]=Y,t.Bf[ft++]=$}return 0<F&&(b=parseInt(e.slice(F+1))>>>0,_=e.slice(0,F)),(h=h[_])&&b<h[0]&&(b+=h[1],o[b]=o[b]||x.getUniformLocation(t,e))?b:-1},Mb:function(t,e,n){for(var o=rr[e],h=0;h<e;h++)o[h]=Z[n+4*h>>2];x.invalidateFramebuffer(t,o)},Nb:function(t,e,n,o,h,f,b){for(var _=rr[e],F=0;F<e;F++)_[F]=Z[n+4*F>>2];x.invalidateSubFramebuffer(t,_,o,h,f,b)},Ub:function(t){return x.isSync(ct[t])},Ja:function(t){return(t=Q[t])?x.isTexture(t):0},Ka:function(t){x.lineWidth(t)},La:function(t){t=R[t],x.linkProgram(t),t.df=0,t.Cg={}},nc:function(t,e,n,o,h,f){x.zf.multiDrawArraysInstancedBaseInstanceWEBGL(t,Z,e>>2,Z,n>>2,Z,o>>2,ee,h>>2,f)},oc:function(t,e,n,o,h,f,b,_){x.zf.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(t,Z,e>>2,n,Z,o>>2,Z,h>>2,Z,f>>2,ee,b>>2,_)},Ma:function(t,e){t==3317&&(ie=e),x.pixelStorei(t,e)},qc:function(t){x.readBuffer(t)},Na:function(t,e,n,o,h,f,b){if(2<=wt.version)if(x.kf)x.readPixels(t,e,n,o,h,f,b);else{var _=Ir(f);x.readPixels(t,e,n,o,h,f,_,b>>31-Math.clz32(_.BYTES_PER_ELEMENT))}else(b=Wr(f,h,n,o,b))?x.readPixels(t,e,n,o,h,f,b):kt(1280)},$b:function(t,e,n,o){x.renderbufferStorage(t,e,n,o)},Wb:function(t,e,n,o,h){x.renderbufferStorageMultisample(t,e,n,o,h)},Rb:function(t,e,n){x.samplerParameteri(ht[t],e,n)},Sb:function(t,e,n){x.samplerParameteri(ht[t],e,Z[n>>2])},Oa:function(t,e,n,o){x.scissor(t,e,n,o)},Pa:function(t,e,n,o){for(var h="",f=0;f<e;++f){var b=o?Z[o+4*f>>2]:-1;h+=Fe(Z[n+4*f>>2],0>b?void 0:b)}x.shaderSource(et[t],h)},Qa:function(t,e,n){x.stencilFunc(t,e,n)},Ra:function(t,e,n,o){x.stencilFuncSeparate(t,e,n,o)},Sa:function(t){x.stencilMask(t)},Ta:function(t,e){x.stencilMaskSeparate(t,e)},Ua:function(t,e,n){x.stencilOp(t,e,n)},Va:function(t,e,n,o){x.stencilOpSeparate(t,e,n,o)},Wa:function(t,e,n,o,h,f,b,_,F){if(2<=wt.version)if(x.He)x.texImage2D(t,e,n,o,h,f,b,_,F);else if(F){var M=Ir(_);x.texImage2D(t,e,n,o,h,f,b,_,M,F>>31-Math.clz32(M.BYTES_PER_ELEMENT))}else x.texImage2D(t,e,n,o,h,f,b,_,null);else x.texImage2D(t,e,n,o,h,f,b,_,F?Wr(_,b,o,h,F):null)},Xa:function(t,e,n){x.texParameterf(t,e,n)},Ya:function(t,e,n){x.texParameterf(t,e,lt[n>>2])},Za:function(t,e,n){x.texParameteri(t,e,n)},_a:function(t,e,n){x.texParameteri(t,e,Z[n>>2])},kc:function(t,e,n,o,h){x.texStorage2D(t,e,n,o,h)},$a:function(t,e,n,o,h,f,b,_,F){if(2<=wt.version)if(x.He)x.texSubImage2D(t,e,n,o,h,f,b,_,F);else if(F){var M=Ir(_);x.texSubImage2D(t,e,n,o,h,f,b,_,M,F>>31-Math.clz32(M.BYTES_PER_ELEMENT))}else x.texSubImage2D(t,e,n,o,h,f,b,_,null);else M=null,F&&(M=Wr(_,b,h,f,F)),x.texSubImage2D(t,e,n,o,h,f,b,_,M)},ab:function(t,e){x.uniform1f(Et(t),e)},bb:function(t,e,n){if(2<=wt.version)x.uniform1fv(Et(t),lt,n>>2,e);else{if(288>=e)for(var o=gr[e-1],h=0;h<e;++h)o[h]=lt[n+4*h>>2];else o=lt.subarray(n>>2,n+4*e>>2);x.uniform1fv(Et(t),o)}},Vc:function(t,e){x.uniform1i(Et(t),e)},Wc:function(t,e,n){if(2<=wt.version)x.uniform1iv(Et(t),Z,n>>2,e);else{if(288>=e)for(var o=on[e-1],h=0;h<e;++h)o[h]=Z[n+4*h>>2];else o=Z.subarray(n>>2,n+4*e>>2);x.uniform1iv(Et(t),o)}},Xc:function(t,e,n){x.uniform2f(Et(t),e,n)},Yc:function(t,e,n){if(2<=wt.version)x.uniform2fv(Et(t),lt,n>>2,2*e);else{if(144>=e)for(var o=gr[2*e-1],h=0;h<2*e;h+=2)o[h]=lt[n+4*h>>2],o[h+1]=lt[n+(4*h+4)>>2];else o=lt.subarray(n>>2,n+8*e>>2);x.uniform2fv(Et(t),o)}},Uc:function(t,e,n){x.uniform2i(Et(t),e,n)},Tc:function(t,e,n){if(2<=wt.version)x.uniform2iv(Et(t),Z,n>>2,2*e);else{if(144>=e)for(var o=on[2*e-1],h=0;h<2*e;h+=2)o[h]=Z[n+4*h>>2],o[h+1]=Z[n+(4*h+4)>>2];else o=Z.subarray(n>>2,n+8*e>>2);x.uniform2iv(Et(t),o)}},Sc:function(t,e,n,o){x.uniform3f(Et(t),e,n,o)},Rc:function(t,e,n){if(2<=wt.version)x.uniform3fv(Et(t),lt,n>>2,3*e);else{if(96>=e)for(var o=gr[3*e-1],h=0;h<3*e;h+=3)o[h]=lt[n+4*h>>2],o[h+1]=lt[n+(4*h+4)>>2],o[h+2]=lt[n+(4*h+8)>>2];else o=lt.subarray(n>>2,n+12*e>>2);x.uniform3fv(Et(t),o)}},Qc:function(t,e,n,o){x.uniform3i(Et(t),e,n,o)},Pc:function(t,e,n){if(2<=wt.version)x.uniform3iv(Et(t),Z,n>>2,3*e);else{if(96>=e)for(var o=on[3*e-1],h=0;h<3*e;h+=3)o[h]=Z[n+4*h>>2],o[h+1]=Z[n+(4*h+4)>>2],o[h+2]=Z[n+(4*h+8)>>2];else o=Z.subarray(n>>2,n+12*e>>2);x.uniform3iv(Et(t),o)}},Oc:function(t,e,n,o,h){x.uniform4f(Et(t),e,n,o,h)},Nc:function(t,e,n){if(2<=wt.version)x.uniform4fv(Et(t),lt,n>>2,4*e);else{if(72>=e){var o=gr[4*e-1],h=lt;n>>=2;for(var f=0;f<4*e;f+=4){var b=n+f;o[f]=h[b],o[f+1]=h[b+1],o[f+2]=h[b+2],o[f+3]=h[b+3]}}else o=lt.subarray(n>>2,n+16*e>>2);x.uniform4fv(Et(t),o)}},Bc:function(t,e,n,o,h){x.uniform4i(Et(t),e,n,o,h)},Cc:function(t,e,n){if(2<=wt.version)x.uniform4iv(Et(t),Z,n>>2,4*e);else{if(72>=e)for(var o=on[4*e-1],h=0;h<4*e;h+=4)o[h]=Z[n+4*h>>2],o[h+1]=Z[n+(4*h+4)>>2],o[h+2]=Z[n+(4*h+8)>>2],o[h+3]=Z[n+(4*h+12)>>2];else o=Z.subarray(n>>2,n+16*e>>2);x.uniform4iv(Et(t),o)}},Dc:function(t,e,n,o){if(2<=wt.version)x.uniformMatrix2fv(Et(t),!!n,lt,o>>2,4*e);else{if(72>=e)for(var h=gr[4*e-1],f=0;f<4*e;f+=4)h[f]=lt[o+4*f>>2],h[f+1]=lt[o+(4*f+4)>>2],h[f+2]=lt[o+(4*f+8)>>2],h[f+3]=lt[o+(4*f+12)>>2];else h=lt.subarray(o>>2,o+16*e>>2);x.uniformMatrix2fv(Et(t),!!n,h)}},Ec:function(t,e,n,o){if(2<=wt.version)x.uniformMatrix3fv(Et(t),!!n,lt,o>>2,9*e);else{if(32>=e)for(var h=gr[9*e-1],f=0;f<9*e;f+=9)h[f]=lt[o+4*f>>2],h[f+1]=lt[o+(4*f+4)>>2],h[f+2]=lt[o+(4*f+8)>>2],h[f+3]=lt[o+(4*f+12)>>2],h[f+4]=lt[o+(4*f+16)>>2],h[f+5]=lt[o+(4*f+20)>>2],h[f+6]=lt[o+(4*f+24)>>2],h[f+7]=lt[o+(4*f+28)>>2],h[f+8]=lt[o+(4*f+32)>>2];else h=lt.subarray(o>>2,o+36*e>>2);x.uniformMatrix3fv(Et(t),!!n,h)}},Fc:function(t,e,n,o){if(2<=wt.version)x.uniformMatrix4fv(Et(t),!!n,lt,o>>2,16*e);else{if(18>=e){var h=gr[16*e-1],f=lt;o>>=2;for(var b=0;b<16*e;b+=16){var _=o+b;h[b]=f[_],h[b+1]=f[_+1],h[b+2]=f[_+2],h[b+3]=f[_+3],h[b+4]=f[_+4],h[b+5]=f[_+5],h[b+6]=f[_+6],h[b+7]=f[_+7],h[b+8]=f[_+8],h[b+9]=f[_+9],h[b+10]=f[_+10],h[b+11]=f[_+11],h[b+12]=f[_+12],h[b+13]=f[_+13],h[b+14]=f[_+14],h[b+15]=f[_+15]}}else h=lt.subarray(o>>2,o+64*e>>2);x.uniformMatrix4fv(Et(t),!!n,h)}},Gc:function(t){t=R[t],x.useProgram(t),x.Kf=t},Hc:function(t,e){x.vertexAttrib1f(t,e)},Ic:function(t,e){x.vertexAttrib2f(t,lt[e>>2],lt[e+4>>2])},Jc:function(t,e){x.vertexAttrib3f(t,lt[e>>2],lt[e+4>>2],lt[e+8>>2])},Kc:function(t,e){x.vertexAttrib4f(t,lt[e>>2],lt[e+4>>2],lt[e+8>>2],lt[e+12>>2])},lc:function(t,e){x.vertexAttribDivisor(t,e)},mc:function(t,e,n,o,h){x.vertexAttribIPointer(t,e,n,o,h)},Lc:function(t,e,n,o,h,f){x.vertexAttribPointer(t,e,n,!!o,h,f)},Mc:function(t,e,n,o){x.viewport(t,e,n,o)},gb:function(t,e,n,o){x.waitSync(ct[t],e,(n>>>0)+4294967296*o)},e:function(t,e){throw se(t,e||1),"longjmp"},rb:function(t){var e=gt.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var o=e*(1+.2/n);o=Math.min(o,t+100663296),o=Math.max(t,o),0<o%65536&&(o+=65536-o%65536);t:{try{wr.grow(Math.min(2147483648,o)-ke.byteLength+65535>>>16),Ce();var h=1;break t}catch{}h=void 0}if(h)return!0}return!1},ha:function(){return wt?wt.yf:0},Y:function(t){return Br(t)?0:-5},vb:function(t,e){var n=0;return Yn().forEach(function(o,h){var f=e+n;for(h=Z[t+4*h>>2]=f,f=0;f<o.length;++f)fe[h++>>0]=o.charCodeAt(f);fe[h>>0]=0,n+=o.length+1}),0},wb:function(t,e){var n=Yn();Z[t>>2]=n.length;var o=0;return n.forEach(function(h){o+=h.length+1}),Z[e>>2]=o,0},Gb:function(t){vr||(y.onExit&&y.onExit(t),Sr=!0),_t(t,new Wn(t))},G:function(){return 0},ub:function(t,e){return t=t==1||t==2?2:de(),fe[e>>0]=t,0},ob:function(t,e,n,o,h,f){return t=E.Uf(t),e=E.Lf(t,e,n,o),Z[f>>2]=e,0},Ab:function(t,e,n,o){return t=E.Uf(t),e=E.Lf(t,e,n),Z[o>>2]=e,0},nb:function(){},P:function(t,e,n,o){for(var h=0,f=0;f<n;f++){for(var b=Z[e+8*f>>2],_=Z[e+(8*f+4)>>2],F=0;F<_;F++){var M=gt[b+F],Y=p[t];M===0||M===10?((t===1?_e:xe)(Cr(Y,0)),Y.length=0):Y.push(M)}h+=_}return Z[o>>2]=h,0},a:function(){return Ft},fd:function(t,e){x.bindFramebuffer(t,D[e])},fb:function(t){x.clear(t)},Cb:function(t,e,n,o){x.clearColor(t,e,n,o)},kb:function(t){x.clearStencil(t)},I:function(t,e){$r(t,e)},m:ui,p:fi,g:pi,D:Si,Kb:mi,W:wi,V:_i,U:xi,n:gi,s:yi,i:di,r:vi,Jb:Ci,Hb:Pi,Ib:bi,b:function(t){Ft=t},tb:function(t,e,n,o){return oi(t,e,n,o)}};(function(){function t(h){y.asm=h.exports,wr=y.asm.gd,Ce(),Ht=y.asm.jd,_r.unshift(y.asm.hd),oe--,y.monitorRunDependencies&&y.monitorRunDependencies(oe),oe==0&&(je!==null&&(clearInterval(je),je=null),Ne&&(h=Ne,Ne=null,h()))}function e(h){t(h.instance)}function n(h){return Zr().then(function(f){return WebAssembly.instantiate(f,o)}).then(h,function(f){xe("failed to asynchronously prepare wasm: "+f),de(f)})}var o={a:ci};if(oe++,y.monitorRunDependencies&&y.monitorRunDependencies(oe),y.instantiateWasm)try{return y.instantiateWasm(o,t)}catch(h){return xe("Module.instantiateWasm callback failed with error: "+h),!1}return function(){return Oe||typeof WebAssembly.instantiateStreaming!="function"||Xe()||ae.startsWith("file://")||typeof fetch!="function"?n(e):fetch(ae,{credentials:"same-origin"}).then(function(h){return WebAssembly.instantiateStreaming(h,o).then(e,function(f){return xe("wasm streaming compile failed: "+f),xe("falling back to ArrayBuffer instantiation"),n(e)})})}().catch(dt),{}})(),y.___wasm_call_ctors=function(){return(y.___wasm_call_ctors=y.asm.hd).apply(null,arguments)};var Xn=y._memset=function(){return(Xn=y._memset=y.asm.id).apply(null,arguments)},an=y._malloc=function(){return(an=y._malloc=y.asm.kd).apply(null,arguments)},Ke=y._free=function(){return(Ke=y._free=y.asm.ld).apply(null,arguments)},zn=y.___errno_location=function(){return(zn=y.___errno_location=y.asm.md).apply(null,arguments)},Jn=y.___getTypeName=function(){return(Jn=y.___getTypeName=y.asm.nd).apply(null,arguments)};y.___embind_register_native_and_builtin_types=function(){return(y.___embind_register_native_and_builtin_types=y.asm.od).apply(null,arguments)};var le=y.stackSave=function(){return(le=y.stackSave=y.asm.pd).apply(null,arguments)},he=y.stackRestore=function(){return(he=y.stackRestore=y.asm.qd).apply(null,arguments)},se=y._setThrew=function(){return(se=y._setThrew=y.asm.rd).apply(null,arguments)},$n=y._memalign=function(){return($n=y._memalign=y.asm.sd).apply(null,arguments)};y.dynCall_iiiji=function(){return(y.dynCall_iiiji=y.asm.td).apply(null,arguments)},y.dynCall_ji=function(){return(y.dynCall_ji=y.asm.ud).apply(null,arguments)},y.dynCall_iiji=function(){return(y.dynCall_iiji=y.asm.vd).apply(null,arguments)},y.dynCall_iijjiii=function(){return(y.dynCall_iijjiii=y.asm.wd).apply(null,arguments)},y.dynCall_iij=function(){return(y.dynCall_iij=y.asm.xd).apply(null,arguments)},y.dynCall_vijjjii=function(){return(y.dynCall_vijjjii=y.asm.yd).apply(null,arguments)},y.dynCall_viji=function(){return(y.dynCall_viji=y.asm.zd).apply(null,arguments)},y.dynCall_vijiii=function(){return(y.dynCall_vijiii=y.asm.Ad).apply(null,arguments)},y.dynCall_viiiiij=function(){return(y.dynCall_viiiiij=y.asm.Bd).apply(null,arguments)},y.dynCall_viijii=function(){return(y.dynCall_viijii=y.asm.Cd).apply(null,arguments)},y.dynCall_jiiii=function(){return(y.dynCall_jiiii=y.asm.Dd).apply(null,arguments)},y.dynCall_jii=function(){return(y.dynCall_jii=y.asm.Ed).apply(null,arguments)},y.dynCall_iiij=function(){return(y.dynCall_iiij=y.asm.Fd).apply(null,arguments)},y.dynCall_iiiij=function(){return(y.dynCall_iiiij=y.asm.Gd).apply(null,arguments)},y.dynCall_viij=function(){return(y.dynCall_viij=y.asm.Hd).apply(null,arguments)},y.dynCall_viiij=function(){return(y.dynCall_viiij=y.asm.Id).apply(null,arguments)},y.dynCall_vij=function(){return(y.dynCall_vij=y.asm.Jd).apply(null,arguments)},y.dynCall_jiiiiii=function(){return(y.dynCall_jiiiiii=y.asm.Kd).apply(null,arguments)},y.dynCall_jiiiiji=function(){return(y.dynCall_jiiiiji=y.asm.Ld).apply(null,arguments)},y.dynCall_iijj=function(){return(y.dynCall_iijj=y.asm.Md).apply(null,arguments)},y.dynCall_jiji=function(){return(y.dynCall_jiji=y.asm.Nd).apply(null,arguments)},y.dynCall_iiiiij=function(){return(y.dynCall_iiiiij=y.asm.Od).apply(null,arguments)},y.dynCall_iiiiijj=function(){return(y.dynCall_iiiiijj=y.asm.Pd).apply(null,arguments)},y.dynCall_iiiiiijj=function(){return(y.dynCall_iiiiiijj=y.asm.Qd).apply(null,arguments)};function ui(t,e){var n=le();try{return Ht.get(t)(e)}catch(o){if(he(n),o!==o+0&&o!=="longjmp")throw o;se(1,0)}}function fi(t,e,n){var o=le();try{return Ht.get(t)(e,n)}catch(h){if(he(o),h!==h+0&&h!=="longjmp")throw h;se(1,0)}}function di(t,e,n,o){var h=le();try{Ht.get(t)(e,n,o)}catch(f){if(he(h),f!==f+0&&f!=="longjmp")throw f;se(1,0)}}function pi(t,e,n,o){var h=le();try{return Ht.get(t)(e,n,o)}catch(f){if(he(h),f!==f+0&&f!=="longjmp")throw f;se(1,0)}}function gi(t,e){var n=le();try{Ht.get(t)(e)}catch(o){if(he(n),o!==o+0&&o!=="longjmp")throw o;se(1,0)}}function yi(t,e,n){var o=le();try{Ht.get(t)(e,n)}catch(h){if(he(o),h!==h+0&&h!=="longjmp")throw h;se(1,0)}}function mi(t,e,n,o,h,f){var b=le();try{return Ht.get(t)(e,n,o,h,f)}catch(_){if(he(b),_!==_+0&&_!=="longjmp")throw _;se(1,0)}}function vi(t,e,n,o,h){var f=le();try{Ht.get(t)(e,n,o,h)}catch(b){if(he(f),b!==b+0&&b!=="longjmp")throw b;se(1,0)}}function wi(t,e,n,o,h,f,b){var _=le();try{return Ht.get(t)(e,n,o,h,f,b)}catch(F){if(he(_),F!==F+0&&F!=="longjmp")throw F;se(1,0)}}function Si(t,e,n,o,h){var f=le();try{return Ht.get(t)(e,n,o,h)}catch(b){if(he(f),b!==b+0&&b!=="longjmp")throw b;se(1,0)}}function Ci(t,e,n,o,h,f){var b=le();try{Ht.get(t)(e,n,o,h,f)}catch(_){if(he(b),_!==_+0&&_!=="longjmp")throw _;se(1,0)}}function bi(t,e,n,o,h,f,b,_,F,M){var Y=le();try{Ht.get(t)(e,n,o,h,f,b,_,F,M)}catch($){if(he(Y),$!==$+0&&$!=="longjmp")throw $;se(1,0)}}function Pi(t,e,n,o,h,f,b){var _=le();try{Ht.get(t)(e,n,o,h,f,b)}catch(F){if(he(_),F!==F+0&&F!=="longjmp")throw F;se(1,0)}}function _i(t,e,n,o,h,f,b,_,F,M){var Y=le();try{return Ht.get(t)(e,n,o,h,f,b,_,F,M)}catch($){if(he(Y),$!==$+0&&$!=="longjmp")throw $;se(1,0)}}function xi(t){var e=le();try{Ht.get(t)()}catch(n){if(he(e),n!==n+0&&n!=="longjmp")throw n;se(1,0)}}var xn;function Wn(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}Ne=function t(){xn||Dn(),xn||(Ne=t)};function Dn(){function t(){if(!xn&&(xn=!0,y.calledRun=!0,!Sr)){if(ze(_r),J(y),y.onRuntimeInitialized&&y.onRuntimeInitialized(),y.postRun)for(typeof y.postRun=="function"&&(y.postRun=[y.postRun]);y.postRun.length;){var e=y.postRun.shift();Vr.unshift(e)}ze(Vr)}}if(!(0<oe)){if(y.preRun)for(typeof y.preRun=="function"&&(y.preRun=[y.preRun]);y.preRun.length;)xr();ze(Dr),0<oe||(y.setStatus?(y.setStatus("Running..."),setTimeout(function(){setTimeout(function(){y.setStatus("")},1),t()},1)):t())}}if(y.run=Dn,y.preInit)for(typeof y.preInit=="function"&&(y.preInit=[y.preInit]);0<y.preInit.length;)y.preInit.pop()();return Dn(),B.ready}}();Ge.exports=V},5519:(Ge,te,tt)=>{"use strict";tt.d(te,{y:()=>dr,j:()=>In});var at=tt(5733),vt=tt.n(at),V=tt(2797),At=tt(1227),B=tt.n(At),y=tt(8080),J=tt(6126);const dt=Math.PI*2;function Pt(m){return m/180*Math.PI}class Ct{constructor(r=1,a=0,u=0,g=1,S=0,w=0){this.array=null,this.a=r,this.b=a,this.c=u,this.d=g,this.tx=S,this.ty=w}fromArray(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]}set(r,a,u,g,S,w){return this.a=r,this.b=a,this.c=u,this.d=g,this.tx=S,this.ty=w,this}toArray(r,a){this.array||(this.array=new Float32Array(9));const u=a||this.array;return r?(u[0]=this.a,u[1]=this.b,u[2]=0,u[3]=this.c,u[4]=this.d,u[5]=0,u[6]=this.tx,u[7]=this.ty,u[8]=1):(u[0]=this.a,u[1]=this.c,u[2]=this.tx,u[3]=this.b,u[4]=this.d,u[5]=this.ty,u[6]=0,u[7]=0,u[8]=1),u}apply(r,a){a=a||new y.E;const u=r.x,g=r.y;return a.x=this.a*u+this.c*g+this.tx,a.y=this.b*u+this.d*g+this.ty,a}applyInverse(r,a){a=a||new y.E;const u=1/(this.a*this.d+this.c*-this.b),g=r.x,S=r.y;return a.x=this.d*u*g+-this.c*u*S+(this.ty*this.c-this.tx*this.d)*u,a.y=this.a*u*S+-this.b*u*g+(-this.ty*this.a+this.tx*this.b)*u,a}translate(r,a){return this.tx+=r,this.ty+=a,this}scale(r,a){return this.a*=r,this.d*=a,this.c*=r,this.b*=a,this.tx*=r,this.ty*=a,this}rotate(r){const a=Math.cos(r),u=Math.sin(r),g=this.a,S=this.c,w=this.tx;return this.a=g*a-this.b*u,this.b=g*u+this.b*a,this.c=S*a-this.d*u,this.d=S*u+this.d*a,this.tx=w*a-this.ty*u,this.ty=w*u+this.ty*a,this}append(r){const a=this.a,u=this.b,g=this.c,S=this.d;return this.a=r.a*a+r.b*g,this.b=r.a*u+r.b*S,this.c=r.c*a+r.d*g,this.d=r.c*u+r.d*S,this.tx=r.tx*a+r.ty*g+this.tx,this.ty=r.tx*u+r.ty*S+this.ty,this}setTransform(r,a,u,g,S,w,R,D,H){return this.a=Math.cos(R+H)*S,this.b=Math.sin(R+H)*S,this.c=-Math.sin(R-D)*w,this.d=Math.cos(R-D)*w,this.tx=r-(u*this.a+g*this.c),this.ty=a-(u*this.b+g*this.d),this}prepend(r){const a=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){const u=this.a,g=this.c;this.a=u*r.a+this.b*r.c,this.b=u*r.b+this.b*r.d,this.c=g*r.a+this.d*r.c,this.d=g*r.b+this.d*r.d}return this.tx=a*r.a+this.ty*r.c+r.tx,this.ty=a*r.b+this.ty*r.d+r.ty,this}decompose(r){const a=this.a,u=this.b,g=this.c,S=this.d,w=r.pivot,R=-Math.atan2(-g,S),D=Math.atan2(u,a),H=Math.abs(R+D);return H<1e-5||Math.abs(dt-H)<1e-5?(r.rotation=D,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=R,r.skew.y=D),r.scale.x=Math.sqrt(a*a+u*u),r.scale.y=Math.sqrt(g*g+S*S),r.position.x=this.tx+(w.x*a+w.y*g),r.position.y=this.ty+(w.x*u+w.y*S),r}invert(){const r=this.a,a=this.b,u=this.c,g=this.d,S=this.tx,w=r*g-a*u;return this.a=g/w,this.b=-a/w,this.c=-u/w,this.d=r/w,this.tx=(u*this.ty-g*S)/w,this.ty=-(r*this.ty-a*S)/w,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const r=new Ct;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r}copyTo(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r}copyFrom(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Ct}static get TEMP_MATRIX(){return new Ct}}class Zt{constructor(r,a,u=0,g=0){this._x=u,this._y=g,this.cb=r,this.scope=a}clone(r=this.cb,a=this.scope){return new Zt(r,a,this._x,this._y)}set(r=0,a=r){return(this._x!==r||this._y!==a)&&(this._x=r,this._y=a,this.cb.call(this.scope)),this}copyFrom(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this}copyTo(r){return r.set(this._x,this._y),r}equals(r){return r.x===this._x&&r.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))}get y(){return this._y}set y(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))}}const _t=class{constructor(){this.worldTransform=new Ct,this.localTransform=new Ct,this.position=new Zt(this.onChange,this,0,0),this.scale=new Zt(this.onChange,this,1,1),this.pivot=new Zt(this.onChange,this,0,0),this.skew=new Zt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const m=this.localTransform;this._localID!==this._currentLocalID&&(m.a=this._cx*this.scale.x,m.b=this._sx*this.scale.x,m.c=this._cy*this.scale.y,m.d=this._sy*this.scale.y,m.tx=this.position.x-(this.pivot.x*m.a+this.pivot.y*m.c),m.ty=this.position.y-(this.pivot.x*m.b+this.pivot.y*m.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(m){const r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==m._worldID){const a=m.worldTransform,u=this.worldTransform;u.a=r.a*a.a+r.b*a.c,u.b=r.a*a.b+r.b*a.d,u.c=r.c*a.a+r.d*a.c,u.d=r.c*a.b+r.d*a.d,u.tx=r.tx*a.a+r.ty*a.c+a.tx,u.ty=r.tx*a.b+r.ty*a.d+a.ty,this._parentID=m._worldID,this._worldID++}}setFromMatrix(m){m.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(m){this._rotation!==m&&(this._rotation=m,this.updateSkew())}};let Dt=_t;Dt.IDENTITY=new _t;class It{constructor(){this._disposables=[],this._disposed=!1}dispose(){this._disposables.forEach(r=>{typeof r=="function"?r():r instanceof It?r.dispose():r.unsubscribe()}),this._disposables.length=0,this._disposed=!0}}var T=tt(9093),Jt=tt(2283),Vt=tt(7027),Kt=tt(4825);class Se extends It{constructor(r){super();this.view=r,this.onClick=a=>{const u=a,g=this.findViewFromEvent(u);this.view.selectLayer(g==null?void 0:g.model)},this._disposables.push((0,Vt.R)(r.canvasEl,"contextmenu").subscribe(a=>{a.button===0&&(a.preventDefault(),this.onClick(a))})),this._disposables.push((0,Vt.R)(r.canvasEl,"mousemove").pipe((0,Kt.p)(100)).subscribe(a=>{this.onHover(a)})),this._disposables.push((0,Vt.R)(r.canvasEl,"click").subscribe(this.onClick))}isDeepKey(r){return r.metaKey||r.ctrlKey}onHover(r){const a=this.findViewFromEvent(r);this.view.hoverLayer(a==null?void 0:a.model)}findViewFromEvent(r){const{offsetX:a,offsetY:u}=r,g=new y.E(a,u),S=this.findView(g,this.isDeepKey(r));return(0,Jt.ZP)(!(S instanceof ve),"Cant select page view. It should be undefined"),S}findView(r,a){const u=this.view.pageView;if(!!u&&!!u.containsPoint(r))return a?this.findViewDeep(u,r):this.findViewFirst(u,r)}findViewFirst(r,a){for(let u=r.children.length-1;u>=0;u--){const g=r.children[u],S=g.model._class;if(g.interactive&&(S===V.Rs.Artboard&&g.containsPoint(a)||S===V.Rs.SymbolMaster))for(let w=g.children.length-1;w>=0;w--){const R=g.children[w];if(R.interactive&&R.containsPoint(a))return R}else if(g.interactive&&g.containsPoint(a))return g}}findViewDeep(r,a){let u=r;for(;u.children.length>0;){let g=!1;for(let S=u.children.length-1;S>=0;S--){const w=u.children[S];if(w.interactive&&w.containsPoint(a))if(g=!0,!(w instanceof jt||w instanceof je)){u=w;break}else return w}if(!g||u.children.length===0)return u instanceof $e||u instanceof ve?void 0:u}}}var Ie=tt(5244),Nt=tt(9233),me=tt(5358),_e=tt(4203),xe=tt(3283);const Ft=25;var Oe=tt(6629),vr=tt(6381);class wr extends It{constructor(r){super();this.view=r}get zoomState(){var r;return(r=this.view.pageView)==null?void 0:r.zoomState}}class Sr extends wr{constructor(r){super(r);this.viewportScale=this.view.pageState.currentPage.pipe((0,vr.w)(()=>this.zoomState?this.zoomState.scale$:(0,Oe.of)(1)))}scaleUp(){this.scaleDir(1)}scaleDown(){this.scaleDir(-1)}scaleDir(r){if(!this.zoomState)return;const a=1+r*.1;this.zoomState.onScale(a,this.view.pageFrame.center)}moveIntoView(r){if(!this.zoomState)return;const a=30,u=r.renderFrame.applyMatrix(r.transform.worldTransform),g=this.view.pageFrame,{scale:S}=g.layoutRectInCenter(u,a),w=this.zoomState.position,D=this.zoomState.scale*S,H=r.transform.worldTransform.clone();H.translate(-w.x,-w.y),H.prepend(new Ct().scale(S,S));const Q=r.renderFrame.applyMatrix(H),{translate:et}=g.layoutRectInCenter(Q,a);this.zoomState.setScale(D),this.zoomState.setPosition(et)}}class ir{constructor(r){this.view=r,this.viewport=new Sr(this.view)}}var Lr=Object.defineProperty,Cr=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Ye=(m,r,a)=>r in m?Lr(m,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[r]=a,br=(m,r)=>{for(var a in r||(r={}))$t.call(r,a)&&Ye(m,a,r[a]);if(qt)for(var a of qt(r))Le.call(r,a)&&Ye(m,a,r[a]);return m},sr=(m,r)=>Cr(m,Fe(r));const Qr=!1,Pr=!1;class qr{constructor(){this.selectionChange=new Ie.xQ,this.hoverChange=new Ie.xQ,this.currentPage=new Nt.X(0),this.changed=(0,me.T)(this.selectionChange,this.hoverChange)}reset(){this.selectLayer(void 0),this.hoverLayer(void 0)}selectLayer(r){if(this.selectedLayerView===r)return;const a=this.selectedLayerView;a&&(a.model.isSelected=!1),this.selectedLayerView=r,r&&(r.model.isSelected=!0),this.selectionChange.next()}hoverLayer(r){this.hoverLayerView!==r&&(this.hoverLayerView=r,this.hoverChange.next())}}class ke extends It{constructor(r,a){super();this.model=r,this.foreignEl=a,this.dirty=!0,this.dpi=1,this.frame=new J.U,this.surfaceFrame=new J.U,this._canvasStack=[],this._symbolContextStack=[],this.viewMap=new Map,this.pageState=new qr,this.showRuler=!0,ke.currentContext=this,this.createCanvasEl(),this.attachParentNode(a),this.overlayView=new Rn,this.services=new ir(this),this._disposables.push((0,me.T)(r.changed$,this.pageState.changed).subscribe(()=>{this.markDirty()}),new Se(this))}static async create(r,a){await T.IF;const u=await(0,T.fp)(),g=new ke(r,a);return g.fontMgr=u,g}createCanvasEl(){this.canvasEl=document.createElement("canvas"),this.canvasEl.style.display="block",this.grContext=T.ZP.CanvasKit.MakeGrContext(T.ZP.CanvasKit.GetWebGLContext(this.canvasEl))}attachParentNode(r){(0,Jt.ZP)(!this.canvasEl.parentElement,"Should not attach again!"),r.appendChild(this.canvasEl),this.doResize(),this._disposables.push(new _e.y(u=>{const g=new ResizeObserver(S=>{u.next()});return g.observe(r),()=>g.disconnect()}).pipe((0,xe.b)(200)).subscribe(()=>{this.doResize()}));const a=()=>{this._disposed||(this.render(),setTimeout(a,16))};setTimeout(a,16)}doResize(){const r=this.foreignEl.getBoundingClientRect();if(this.frame.width===r.width&&this.frame.height===r.height)return;this.frame.width=r.width,this.frame.height=r.height,this.dpi=window.devicePixelRatio,this.canvasEl.style.width=`${r.width}px`,this.canvasEl.style.height=`${r.height}px`;const a=this.frame.width*this.dpi,u=this.frame.height*this.dpi;this.canvasEl.width=a,this.canvasEl.height=u,this.markDirty()}createSkSurfaceAndCanvas(){var r;(r=this.skSurface)==null||r.delete();const a=T.ZP.CanvasKit.MakeOnScreenGLSurface(this.grContext,this.canvasEl.width,this.canvasEl.height,T.ZP.CanvasKit.ColorSpace.SRGB);(0,Jt.ZP)(a,"Cant create sk surface"),this.skSurface=a,this.skCanvas=this.skSurface.getCanvas(),(0,Jt.ZP)(this.skCanvas,"Cant create sk canvas")}makeOffscreenSurface(r,a){return this.skSurface.makeSurface(sr(br({},this.skSurface.imageInfo()),{width:r,height:a}))}renderPage(r=0){const a=this.model.pages[r];(0,Jt.ZP)(a!==void 0,`Page not exist: [${r}]`),this.overlayView.resetPage(),this.pageState.reset();const u=new ve(a);this.pageView=u,this.pageView.layout(),u.zoomToFit(),this.pageState.currentPage.next(r),Qr&&this.debugPrintTree(this.pageView),this.markDirty()}debugPrintTree(r=this.pageView){var a,u;console.group((a=r==null?void 0:r.debugString)==null?void 0:a.call(r)),(u=r==null?void 0:r.children)==null||u.forEach(g=>this.debugPrintTree(g)),console.groupEnd()}markDirty(){this.dirty=!0}pushCanvas(r){this._canvasStack.push(this.skCanvas),this.skCanvas=r}popCanvas(){const r=this._canvasStack.pop();(0,Jt.ZP)(!!r,"Cant pop canvas"),this.skCanvas=r}enterSymbolInstance(r){this._symbolContextStack.push(r),this.symbolContext=r}leaveSymbolInstance(){this._symbolContextStack.pop(),this.symbolContext=this._symbolContextStack[this._symbolContextStack.length-1]}render(){if(!!this.dirty){if(this.createSkSurfaceAndCanvas(),this.skCanvas.clear(T.ZP.CanvasKit.TRANSPARENT),this.pageView){const r=Date.now();this.skCanvas.save(),this.skCanvas.scale(this.dpi,this.dpi),this.pageView.layout(),this.overlayView.layout(),this.pageView.render(),this.overlayView.render(),this.skCanvas.restore(),this.skSurface.flush(),Pr&&console.log(">>> render costs:",Date.now()-r)}this.dirty=!1}}drawInGlobalCoordinate(r,a){this.skCanvas.save();const u=this.skCanvas.getTotalMatrix(),g=T.ZP.CanvasKit.Matrix.mapPoints(u,r);g[0]=g[0]/this.dpi,g[1]=g[1]/this.dpi;const S=T.ZP.CanvasKit.Matrix.invert(u);(0,Jt.ZP)(S,"invert matrix failed"),this.skCanvas.concat(S),this.skCanvas.scale(this.dpi,this.dpi),a(g),this.skCanvas.restore()}dispose(){super.dispose(),this.canvasEl.parentNode&&this.canvasEl.parentNode.removeChild(this.canvasEl)}debugTexture(){const r=window.dt;r&&r.forEach((a,u)=>{})}registerLayer(r,a){this.viewMap.set(r,a)}getViewByModelId(r){return this.viewMap.get(r)}selectLayer(r){if(r){const a=this.getViewByModelId(r.objectId);this.pageState.selectLayer(a)}else this.pageState.selectLayer(void 0)}hoverLayer(r){if(r){const a=this.getViewByModelId(r.objectId);this.pageState.hoverLayer(a)}else this.pageState.hoverLayer(void 0)}get pageFrame(){const r=this.showRuler?Ft:0;return new J.U(r,r,this.frame.width-r,this.frame.height-r)}registerArtBoard(r){this.overlayView.addArtBoardOverlay(r)}exportSelection(){const r=this.pageState.selectedLayerView;if(!r){alert("Select a layer first.");return}const a=this.renderView(r,3);this.getImgFromSkImage(a)}renderView(r,a){const u=r.renderFrame,g=this.makeOffscreenSurface(u.width*a,u.height*a),S=g.getCanvas();this.pushCanvas(S),S.scale(a,a),S.translate(-u.x,-u.y);try{r._render()}finally{this.popCanvas()}return g.flush(),g.makeImageSnapshot()}getImgFromSkImage(r){const a=r.width(),u=r.height(),g=r.readPixels(0,0,sr(br({},this.skSurface.imageInfo()),{width:a,height:u}));(0,Jt.ZP)(g,"readPixels failed");const S=document.createElement("canvas");S.width=a,S.height=u;const w=S.getContext("2d");(0,Jt.ZP)(w,"2d canvas context failed");const R=w.createImageData(a,u);R.data.set(g),w.putImageData(R,0,0),S.toBlob(D=>{const H=URL.createObjectURL(D);window.open(H)})}}let fe=0;class gt{constructor(){this.ctx=ke.currentContext,this.id=fe++}debugString(){return`<${this.constructor.name}>(${this.id})`}}const De=m=>{const r=[sk.CanvasKit.BLACK,sk.CanvasKit.BLUE,sk.CanvasKit.CYAN,sk.CanvasKit.GREEN,sk.CanvasKit.YELLOW];return r[m%r.length]};function Wt(m){return function(a,u,g){const S=g.get;(0,Jt.ZP)(S,"Must apply to a getter");const w="_cache_key_"+u,R="_cache_val_"+u;g.get=function(){const D=m(this);if(this[w]!==D){const H=S.call(this);this[w]=D,this[R]=H}return this[R]}}}class Z{constructor(){this.rafId=0}execute(r){this.rafId=requestAnimationFrame(a=>{this.rafId=0,r(a)})}cancel(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=0)}nextFrame(){return new Promise(r=>{this.execute(r)})}}var ee=Object.defineProperty,lt=Object.getOwnPropertyDescriptor,Ve=(m,r,a,u)=>{for(var g=u>1?void 0:u?lt(r,a):r,S=m.length-1,w;S>=0;S--)(w=m[S])&&(g=(u?w(r,a,g):w(g))||g);return u&&g&&ee(r,a,g),g};class Ce extends gt{constructor(r){super();this.model=r,this.layerUpdateId=100,this.children=[],this.transform=new Dt,this.requireLayerDropShadow=!1,this._transformDirty=!0,this.canQuickReject=!0,this._layoutDirty=!0,this.ctx.registerLayer(this.model.objectId,this),this.model instanceof V.W4&&this.buildChildren(this.model.layers)}get visible(){return this.model.isVisible}get interactive(){return this.visible&&!this.model.isLocked}get isMask(){return this.model.hasClippingMask}get shouldBreakMaskChain(){return this.model.shouldBreakMaskChain}debugString(){return`<${this.constructor.name}>(${this.id})[${this.model.name}]`}get intrinsicFrame(){return this.model.frame}get frame(){return this.scaledFrame||this.model.frame}get isFrameScaled(){return this.intrinsicFrame.width!==this.frame.width||this.intrinsicFrame.height!==this.frame.height}get bounds(){const{x:r,y:a,width:u,height:g}=this.renderFrame,S=this.transform.localTransform.toArray(!1),w=T.ZP.CanvasKit.Matrix.mapPoints(S,[r,a,u,a,u,g,r,g]),R=[];for(let D=0;D<w.length;D+=2)R.push(new y.E(w[D],w[D+1]));return J.U.fromPoints(R)}get renderFrame(){return this.model.inflateFrame(this.frame.onlySize)}addChild(r){return r.parent=this,this.children.push(r),r}buildChildren(r){r.forEach(a=>{switch(a._class){case V.Rs.Group:this.addChild(new pn(a));return;case V.Rs.ShapeGroup:this.addChild(new je(a));return;case V.Rs.ShapeLike:return this.addChild(new Ne(a));case V.Rs.Bitmap:return this.addChild(new ae(a));case V.Rs.Text:return this.addChild(new z(a));case V.Rs.SymbolInstance:return this.addChild(new jt(a));case V.Rs.SymbolMaster:return this.addChild(new lr(a));case V.Rs.Artboard:return this.addChild(new $e(a))}})}renderChildren(){let r=!1;const{skCanvas:a}=this.ctx;for(let u=0;u<this.children.length;u++){const g=this.children[u];(g.isMask||g.shouldBreakMaskChain)&&r&&(a.restore(),r=!1),g.visible&&g.render(),g.isMask&&(a.save(),g.tryClip(),r=!0)}r&&a.restore()}updateTransform(){const{isFlippedHorizontal:r,isFlippedVertical:a,rotation:u}=this.model,g=this.frame;this.transform.pivot.set(g.width/2,g.height/2);const S=r?-1:1,w=a?-1:1;this.transform.scale.set(S,w);const R=-1*S*w*Pt(u);this.transform.rotation=R,this.transform.position.set(g.x+g.width/2,g.y+g.height/2),this.transform.updateLocalTransform()}calcInstanceChildScale(){const r=this.parent;if(!(r==null?void 0:r.isFrameScaled))return;const a=r.frame,u=r.intrinsicFrame,g=a.width/u.width,S=a.height/u.height;let w=this.model.fixedWidth?1:g,R=this.model.fixedHeight?1:S;const D=this.frame;if(this.model.snapLeft&&this.model.snapRight){const H=u.width-D.width;w=(a.width-H)/D.width}else if(this.model.snapRight){const H=u.width-D.width-D.x;this.model.fixedWidth||(w=(u.width*g-H)/(u.width-H))}else this.model.snapLeft&&(this.model.fixedWidth||(w=(u.width*g-D.x)/(u.width-D.x)));if(this.model.snapTop&&this.model.snapBottom){const H=u.height-D.height;R=(a.height-H)/D.height}else if(this.model.snapBottom){const H=u.height-D.height-D.y;this.model.fixedHeight||(R=(u.height*S-H)/(u.height-H))}else this.model.snapTop&&(this.model.fixedHeight||(R=(u.height*S-D.y)/(u.height-D.y)));return{scaleX:w,scaleY:R}}calcOffsetAfterScale(r,a){const u=this.parent,g=u.frame,S=u.intrinsicFrame,w=a||this.intrinsicFrame;let R=w.x,D=w.y;if(!(this.model.snapLeft&&this.model.snapRight))if(this.model.snapRight){const H=S.width-w.width-w.x;R=g.width-r.width-H}else this.model.snapLeft||(R=(w.x+w.width/2)/S.width*g.width-r.width/2);if(!(this.model.snapTop&&this.model.snapBottom))if(this.model.snapBottom){const H=S.height-w.height-w.y;D=g.height-r.height-H}else this.model.snapTop||(D=(w.y+w.height/2)/S.height*g.height-r.height/2);return{newX:R,newY:D}}commonLayoutSelf(){this.scaledFrame=void 0;const r=this.calcInstanceChildScale();if(!r)return;const{scaleX:a,scaleY:u}=r,g=this.model.frame,S=new J.U(0,0,a*g.width,u*g.height),{newX:w,newY:R}=this.calcOffsetAfterScale(S);S.x=w,S.y=R,this.scaledFrame=S}calcChildrenRenderFrame(r){return r.length===0?J.U.Empty:J.U.mergeRects(r.map(a=>a.bounds).concat(this.frame.onlySize))}parentToLocal(r){return this.transform.localTransform.applyInverse(r)}applyTransform(){const{skCanvas:r}=this.ctx,a=this.transform.localTransform.toArray(!1);r.concat(a)}layoutSelf(){}layout(){var r;this._layoutDirty&&(this.layoutSelf(),this._layoutDirty=!1),this._transformDirty&&(this.updateTransform(),this._transformDirty=!1),this.transform.updateTransform(((r=this.parent)==null?void 0:r.transform)??Dt.IDENTITY),this.layoutChildren()}layoutChildren(){for(let r=0;r<this.children.length;r++)this.children[r].layout()}render(){const{skCanvas:r}=this.ctx;r.save(),this.applyTransform();const a=r.quickReject(this.renderFrame.toSk()),u=!this.canQuickReject||!a;u&&(this.applyLayerStyle(),this._render()),r.restore(),this.layerPaint&&u&&r.restore()}tryClip(){if(!this.isMask)return;const{skCanvas:r}=this.ctx,a=this.transform.localTransform.toArray(!1);r.concat(a),this._tryClip(),r.concat(T.ZP.CanvasKit.Matrix.invert(a))}_tryClip(){}buildLayerPaint(){var r,a,u;const{style:g}=this.model;if(!g){this.layerPaint=null;return}const S=new T.ZP.CanvasKit.Paint;let w=!1;const{contextSettings:R}=g;if(R&&(R.opacity!==1&&(S.setAlphaf(R.opacity),w=!0),R.blendMode!==T.ZP.CanvasKit.BlendMode.Src&&(S.setBlendMode(R.blendMode),w=!0)),this.requireLayerDropShadow&&((a=(r=g.shadows)==null?void 0:r[0])==null?void 0:a.isEnabled)){const{color:D,blurRadius:H,offsetX:Q,offsetY:et}=g.shadows[0];w=!0,S.setImageFilter(T.ZP.CanvasKit.ImageFilter.MakeDropShadow(Q,et,H/2,H/2,D.skColor,null))}if((u=g.blur)==null?void 0:u.isEnabled){const{type:D,radius:H,motionAngle:Q}=g.blur;let et;switch(D){case V.Og.Gaussian:et=T.ZP.CanvasKit.ImageFilter.MakeBlur(H,H,T.ZP.CanvasKit.TileMode.Clamp,null);break;case V.Og.Motion:console.warn("unimplemented: motion blur");break;case V.Og.Zoom:console.warn("unimplemented: zoom blur");break;case V.Og.Background:console.warn("unimplemented: background blur");break}et&&(S.setImageFilter(et),w=!0)}w?this.layerPaint=S:this.layerPaint=null}applyLayerStyle(){if(this.layerPaint===void 0&&this.buildLayerPaint(),this.layerPaint){const{skCanvas:r}=this.ctx;r.saveLayer(this.layerPaint)}}containsPoint(r){const a=this.transform.worldTransform.applyInverse(r),u=this.frame;return a.x>0&&a.y>0&&a.x<u.width&&a.y<u.height}findView(r){if(this.containsPoint(r)){for(let a=this.children.length-1;a>=0;a--){const u=this.children[a];if(u.interactive){const g=u.findView(r);if(g)return g}}return this}else return}}Ve([Wt(m=>m.layerUpdateId)],Ce.prototype,"bounds",1),Ve([Wt(m=>m.layerUpdateId)],Ce.prototype,"renderFrame",1);var Ht=tt(436);function Dr(m,r){let a=!1;const u=new T.ZP.CanvasKit.Path,g=m.length;if(g<2)return;const S={};for(let H=0;H<g-1;H++)D(H,H+1);r&&(D(g-1,0),u.close());function w(H){const Q=m[H];return!r&&(H===0||H===g-1)?!1:Q.curveMode===V.XP.Straight&&Q.cornerRadius>0}function R(H){if(S[H])return S[H];const Q=H===0?m[g-1]:m[H-1],et=m[H],ut=H===g-1?m[0]:m[H+1];let W=et.cornerRadius;const ht=Q.point,ct=et.point,Mt=ut.point,Tt=ct.distanceTo(ht),ie=ct.distanceTo(Mt),kt=y.E.calcAngleABC(ht,ct,Mt),Ue=Math.tan(kt/2);let tr=W/Ue;const Jr=Math.min(Q.curveMode===V.XP.Straight&&Q.cornerRadius>0?Tt/2:Tt,ut.curveMode===V.XP.Straight&&ut.cornerRadius>0?ie/2:ie);tr>Jr&&(tr=Jr,W=tr*Ue);const Br=ht.minus(ct).norm(),Re=Mt.minus(ct).norm(),wt=Br.multiply(tr).add(ct),er=Re.multiply(tr).add(ct),rr=4/3*Math.tan((Math.PI-kt)/4),Be=Br.multiply(-W*rr).add(wt),$r=Re.multiply(-W*rr).add(er);return S[H]={curPoint:ct,preTangent:wt,nextTangent:er,preHandle:Be,nextHandle:$r},S[H]}function D(H,Q){let et,ut,W,ht;if(w(H)){const{nextTangent:ct}=R(H);et=ct}else{const ct=m[H];et=ct.point,ut=ct.hasCurveFrom?ct.curveFrom:void 0}if(a||(a=!0,u.moveTo(et.x,et.y)),w(Q)){const{preTangent:ct}=R(Q);W=ct}else{const ct=m[Q];W=ct.point,ht=ct.hasCurveTo?ct.curveTo:void 0}if(ut||ht?u.cubicTo((ut==null?void 0:ut.x)??(et==null?void 0:et.x),(ut==null?void 0:ut.y)??et.y,(ht==null?void 0:ht.x)??W.x,(ht==null?void 0:ht.y)??W.y,W.x,W.y):u.lineTo(W.x,W.y),w(Q)){const{nextTangent:ct,preHandle:Mt,nextHandle:Tt}=R(Q);u.cubicTo(Mt.x,Mt.y,Tt.x,Tt.y,ct.x,ct.y)}}return u}var _r=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,xr=(m,r,a,u)=>{for(var g=u>1?void 0:u?Vr(r,a):r,S=m.length-1,w;S>=0;S--)(w=m[S])&&(g=(u?w(r,a,g):w(g))||g);return u&&g&&_r(r,a,g),g};class oe extends Ce{constructor(r){super(r);this.scaleOffsetX=0,this.scaleOffsetY=0,this._appliedSymbolScale=!1,this.path=this.createPath()}get pathWithTransform(){var r,a;const u=this.intrinsicFrame,{rotation:g,isFlippedHorizontal:S,isFlippedVertical:w}=this.model;if(g||S||w){const R=S?-1:1,D=w?-1:1,H=-1*R*D*Pt(g),Q=T.ZP.CanvasKit.Matrix.multiply(T.ZP.CanvasKit.Matrix.translated(u.x,u.y),T.ZP.CanvasKit.Matrix.rotated(H,u.width/2,u.height/2),T.ZP.CanvasKit.Matrix.scaled(R,D,u.width/2,u.height/2));return(r=this.path)==null?void 0:r.copy().transform(Q)}else return(a=this.path)==null?void 0:a.copy().offset(u.x,u.y)}applySymbolScale(){var r,a;const u=this.calcInstanceChildScale();if(u){const{scaleX:g,scaleY:S}=u,{rotation:w,isFlippedHorizontal:R,isFlippedVertical:D}=this.model,H=R?-1:1,Q=D?-1:1,et=-1*Pt(w);let W=this.intrinsicFrame;const{pathWithTransform:ht}=this;ht&&(W=J.U.fromSk(ht.getBounds()));const ct=T.ZP.CanvasKit.Matrix.multiply(T.ZP.CanvasKit.Matrix.scaled(g*H,S*Q),T.ZP.CanvasKit.Matrix.rotated(et));this.path=(r=this.path)==null?void 0:r.transform(ct);const Mt=(a=this.path)==null?void 0:a.getBounds(),Tt=Mt?J.U.fromSk(Mt):this.intrinsicFrame,{newX:ie,newY:kt}=this.calcOffsetAfterScale(Tt,W);this.scaleOffsetX=ie-Tt.x,this.scaleOffsetY=kt-Tt.y,this.scaledFrame=Tt,this._appliedSymbolScale=!0}else this._appliedSymbolScale=!1}get renderFrame(){const r=this._appliedSymbolScale?this.scaledFrame:this.intrinsicFrame.onlySize;return this.model.inflateFrame(r)}get svgBuildInfo(){const r=this.pathWithTransform;if(!!r)return{path:r.toSVGString(),bounds:J.U.fromSk(r.getBounds())}}updateTransform(){this._appliedSymbolScale?(this.transform.position.set(this.scaleOffsetX,this.scaleOffsetY),this.transform.updateLocalTransform()):super.updateTransform()}layoutSelf(){this.parent instanceof je||this.applySymbolScale()}_render(){this._painter||(this._painter=new Xe(this)),this._painter.paint()}_tryClip(){const{skCanvas:r}=this.ctx;this.path&&r.clipPath(this.path,T.ZP.CanvasKit.ClipOp.Intersect,!1)}}xr([Wt(m=>m.layerUpdateId)],oe.prototype,"pathWithTransform",1),xr([Wt(m=>m.layerUpdateId)],oe.prototype,"renderFrame",1),xr([Wt(m=>m.layerUpdateId)],oe.prototype,"svgBuildInfo",1);class je extends oe{createPath(){if(!this.children.length)return;let a=this.children[0].pathWithTransform;if(this.children.length===1)return a;if(!!a)return a=a.copy(),this.children.slice(1).reduce((u,g)=>{const S=g.pathWithTransform;if(!(!u||!S))return u.op(S,g.model.booleanOperation),u},a),a}}class Ne extends oe{createPath(){return Dr(this.model.points,this.model.isClosed)}}const de=class{constructor(m){this.view=m,this.paintFnArr=[],this.hasFill=!1,this.calcShadowPath(),this.buildPaint()}get skCanvas(){return this.view.ctx.skCanvas}get style(){return this.view.model.style}get frame(){return this.view.frame}get model(){return this.view.model}get path(){return this.view.path}paint(){this.paintFnArr.forEach(m=>m())}calcShadowPath(){var m,r,a,u,g;if(!this.path)return;const S=(m=this.model.style)==null?void 0:m.fills,w=(r=this.model.style)==null?void 0:r.borders,R=S==null?void 0:S.some(et=>et.isEnabled),D=w==null?void 0:w.some(et=>et.isEnabled);this.hasFill=!!R;let H=0,Q=0;if(w==null||w.filter(et=>et.isEnabled&&et.thickness>0).forEach(et=>{const{thickness:ut,position:W}=et;W===V.rI.Inside?H=Math.max(H,ut):W===V.rI.Outside?Q=Math.max(Q,ut):(H=Math.max(H,ut/2),Q=Math.max(Q,ut/2))}),R&&D)Q?(this.shadowPath=this.path.copy().stroke({width:Q*2}),(a=this.shadowPath)==null||a.op(this.path,T.ZP.CanvasKit.PathOp.Union)):this.shadowPath=this.path;else if(R)this.shadowPath=this.path;else if(D)if(H!==0&&Q!==0)if(H===Q)this.shadowPath=this.path.copy().stroke({width:H*2});else{const et=this.path.copy().stroke({width:H*2});et==null||et.op(this.path,T.ZP.CanvasKit.PathOp.Intersect);const ut=this.path.copy().stroke({width:Q*2});ut==null||ut.op(this.path,T.ZP.CanvasKit.PathOp.Difference),et&&ut&&(et.op(ut,T.ZP.CanvasKit.PathOp.Union),this.shadowPath=et)}else H!==0?(this.shadowPath=this.path.copy().stroke({width:H*2}),(u=this.shadowPath)==null||u.op(this.path,T.ZP.CanvasKit.PathOp.Intersect)):Q!==0?(this.shadowPath=this.path.copy().stroke({width:Q*2}),(g=this.shadowPath)==null||g.op(this.path,T.ZP.CanvasKit.PathOp.Difference)):this.shadowPath=this.path;else this.shadowPath=this.path}buildPaint(){const{skCanvas:m,path:r,frame:a,style:u}=this;if(!r){console.log("No path created",this.view.debugString());return}const g=u==null?void 0:u.shadows;if(g)for(let D=0;D<g.length;D++)g[D].isEnabled&&this.paintShadow(g[D]);const S=u==null?void 0:u.fills;if(S)for(let D=0;D<S.length;D++)S[D].isEnabled&&this.paintFill(m,r,S[D],a);const w=u==null?void 0:u.innerShadows;if(w)for(let D=0;D<w.length;D++)w[D].isEnabled&&this.paintShadow(w[D]);const R=u==null?void 0:u.borders;if(R)for(let D=0;D<R.length;D++)R[D].isEnabled&&R[D].thickness&&this.paintBorder(m,r,R[D],a)}paintFill(m,r,a,u){const g=new T.ZP.CanvasKit.Paint;a.fillType===V.R5.Color?g.setColor(a.color.skColor):a.fillType===V.R5.Gradient&&a.gradient?this.applyGradient(g,a.gradient,u):a.fillType===V.R5.Pattern&&this.applyImageFill(g,a,u);const{contextSettings:S}=a;if(S){const{opacity:w,blendMode:R}=S;w!==1&&g.setAlphaf(w),R!==T.ZP.CanvasKit.BlendMode.Src&&g.setBlendMode(R)}this.paintFnArr.push(()=>{this.skCanvas.drawPath(r,g)})}paintBorder(m,r,a,u){var g;const S=(g=this.style)==null?void 0:g.borderOptions,w=new T.ZP.CanvasKit.Paint;a.fillType===V.R5.Color?w.setColor(a.color.skColor):a.fillType===V.R5.Gradient&&a.gradient?this.applyGradient(w,a.gradient,u):console.log("Not supported border fill type:",a.fillType,V.R5[a.fillType]),w.setStyle(T.ZP.CanvasKit.PaintStyle.Stroke),w.setAntiAlias(!0);const R=a.position===V.rI.Center;w.setStrokeWidth(a.thickness*(R?1:2)),this.applyBorderOptions(S,w),this.paintFnArr.push(()=>{const D=this.skCanvas;R||(D.save(),D.clipPath(r,a.position===V.rI.Inside?T.ZP.CanvasKit.ClipOp.Intersect:T.ZP.CanvasKit.ClipOp.Difference,!0)),D.drawPath(r,w),R||D.restore()})}applyGradient(m,r,a){let u;const g=r.from.scaleNew(a.width,a.height),S=r.to.scaleNew(a.width,a.height),w=[],R=[];r.stops.forEach(D=>{w.push(D.color.skColor),R.push(D.position)}),r.gradientType===V.lk.Linear&&(u=T.ZP.CanvasKit.Shader.MakeLinearGradient(g.toArray(),S.toArray(),w,R,T.ZP.CanvasKit.TileMode.Clamp)),r.gradientType===V.lk.Radial&&(u=T.ZP.CanvasKit.Shader.MakeRadialGradient(g.toArray(),g.distanceTo(S),w,R,T.ZP.CanvasKit.TileMode.Clamp)),r.gradientType===V.lk.Angular&&(u=T.ZP.CanvasKit.Shader.MakeSweepGradient(g.x,g.y,w,R,T.ZP.CanvasKit.TileMode.Clamp)),u&&m.setShader(u)}applyBorderOptions(m,r){if(!!(m==null?void 0:m.isEnabled)){if(m.dashPattern.length){const a=T.ZP.CanvasKit.PathEffect.MakeDash(m.dashPattern);r.setPathEffect(a)}r.setStrokeCap(m.lineCapStyle),r.setStrokeJoin(m.lineJoinStyle)}}applyImageFill(m,r,a){var u;const g=(u=r.image)==null?void 0:u.skImage;if(!g)return;let S;if(r.patternFillType===V.eq.Tile){const{patternTileScale:w}=r,R=T.ZP.CanvasKit.Matrix.scaled(w,w);S=g.makeShaderOptions(T.ZP.CanvasKit.TileMode.Repeat,T.ZP.CanvasKit.TileMode.Repeat,T.ZP.CanvasKit.FilterMode.Nearest,T.ZP.CanvasKit.MipmapMode.None,R)}else{let w;const R=g.width(),D=g.height(),{width:H,height:Q}=a,et=H/R,ut=Q/D,W=R/D,ht=H/Q,ct=W<ht;if(r.patternFillType===V.eq.Stretch)w=T.ZP.CanvasKit.Matrix.scaled(et,ut);else{let Mt=!1;if(r.patternFillType===V.eq.Fill&&(ct?Mt=!0:Mt=!1),r.patternFillType===V.eq.Fit&&(ct?Mt=!1:Mt=!0),Mt){const Tt=et,kt=-(D*Tt-Q)/2;w=T.ZP.CanvasKit.Matrix.multiply(T.ZP.CanvasKit.Matrix.translated(0,kt),T.ZP.CanvasKit.Matrix.scaled(Tt,Tt))}else{const Tt=ut,kt=-(R*Tt-H)/2;w=T.ZP.CanvasKit.Matrix.multiply(T.ZP.CanvasKit.Matrix.translated(kt,0),T.ZP.CanvasKit.Matrix.scaled(Tt,Tt))}}S=g.makeShaderOptions(T.ZP.CanvasKit.TileMode.Decal,T.ZP.CanvasKit.TileMode.Decal,T.ZP.CanvasKit.FilterMode.Nearest,T.ZP.CanvasKit.MipmapMode.None,w)}S&&m.setShader(S)}paintShadow(m){if(m.isEmpty)return;let r,a;const{skCanvas:u}=this;if(m.isInner){if(!this.path)return;r=this.path;const w=new T.ZP.CanvasKit.Path;if(w.addRect(T.ZP.CanvasKit.XYWHRect(-de.MaxShadowSize,-de.MaxShadowSize,de.MaxShadowSize*2,de.MaxShadowSize*2)),w.op(r,T.ZP.CanvasKit.PathOp.Difference),r=w,m.spread){const R=r.copy().stroke({width:m.spread*2});R==null||R.op(r,T.ZP.CanvasKit.PathOp.Union),r=R}a=this.path}if(!m.isInner){if(!this.shadowPath)return;if(r=this.shadowPath,m.spread){const w=this.shadowPath.copy().stroke({width:this.hasFill?m.spread*2:m.spread});w==null||w.op(this.shadowPath,T.ZP.CanvasKit.PathOp.Union),r=w}this.hasFill&&(a=this.shadowPath)}if(!r)return;const g=new T.ZP.CanvasKit.Paint;g.setColor(m.color.skColor);const S=(0,Ht.pR)(m.blurRadius);g.setMaskFilter(T.ZP.CanvasKit.MaskFilter.MakeBlur(T.ZP.CanvasKit.BlurStyle.Normal,S,!0)),this.paintFnArr.push(()=>{const w=this.skCanvas;w.save(),a&&(m.isInner?w.clipPath(a,T.ZP.CanvasKit.ClipOp.Intersect,!0):w.clipPath(a,T.ZP.CanvasKit.ClipOp.Difference,!0)),w.translate(m.offsetX,m.offsetY),w.drawPath(r,g),w.restore()})}};let Xe=de;Xe.MaxShadowSize=1e5;class ae extends Ce{layoutSelf(){this.commonLayoutSelf()}_render(){var r;const a=(r=this.model.file)==null?void 0:r.skImage,u=this.frame;if(!a)return;const{skCanvas:g}=this.ctx,S=new T.ZP.CanvasKit.Paint;g.drawImageRect(a,T.ZP.CanvasKit.XYWHRect(0,0,a.width(),a.height()),T.ZP.CanvasKit.XYWHRect(0,0,u.width,u.height),S)}}var jr=Object.defineProperty,or=Object.defineProperties,Zr=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,X=(m,r,a)=>r in m?jr(m,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[r]=a,p=(m,r)=>{for(var a in r||(r={}))Je.call(r,a)&&X(m,a,r[a]);if(ze)for(var a of ze(r))Mr.call(r,a)&&X(m,a,r[a]);return m},E=(m,r)=>or(m,Zr(r));class z extends Ce{get painter(){return this._painter||(this._painter=new rt(this)),this._painter}get path(){return this.painter.path}get pathWithTransform(){return this.path}get shadowPath(){}get hasFill(){return this.model.validFillCount>0}get needPaintWithPath(){return this.model.hasInnerShadow||this.model.hasComplicatedPaint||this.model.validFillCount>1}_tryClip(){const{skCanvas:r}=this.ctx;this.path&&r.clipPath(this.path,T.ZP.CanvasKit.ClipOp.Intersect,!1)}_render(){this.painter.paint()}}class rt{constructor(r){this.view=r,this.calcTextShadow(),this.calcTextPaint()}calcTextShadow(){var r;this.textShadows=(r=this.model.style)==null?void 0:r.shadows.map(a=>({color:a.color.skColor,blurRadius:a.blurRadius,offset:[a.offsetX,a.offsetY]}))}calcTextPaint(){var r,a,u,g;const S=(a=(r=this.model.style)==null?void 0:r.borders)==null?void 0:a.find(R=>R.isEnabled),w=(g=(u=this.model.style)==null?void 0:u.fills)==null?void 0:g.find(R=>R.isEnabled);if(S){const R=(0,T.yu)(S.thickness);R.setColor(S.color.skColor),this.textBorderPaint=R}if(w){const R=(0,T.pK)(w.color.skColor);this.textPaint=R}}get ctx(){return this.view.ctx}get skCanvas(){return this.ctx.skCanvas}get model(){return this.view.model}get frame(){return this.view.frame}get cachePaintInfo(){return this._cachePaintInfo||(this._cachePaintInfo=this.buildPaintInfo()),this._cachePaintInfo}get cacheBorderPaintInfo(){if(!!this.textBorderPaint)return this._cacheBorderPaintInfo||(this._cacheBorderPaintInfo=this.buildPaintInfo(!0)),this._cacheBorderPaintInfo}get path(){return this._path||(this._path=this.calcPath()),this._path}get pathPainter(){return this._pathPainter||(this._pathPainter=new Xe(this.view)),this._pathPainter}get fontFamilies(){return T.FZ}paint(){this.view.needPaintWithPath?this.pathPainter.paint():(this.paintWith(this.cachePaintInfo),this.paintWith(this.cacheBorderPaintInfo))}paintWith(r){if(!r)return;const{paraArr:a,baseY:u}=r,{skCanvas:g}=this;a.forEach(([S,w])=>{g.drawParagraph(S,0,w+u)})}calcPath(){const r=this.skCanvas,{paraArr:a,baseY:u}=this.cachePaintInfo,g=new T.ZP.CanvasKit.Path;return a.forEach(([S,w])=>{const D=S.getPath(r).transform(T.ZP.CanvasKit.Matrix.translated(0,w+u));g.addPath(D)}),g}buildPaintInfo(r=!1){var a,u,g;const{skCanvas:S,fontMgr:w}=this.ctx,{attributedString:R,style:D}=this.model,{frame:H}=this,{string:Q,attributes:et}=R,ut=r?this.textBorderPaint:this.textPaint,W=((u=(a=D==null?void 0:D.textStyle)==null?void 0:a.encodedAttributes.paragraphStyle)==null?void 0:u.paragraphSpacing)||0,ht=Q.split(/\r\n|\r|\n/),ct=this.breakLines(ht,et);let Mt=0;const Tt=ht.map((Ue,tr)=>{const Jr=ct[tr],Br=this.buildParaStyle(D==null?void 0:D.textStyle),Re=T.ZP.CanvasKit.ParagraphBuilder.Make(Br,w);Jr.forEach(Be=>{const{length:$r,location:pr,attributes:Ir}=Be,Wr=this.buildTextStyle(Ir,r),Et=Gt(Ue.slice(pr,pr+$r),Ir);ut?Re.pushFgPaintStyle(Wr,ut):Re.pushStyle(Wr),Re.addText(Et),Re.pop()});const wt=Re.build();Re.delete(),wt.layout(H.width);const er=wt.getHeight(),rr=[wt,Mt];return Mt+=er+W,rr}),ie=Mt-W;return{baseY:mt(ie,H.height,((g=D==null?void 0:D.textStyle)==null?void 0:g.verticalAlignment)||0),paraArr:Tt}}breakLines(r,a){a=a.slice(0);let u=a.shift(),g=0;return r.map(S=>{const w=[],R=g,D=g+S.length;for(;u;){const{location:H,length:Q}=u,et=H,ut=H+Q;if(!(ut<=R||et>=D)){const W=Math.max(et,R),ct=Math.min(ut,D)-W,Mt=W-g;w.push(E(p({},u),{location:Mt,length:ct}))}if(ut<=D&&(u=a.shift()),D<=ut)break}return g+=S.length+1,w})}buildParaStyle(r){var a,u;if(!r)return new T.ZP.CanvasKit.ParagraphStyle({textStyle:{}});const{encodedAttributes:g}=r,S=g.MSAttributedStringFontAttribute.attributes.size;let w,R;return((a=g.paragraphStyle)==null?void 0:a.maximumLineHeight)&&(w=g.paragraphStyle.maximumLineHeight/S,R=w-1,w=1),new T.ZP.CanvasKit.ParagraphStyle({textAlign:pt((u=g.paragraphStyle)==null?void 0:u.alignment),textStyle:{color:g.MSAttributedStringColorAttribute?Ee(g.MSAttributedStringColorAttribute):T.ZP.CanvasKit.BLACK,fontFamilies:this.fontFamilies,fontSize:S},strutStyle:{fontSize:S,strutEnabled:!0,heightMultiplier:w,leading:R,fontFamilies:this.fontFamilies,halfLeading:!0,forceStrutHeight:!0}})}buildTextStyle(r,a=!1){var u;const g=r.MSAttributedStringFontAttribute.attributes.size,S=a?T.ZP.CanvasKit.NoDecoration:r.strikethroughStyle?T.ZP.CanvasKit.LineThroughDecoration:r.underlineStyle?T.ZP.CanvasKit.UnderlineDecoration:T.ZP.CanvasKit.NoDecoration;return new T.ZP.CanvasKit.TextStyle({fontSize:g,fontFamilies:this.fontFamilies,letterSpacing:r.kerning,decoration:S,color:a?T.ZP.CanvasKit.TRANSPARENT:((u=this.textPaint)==null?void 0:u.getColor())||r.MSAttributedStringColorAttribute&&r.MSAttributedStringColorAttribute.skColor,fontStyle:{weight:st(r.MSAttributedStringFontAttribute.attributes.name)},shadows:a?void 0:this.textShadows})}dispose(){var r,a;(r=this._cachePaintInfo)==null||r.paraArr.forEach(([u])=>{u.delete()}),(a=this.textPaint)==null||a.delete()}}function st(m=""){m=m.toLowerCase();const r=T.ZP.CanvasKit,a={thin:r.FontWeight.Thin,light:r.FontWeight.Light,lighter:r.FontWeight.ExtraLight,regular:r.FontWeight.Normal,normal:r.FontWeight.Normal,bold:r.FontWeight.Bold,black:r.FontWeight.Black,ultra:r.FontWeight.ExtraBold,extra:r.FontWeight.ExtraBold};for(const u in a)if(m.includes(u))return a[u];return r.FontWeight.Normal}function pt(m){if(!m)return T.ZP.CanvasKit.TextAlign.Left;const r=T.ZP.CanvasKit;return{[V.os.TextHorizontalAlignment.Left]:r.TextAlign.Left,[V.os.TextHorizontalAlignment.Centered]:r.TextAlign.Center,[V.os.TextHorizontalAlignment.Right]:r.TextAlign.Right,[V.os.TextHorizontalAlignment.Justified]:r.TextAlign.Justify,[V.os.TextHorizontalAlignment.Natural]:r.TextAlign.Left}[m]}function mt(m,r,a){switch(a){case V.os.TextVerticalAlignment.Top:return 0;case V.os.TextVerticalAlignment.Middle:return(r-m)/2;case V.os.TextVerticalAlignment.Bottom:return r-m}}function Gt(m,r){switch(r.MSAttributedStringTextTransformAttribute){case V.os.TextTransform.Lowercase:return m.toLowerCase();case V.os.TextTransform.Uppercase:return m.toUpperCase();default:return m}}function Ee(m){return T.ZP.CanvasKit.Color(m.red*256|0,m.green*256|0,m.blue*256|0,m.alpha)}var ar=Object.defineProperty,tn=Object.getOwnPropertyDescriptor,fn=(m,r,a,u)=>{for(var g=u>1?void 0:u?tn(r,a):r,S=m.length-1,w;S>=0;S--)(w=m[S])&&(g=(u?w(r,a,g):w(g))||g);return u&&g&&ar(r,a,g),g};class $e extends Ce{constructor(r){super(r);this.isSymbolMaster=!1,this.isSymbolMaster=this.model._class===V.Rs.SymbolMaster,this.backgroundColor=this.model.hasBackgroundColor?this.model.backgroundColor.skColor:T.ZP.CanvasKit.WHITE,this.ctx.registerArtBoard(this)}_render(){const{skCanvas:r}=this.ctx;if(r.drawRect(this.frame.onlySize.toSk(),(0,T.pK)(this.backgroundColor)),!this.children.length)return;const a=!this.isSymbolMaster;a&&(r.save(),r.clipRect(this.frame.onlySize.toSk(),T.ZP.CanvasKit.ClipOp.Intersect,!0)),this.renderChildren(),a&&r.restore()}get renderFrame(){return this.isSymbolMaster?this.calcChildrenRenderFrame(this.children):this.model.frame.onlySize}}fn([Wt(m=>m.layerUpdateId)],$e.prototype,"renderFrame",1);var be=Object.defineProperty,Hr=Object.getOwnPropertyDescriptor,dn=(m,r,a,u)=>{for(var g=u>1?void 0:u?Hr(r,a):r,S=m.length-1,w;S>=0;S--)(w=m[S])&&(g=(u?w(r,a,g):w(g))||g);return u&&g&&be(r,a,g),g};class jt extends Ce{constructor(r){super(r);this.model=r,this.requireLayerDropShadow=!0,this.buildChildren(this.model.layers)}get intrinsicFrame(){return this.model.refModel?this.model.refModel.frame:this.model.frame}get renderFrame(){return this.calcChildrenRenderFrame(this.children)}get visible(){return this.model.isVisible&&!!this.model.refModel}layoutSelf(){this.commonLayoutSelf()}_render(){!this.model.refModel||(this.ctx.enterSymbolInstance(this),this.renderChildren(),this.ctx.leaveSymbolInstance())}}dn([Wt(m=>m.layerUpdateId)],jt.prototype,"renderFrame",1);class lr extends $e{constructor(r){super(r)}}var xt=Object.defineProperty,Me=Object.getOwnPropertyDescriptor,en=(m,r,a,u)=>{for(var g=u>1?void 0:u?Me(r,a):r,S=m.length-1,w;S>=0;S--)(w=m[S])&&(g=(u?w(r,a,g):w(g))||g);return u&&g&&xt(r,a,g),g};class Tr extends Ce{get renderFrame(){return this.calcChildrenRenderFrame(this.children)}_render(){this.renderChildren()}}en([Wt(m=>m.layerUpdateId)],Tr.prototype,"renderFrame",1);class pn extends Tr{constructor(){super(...arguments);this.requireLayerDropShadow=!0}layoutSelf(){this.commonLayoutSelf()}}var gn=tt(5470),hr=tt.n(gn),Ar=tt(5131);class Fr extends It{constructor(r,a){super();this.el=r,this.service=a,this.offset=new y.E,this.onWheel=u=>{const g=u;if(g.preventDefault(),g.ctrlKey||g.metaKey){const S=(100-1.5*this.getScaleDelta(g))/100;this.service.onScale(S,new y.E(g.offsetX-this.offset.x,g.offsetY-this.offset.x))}else this.service.onOffset(this.getOffsetDelta(g))},this._disposables.push((0,Vt.R)(this.el,"wheel").subscribe(this.onWheel)),this.bindDragEvents(),hr().safari&&this.bindGesture()}bindDragEvents(){let r=0,a=0;this._disposables.push((0,Ar.v)(this.el).subscribe(u=>{switch(u.type){case"dragStart":r=0,a=0;return;case"dragging":{const{dx:g,dy:S}=u,w=new y.E(r-g,a-S);this.service.onOffset(w),r=g,a=S;return}case"dragEnd":return}}))}setOffset(r){this.offset=r}getScaleDelta(r){return r.deltaMode===1?r.deltaY*15:r.deltaY<20&&r.deltaY>-20?r.deltaY:Math.max(Math.min(r.deltaY,20),-20)}getOffsetDelta(r){return hr().windows&&r.shiftKey?new y.E(r.deltaY,0):new y.E(r.deltaX,r.deltaY)}bindGesture(){const r=new y.E;let a=1;const u=g=>{if(g.preventDefault(),g.type==="gesturestart"&&(r.x=g.layerX,r.y=g.layerY,a=1),g.type==="gesturechange"){const S=g.scale,w=S/a;a=S,this.service.onScale(w,r.minus(this.offset))}g.type==="gestureend"};this._disposables.push((0,Vt.R)(this.el,"gesturestart").subscribe(u)),this._disposables.push((0,Vt.R)(this.el,"gesturechange").subscribe(u)),this._disposables.push((0,Vt.R)(this.el,"gestureend").subscribe(u))}}const rn=1/1e3,Ze=1e3;class yn{constructor(){this.scale$=new Nt.X(1),this._position$=new Nt.X(new y.E(0,0)),this._minScale=rn,this.changed$=(0,me.T)(this._position$,this.scale$)}get position(){return this._position$.value}get scale(){return this.scale$.value}get matrix(){return T.ZP.CanvasKit.Matrix.multiply(T.ZP.CanvasKit.Matrix.translated(this.position.x,this.position.y),T.ZP.CanvasKit.Matrix.scaled(this.scale,this.scale))}get interMatrix(){return T.ZP.CanvasKit.Matrix.invert(this.matrix)}onOffset(r){this._position$.next(this.position.minus(r))}onScale(r,a){let u=this.scale*r;if(u=Math.min(Math.max(u,this._minScale),Ze),u===this.scale)return;const g=this.interMatrix,S=T.ZP.CanvasKit.Matrix.mapPoints(g,[a.x,a.y]);this.scale$.next(u);const w=T.ZP.CanvasKit.Matrix.mapPoints(this.matrix,S),R=w[0]-a.x,D=w[1]-a.y;this._position$.next(new y.E(this.position.x-R,this.position.y-D))}setScale(r){this.scale$.next(r)}setMinScale(r){this._minScale=r}setPosition(r){this._position$.next(r)}}var We;(function(m){m[m.Low=0]="Low",m[m.Middle=1]="Middle",m[m.High=2]="High"})(We||(We={}));const Qe=class{static getRect(m,r){return new J.U(m*Qe.width,r*Qe.height,Qe.width,Qe.height)}};let re=Qe;re.width=256,re.height=256;class cr{constructor(){this.left=0,this.top=0,this.right=0,this.bottom=0}fromRect(r){const a=re.width,u=re.height;return this.left=Math.floor(r.x/a),this.top=Math.floor(r.y/u),this.right=Math.ceil(r.right/a),this.bottom=Math.ceil(r.bottom/u),this}contains(r,a){return r>=this.left&&r<this.right&&a>=this.top&&a<this.bottom}}function nn(m){if(isNaN(m)||m<=0)throw"Bad arg";return Math.pow(2,Math.floor(Math.log2(m)))}const Tn=!1,An=!1;class Ur{constructor(r,a){this.tileManager=r,this.scale=a,this.isStair=!1,this.isStair=nn(a)===a}clear(){this.tileManager.clearScaleTile(this.scale)}drawTile(r,a){const u=this.tileManager.canvas,g=this.tileManager.getTile(this.scale,r,a);g&&u.drawImageRect(g,re.getRect(0,0).toSk(),re.getRect(r,a).toSk(),null)}drawOtherScaleTile(r,a,u){const g=r>this.scale,S=g&&r!==nn(r),w=this.scale/r,R=re.getRect(a,u),D=R.scale(w).roundPixel(),{left:H,top:Q,right:et,bottom:ut}=new cr().fromRect(D);let W=!1;const ht=this.tileManager.canvas;ht.save(),ht.clipRect(R.toSk(),T.ZP.CanvasKit.ClipOp.Intersect,!1),ht.scale(1/w,1/w);for(let ct=Q;ct<ut;ct++)for(let Mt=H;Mt<et;Mt++)if(this.tileManager.hasTile(this.scale,Mt,ct))this.drawTile(Mt,ct);else{const Tt=g?this.low:this.high;W=!Tt||!Tt.drawOtherScaleTile(this.scale,Mt,ct),S&&this.tileManager.requireTile(this.scale,Mt,ct,W?We.High:We.Middle)}return ht.restore(),!W}drawViewport(r){var a,u,g;const{tileManager:S,scale:w}=this,R=new cr().fromRect(r),{left:D,top:H,right:Q,bottom:et}=R,ut=this.tileManager.getContentTileBounds(this.scale);for(let W=H;W<et;W++)for(let ht=D;ht<Q;ht++)!ut.contains(ht,W)||(S.hasTile(w,ht,W)?this.drawTile(ht,W):(S.requireTile(w,ht,W,We.Low),((a=this.high)==null?void 0:a.drawOtherScaleTile(w,ht,W))||(u=this.low)==null||u.drawOtherScaleTile(w,ht,W)));if(this.debugContentTileBounds=ut,this.debugViewportTileBounds=R,Tn&&(this.debugDrawViewportGrids(r),this.low&&An)){const{canvas:W}=S;W.save();const ht=this.scale/this.low.scale;W.scale(ht,ht),(g=this.low)==null||g.debugDrawViewportGrids(r,T.ZP.CanvasKit.GREEN),W.restore()}}debugDrawViewportGrids(r,a){const{left:u,top:g,right:S,bottom:w}=new cr().fromRect(r);for(let R=g;R<w;R++)for(let D=u;D<S;D++){const H=a||(this.tileManager.debugHeavyTiles.has(this.tileManager.genKey(this.scale,D,R))?T.ZP.CanvasKit.Color(255,0,0,.5):T.ZP.CanvasKit.Color(0,0,255,.5));this.tileManager.canvas.drawRect(T.ZP.CanvasKit.XYWHRect(D*re.width+2,R*re.height+2,re.width-4,re.height-4),(0,T.yu)(2,H))}}}class kr{constructor(r){this.tileManager=r}drawViewport(r,a){var u;((u=this.idealCheckerboard)==null?void 0:u.scale)!==r&&(this.deletePreviousIdealCheckerboard(),this.createIdealCheckerboard(r)),this.idealCheckerboard.drawViewport(a)}createIdealCheckerboard(r){const a=nn(r),u=this.ensureCheckerboardExist(a);r===a?this.idealCheckerboard=u:this.idealCheckerboard=this.ensureCheckerboardExist(r)}ensureCheckerboardExist(r){if(this.lowest){if(this.lowest.scale>r){const u=new Ur(this.tileManager,r);return u.high=this.lowest,this.lowest.low=u,this.lowest=u,u}let a=this.lowest;for(;a.high&&a.scale<r;)a=a.high;if(a.scale===r)return a;{const u=new Ur(this.tileManager,r);return r>a.scale?(u.low=a,u.high=a.high,a.high=u):(u.high=a,u.low=a.low,a.low=u),u}}else return this.lowest=new Ur(this.tileManager,r),this.lowest}deletePreviousIdealCheckerboard(){if(this.idealCheckerboard&&!this.idealCheckerboard.isStair){const r=this.idealCheckerboard.low,a=this.idealCheckerboard.high;r&&(r.high=a),a&&(a.low=r),this.idealCheckerboard.clear(),this.idealCheckerboard=void 0}}}class Fn{constructor(r,a){this.limit=r,this.evictHandler=a,this.size=0,this.head={},this.tail={},this.head.next=this.tail,this.tail.pre=this.head,this.map={},this.size=0}set(r,a){if(this.get(r)){this.map[r].val=a;return}this.size++;const u={pre:this.head,next:this.head.next,val:a,key:r};this._fitNode(u),this.map[r]=u,this._trim()}get(r){const a=this.map[r];if(a)return this._hoist(a),a.val}_trim(){var r;if(this.size>this.limit){this.size--;const a=this.tail.pre;this._removeNode(a),(r=this.evictHandler)==null||r.call(this,a.val),delete this.map[a.key]}}_hoist(r){this._removeNode(r),r.next=this.head.next,r.pre=this.head,this._fitNode(r)}_fitNode(r){r.pre.next=r,r.next.pre=r}_removeNode(r){r.pre.next=r.next,r.next.pre=r.pre}delete(r){var a;const u=this.map[r];!u||(this.size--,(a=this.evictHandler)==null||a.call(this,u.val),delete this.map[r],this._removeNode(u))}clear(){Object.keys(this.map).forEach(r=>this.delete(r))}}class Kr{constructor(r){this.pageView=r,this.blockingMode=!0,this.pyramid=new kr(this),this.caches=new Fn(1024,a=>a.delete()),this.requiredTiles=[],this.debugHeavyTiles=new Set,this.raf=new Z}get ctx(){return this.pageView.ctx}get canvas(){return this.ctx.skCanvas}get contentBounds(){return this.pageView.bounds}getContentTileBounds(r){const a=this.contentBounds.scale(r).roundPixel();return new cr().fromRect(a)}genKey(r,a,u){return`${r}:${a}:${u}`}hasTile(r,a,u){return!!this.caches.get(this.genKey(r,a,u))}getTile(r,a,u){return this.caches.get(this.genKey(r,a,u))}saveTile(r,a,u,g){return this.caches.set(this.genKey(r,a,u),g)}drawViewport(r,a){this.requiredTiles.length=0,this.raf.cancel(),this.pyramid.drawViewport(r,a),this.requiredTiles.length>0&&(this.blockingMode?this.scheduleWork():this.raf.execute(()=>this.scheduleWork())),this.blockingMode&&(this.blockingMode=!1,Promise.resolve().then(()=>{this.ctx.markDirty()}))}requireTile(r,a,u,g){this.requiredTiles.push([r,a,u,g])}clearScaleTile(r){const a=r+":",u=this.caches.map,g=Object.keys(u);for(const S of g)S.indexOf(a)===0&&this.caches.delete(S)}async scheduleWork(){let r=Date.now(),a=0;this.requiredTiles.sort((u,g)=>g[3]-u[3]);for(const u of this.requiredTiles){const[g,S,w]=u,R=Date.now();this.fillTile(g,S,w),a++,Date.now()-R>16&&this.debugHeavyTiles.add(this.genKey(g,S,w)),Date.now()-r>8&&(this.ctx.markDirty(),a=0,this.blockingMode||await this.raf.nextFrame(),r=Date.now())}a&&this.ctx.markDirty()}fillTile(r,a,u){if(this.hasTile(r,a,u))return;const g=this.ctx,S=g.makeOffscreenSurface(re.width,re.height),w=S.getCanvas();g.pushCanvas(w),this.pageView.drawContent(r,re.width*a,re.height*u),g.popCanvas(),S.flush();const R=S.makeImageSnapshot();this.saveTile(r,a,u,R),S.delete()}debugTexture(r,a,u){const g=this.getTile(r,a,u);!g||this.ctx.getImgFromSkImage(g)}dispose(){this.caches.clear()}}class ve extends Tr{constructor(r){super(r);this.name="page",this.log=B()("view:page"),this.enableTile=!0,this.canQuickReject=!1,this.bgColor=T.ZP.CanvasKit.parseColorString("#F9F9F9"),this.zoomState=new yn,this.initController(),location.search.includes("tile=0")&&(this.enableTile=!1),this.tileManager=new Kr(this)}initController(){this.controller=new Fr(this.ctx.canvasEl,this.zoomState),this.zoomState.changed$.subscribe(()=>{this._transformDirty=!0,this.ctx.markDirty()})}get minScale(){const r=this.bounds,a=this.ctx.frame,u=a.width/4,g=a.height/4,S=u/r.width,w=g/r.height,R=Math.min(S,w);return Math.min(R,1)}updateTransform(){const{position:r,scale:a}=this.zoomState;this.transform.position.set(r.x,r.y),this.transform.scale.set(a,a),this.transform.updateLocalTransform()}zoomToFit(){const r=this.ctx.pageFrame,a=this.bounds,{scale:u,translate:g}=r.layoutRectInCenter(a,20);this.zoomState.setPosition(g),this.zoomState.setScale(u),this.zoomState.setMinScale(this.minScale)}_makePicture(){const r=new T.ZP.CanvasKit.PictureRecorder,a=r.beginRecording(T.ZP.CanvasKit.XYWHRect(-1e8,-1e8,2e8,2e8));this.ctx.pushCanvas(a),super._render();const u=r.finishRecordingAsPicture();this.ctx.popCanvas(),console.log("Made page picture",u),this._picture=u}render(){this.renderBg(),this.enableTile?this.renderTiles():super.render()}renderBg(){const{skCanvas:r}=this.ctx;r.clear(this.bgColor)}get contentScale(){const{dpi:r}=this.ctx,a=this.zoomState.scale;return r*a}renderTiles(){const{skCanvas:r,dpi:a}=this.ctx,u=this.transform.position;let g=this.ctx.frame;g=new J.U(-u.x*a,-u.y*a,g.width*a,g.height*a).roundPixel(),r.save(),r.translate(u.x,u.y),r.scale(1/a,1/a),this.tileManager.drawViewport(this.contentScale,g),r.restore()}drawContent(r,a,u){const{skCanvas:g}=this.ctx,S=r;g.save(),g.translate(-a,-u),g.scale(S,S),this._render(),g.restore()}get bounds(){return this.children.length===0?J.U.Empty:J.U.mergeRects(this.children.map(a=>a.bounds))}debugDrawBounds(){const{skCanvas:r}=this.ctx,{bounds:a}=this;r.drawRect(a.toSk(),(0,T.yu)(2,T.ZP.CanvasKit.RED))}containsPoint(r){return this.ctx.pageFrame.containsPoint(r)}}class Er extends gt{constructor(r=new J.U){super();this.frame=r,this.clip=!0,this.visible=!0,this.children=[]}layout(){}findView(){}render(){const{skCanvas:r}=this.ctx;r.save(),this.clip&&r.clipRect(this.frame.toSk(),T.ZP.CanvasKit.ClipOp.Intersect,!0),this.renderBackground(),this.renderSelf(),this.renderChildren(),r.restore()}parentToLocal(r){return r.clone().move(this.frame.x,this.frame.y)}renderSelf(){}renderBackground(){const{skCanvas:r}=this.ctx;if(this.shadow){const{color:a,blurRadius:u,offsetX:g,offsetY:S}=this.shadow,w=new T.ZP.CanvasKit.Paint;w.setColor(a.skColor),w.setMaskFilter(T.ZP.CanvasKit.MaskFilter.MakeBlur(T.ZP.CanvasKit.BlurStyle.Normal,u/2,!0)),r.drawRect(this.frame.offset(g,S).toSk(),w)}this.backgroundColor&&r.drawRect(this.frame.toSk(),(0,T.pK)(this.backgroundColor))}renderChildren(){if(!this.children.length)return;const{skCanvas:r}=this.ctx;r.translate(this.frame.x,this.frame.y),this.children.forEach(a=>a.visible&&a.render())}containsPoint(r){return this.frame.containsPoint(r)}}const kn=!1,Qt=3,sn=3;let He;function ur(){return He||(He=new T.ZP.CanvasKit.Paint,He.setColor(T.ZP.CanvasKit.Color(169,169,169)),He.setStyle(T.ZP.CanvasKit.PaintStyle.Stroke),He.setStrokeWidth(1),He)}class Gr extends Er{constructor(r){super();this.isTop=r,this._paraStyle=new T.ZP.CanvasKit.ParagraphStyle({textStyle:{color:T.ZP.CanvasKit.BLACK,fontFamilies:T.FZ,fontSize:10}}),this.backgroundColor=T.ZP.CanvasKit.WHITE}parentToLocal(r){return r}createPara(r){const a=T.ZP.CanvasKit.ParagraphBuilder.Make(this._paraStyle,this.ctx.fontMgr);a.addText(r);const u=a.build();return u.layout(1e8),a.delete(),u}get bgPaint(){return this._bgPaint||(this._bgPaint=new T.ZP.CanvasKit.Paint,this._bgPaint.setColor(T.ZP.CanvasKit.WHITE)),this._bgPaint}get linePaint(){return ur()}containsPoint(){return!1}renderSelf(){if(kn)return;const r=this.ctx.pageView;if(!r)return;const a=r.model.axisOffset,u=r.zoomState,{width:g,height:S}=this.ctx.frame,{skCanvas:w}=this.ctx;w.save(),w.translate(this.frame.x,this.frame.y),this.isTop?(w.drawLine(0,Ft,g,Ft,this.linePaint),this.drawGroovesTop(u,a)):(w.drawLine(Ft,0,Ft,S,this.linePaint),this.drawGroovesLeft(u,a)),w.restore()}drawGroovesTop(r,a){const{skCanvas:u}=this.ctx,g=this.frame.width,S=r.scale,w=r.position.x+a.x*S-Ft,R=Yr(S),D=R*S,H=-(w/S),Q=(g-w)/S;function et(W){return W*S+w}const ut=Math.floor(H/R)*R;for(let W=ut;W<Q;W+=R){const ht=et(W);u.drawLine(ht,0,ht,Ft,this.linePaint);const ct=this.createPara(W+"");u.drawParagraph(ct,ht+Qt,sn),ct.delete();const Mt=D/10;for(let Tt=1;Tt<10;Tt++){const ie=ht+Tt*Mt;u.drawLine(ie,Ft-8,ie,Ft,this.linePaint)}}}drawGroovesLeft(r,a){const{skCanvas:u}=this.ctx,g=this.frame.height,S=r.scale,w=r.position.y+a.y*S-Ft,R=Yr(S),D=R*S,H=-(w/S),Q=(g-w)/S;function et(W){return W*S+w}const ut=Math.floor(H/R)*R;for(let W=ut;W<Q;W+=R){const ht=et(W);u.drawLine(0,ht,Ft,ht,this.linePaint);const ct=this.createPara(W+"");u.save(),u.translate(sn,ht-Qt),u.rotate(-90,0,0),u.drawParagraph(ct,0,0),ct.delete(),u.restore();const Mt=D/10;for(let Tt=1;Tt<10;Tt++){const ie=ht+Tt*Mt;u.drawLine(Ft-8,ie,Ft,ie,this.linePaint)}}}}Gr.RulerThickness=Ft;function Yr(m){let r=100;return m<=.25&&(r=Math.floor(100/m/10)*10),m<=.5&&m>.25&&(r=200),m>1&&m<=2&&(r=50),m>2&&m<=4&&(r=20),m>4&&(r=10),r}class Nr extends Er{constructor(){super(new J.U(0,0,Ft,Ft));this.backgroundColor=T.ZP.CanvasKit.WHITE}renderSelf(){const r=ur(),{skCanvas:a}=this.ctx;a.drawLine(0,Ft,Ft,Ft,r),a.drawLine(Ft,0,Ft,Ft,r)}}let Xr,ne;T.IF.then(()=>{const m=T.ZP.CanvasKit.Color(21,129,205,1);Xr=(0,T.yu)(2,m),ne=(0,T.yu)(2,m);const r=T.ZP.CanvasKit.PathEffect.MakeDash([5,5]);ne.setPathEffect(r)});class zr extends Er{constructor(r,a=!1){super();this.layerView=r,this.isHover=a,this.clip=!1}renderSelf(){const r=this.layerView.frame.onlySize.applyMatrix(this.layerView.transform.worldTransform),{skCanvas:a}=this.ctx;a.drawRect(r.toSk(),this.isHover?ne:Xr)}}let pe,mn,fr;const qe=12;T.IF.then(()=>{const m=new T.ZP.CanvasKit.Paint;m.setColor(T.ZP.CanvasKit.Color(0,0,0,.3)),m.setMaskFilter(T.ZP.CanvasKit.MaskFilter.MakeBlur(T.ZP.CanvasKit.BlurStyle.Normal,2,!0)),pe=m;const r=a=>new T.ZP.CanvasKit.ParagraphStyle({ellipsis:"...",maxLines:1,textStyle:{color:a,fontFamilies:T.FZ,fontSize:qe}});mn=r(T.ZP.CanvasKit.parseColorString("#929292")),fr=r(T.ZP.CanvasKit.parseColorString("#C960E7"))});class En extends Er{constructor(r){super();this.artBoardView=r,this.clip=!1}renderSelf(){const r=this.artBoardView.frame.onlySize.applyMatrix(this.artBoardView.transform.worldTransform);if(!this.ctx.pageFrame.intersect(r))return;const{skCanvas:a}=this.ctx,u=r.toSk();a.save(),a.clipRect(u,T.ZP.CanvasKit.ClipOp.Difference,!0),a.drawRect(u,pe),a.restore();const g=this.artBoardView.model.name;if(g&&r.width>qe*1.5){const S=T.ZP.CanvasKit.ParagraphBuilder.Make(this.artBoardView.isSymbolMaster?fr:mn,this.ctx.fontMgr);S.addText(g);const w=S.build();w.layout(r.width);const R=w.getHeight();a.drawParagraph(w,r.x,r.y-R-2),w.delete(),S.delete()}}}class Rn extends gt{constructor(){super();this.artBoardOverlays=[],this.frame=new J.U,this.children=[],this.topRuler=this.addChild(new Gr(!0)),this.leftRuler=this.addChild(new Gr(!1)),this.corner=this.addChild(new Nr),this.initBinding()}initBinding(){const r=this.ctx.pageState;r.selectionChange.subscribe(()=>{this.selectionView=r.selectedLayerView?this.addChild(new zr(r.selectedLayerView)):void 0}),r.hoverChange.subscribe(()=>{this.hoverOverlay=r.hoverLayerView?this.addChild(new zr(r.hoverLayerView,!0)):void 0})}addChild(r){return r.parent=this,r}findView(){}layout(){this.frame=this.ctx.frame.clone();const r=this.frame.width-Ft,a=this.frame.height-Ft;this.leftRuler.frame=new J.U(0,Ft,Ft,a),this.topRuler.frame=new J.U(Ft,0,r,Ft)}addArtBoardOverlay(r){this.artBoardOverlays.push(new En(r))}resetPage(){this.artBoardOverlays.length=0}containsPoint(){return!0}parentToLocal(r){return r}render(){this.renderChildren()}renderChildren(){var r,a;const{skCanvas:u,pageFrame:g}=this.ctx;u.save(),[this.topRuler,this.leftRuler,this.corner].forEach(S=>S.render()),u.clipRect(g.toSk(),T.ZP.CanvasKit.ClipOp.Intersect,!0),this.artBoardOverlays.forEach(S=>S.render()),(r=this.hoverOverlay)==null||r.render(),(a=this.selectionView)==null||a.render()}renderSelf(){this.ctx.skCanvas.drawRect(this.frame.inflate(-100).toSk(),(0,T.yu)(2,T.ZP.CanvasKit.RED))}}B().log=console.log;var Xt=tt(2262),vn=tt(6252);const Rr=class{constructor(){this.bindings=[],this.modelRef=(0,Xt.XI)(),this.viewRef=(0,Xt.XI)(),this.selectedPageIndex=(0,Xt.iH)(-1),this.filename="",this.pagesRef=(0,Xt.Fl)(()=>{const m=this.modelRef.value;return(m==null?void 0:m.pages.map(r=>r.name))||[]}),this.outlineChangeEvent=(0,Xt.iH)(0),this.outlineListRef=(0,Xt.Fl)(()=>{if(this.outlineChangeEvent.value<0)return[];const m=this.modelRef.value,r=m==null?void 0:m.pages[this.selectedPageIndex.value];return r?r.getLayerList():[]}),this.selectedLayerIdRef=(0,Xt.iH)(""),this.hoveredLayerIdRef=(0,Xt.iH)(""),this.pageScale$=Bn(this.viewRef).pipe((0,vr.w)(m=>m?m.services.viewport.viewportScale:(0,Oe.of)(1))),this.selectPage=m=>{var r;m!==this.selectedPageIndex.value&&(this.selectedPageIndex.value=m,(r=this.view)==null||r.renderPage(m))},this.selectLayer=m=>{var r;(r=this.view)==null||r.selectLayer(m)},this.focusLayer=m=>{var r,a;const u=(r=this.view)==null?void 0:r.getViewByModelId(m.objectId);u&&((a=this.view)==null||a.services.viewport.moveIntoView(u))},this.unselectLayer=()=>{var m;(m=this.view)==null||m.selectLayer(void 0)},this.onToggleOutlineGroup=m=>{m.isOutlineExpanded=!m.isOutlineExpanded,this.outlineChangeEvent.value++},this.onToggleLayerVisible=m=>{m.isVisible=!m.isVisible,this.outlineChangeEvent.value++},this.onToggleLayerLock=m=>{m.isLocked=!m.isLocked,this.outlineChangeEvent.value++},this.onPointerEnterLayer=m=>{var r;(r=this.view)==null||r.hoverLayer(m)},this.onPointerLeaveLayer=()=>{var m;(m=this.view)==null||m.hoverLayer(void 0)}}get pages(){return this.pagesRef.value}get model(){return this.modelRef.value}get view(){return this.viewRef.value}get selectedPageModel(){var m;return(m=this.model)==null?void 0:m.pages[this.selectedPageIndex.value]}get selectedLayerView(){var m;return(m=this.view)==null?void 0:m.getViewByModelId(this.selectedLayerIdRef.value)}get selectedLayerModel(){var m;return(m=this.selectedLayerView)==null?void 0:m.model}get currentPageView(){var m;return(m=this.view)==null?void 0:m.pageView}reset(){this.selectedPageIndex.value=-1}async openSketchArrayBuffer(m,r,a){var u;let g;try{g=await vt().loadAsync(r)}catch(R){throw alert(`Sorry!
This is not a zip file. It may be created by an old version sketch app.`),R}await T.IF;const S=new V.Fe;if(await S.readZipFile(g),!S.isSupportedVersion){alert(`Sorry!
This file version is too old, it is created by ${S.appInfo}.
This application cant handle it right now.`);return}(u=this.viewRef.value)==null||u.dispose(),this.reset();const w=await ke.create(S,a);this.viewRef.value=w,this.modelRef.value=S,this.filename=m,this.initBinding(w)}initBinding(m){this.bindings.forEach(r=>r.unsubscribe()),this.bindings.length=0,this.bindings.push(m.pageState.selectionChange.subscribe(()=>{var r,a;this.selectedLayerIdRef.value=((r=m.pageState.selectedLayerView)==null?void 0:r.model.objectId)??"",this.selectedLayerModel&&((a=this.selectedPageModel)==null||a.expandLayers(this.selectedLayerModel),this.outlineChangeEvent.value++)}),m.pageState.hoverChange.subscribe(()=>{var r;this.hoveredLayerIdRef.value=((r=m.pageState.hoverLayerView)==null?void 0:r.model.objectId)??""}))}getPathIcon(m){var r;const a=m.objectId,u=(r=this.view)==null?void 0:r.getViewByModelId(a);if(u instanceof oe&&u.path)return u.svgBuildInfo}usePageScale(){return wn(this.pageScale$)}get editorTitle(){var m;return this.view?`${this.filename} / ${((m=this.selectedPageModel)==null?void 0:m.name)||"No Page Name"}`:""}};let dr=Rr;dr.shared=new Rr;function wn(m){const r=(0,Xt.iH)(),a=m.subscribe(u=>{r.value=u});return(0,vn.Ah)(()=>{a.unsubscribe()}),r}function Bn(m){const r=new Nt.X(m.value);return(0,vn.m0)(()=>{r.next(m.value)}),r}function In(){return dr.shared}},8080:(Ge,te,tt)=>{"use strict";tt.d(te,{E:()=>V});var at=tt(2283),vt=tt(6126);class V{constructor(B=0,y=0){this.x=B,this.y=y}static clientPointFromMouseEvent(B,y){return y!==void 0?(y.x=B.clientX,y.y=B.clientY,y):new V(B.clientY,B.clientY)}static fromPointString(B){const y=/{(.*), (.*)}/.exec(B);if(!y)throw Error("Bad point: "+B);return new V(parseFloat(y[1]),parseFloat(y[2]))}static calcAngleABC(B,y,J){const dt=B.distanceTo(y),Pt=y.distanceTo(J),Ct=J.distanceTo(B);return Math.acos((Pt*Pt+dt*dt-Ct*Ct)/(2*Pt*dt))}applyFrame(B){return this.x=this.x*B.width+B.x,this.y=this.y*B.height+B.y,this}translate(B){return this.x+=B.x,this.y+=B.y,this}move(B,y){return this.x+=B,this.y+=y,this}scale(B,y){return this.x*=B,this.y*=y,this}scaleNew(B,y){return this.clone().scale(B,y)}clone(){return new V(this.x,this.y)}toString(){return`(${this.x|0}, ${this.y|0})`}toAttrString(){return`translate(${this.x} ${this.y})`}toArray(){return[this.x,this.y]}distanceTo(B){return Math.hypot(this.x-B.x,this.y-B.y)}length(){return Math.hypot(this.x,this.y)}inflateRect(B){return new vt.U(this.x-B,this.y-B,B*2,B*2)}add(B){return new V(this.x+B.x,this.y+B.y)}minus(B){return new V(this.x-B.x,this.y-B.y)}multiply(B){return new V(this.x*B,this.y*B)}norm(){const B=Math.hypot(this.x,this.y);return(0,at.ZP)(B!==0,"cant norm a vector whos len is zero"),new V(this.x/B,this.y/B)}rotate(B){const y=Math.cos(B)*this.x-Math.sin(B)*this.y,J=Math.sin(B)*this.x+Math.cos(B)*this.y;return new V(y,J)}static diff(B,y,J){const dt=y.x-B.x,Pt=y.y-B.y;return J!==void 0?(J.x=dt,J.y=Pt,J):new V(dt,Pt)}}},6126:(Ge,te,tt)=>{"use strict";tt.d(te,{U:()=>At});var at=tt(8080),vt=tt(9093);const V=class{constructor(B=0,y=0,J=0,dt=0){this.x=B,this.y=y,this.width=J,this.height=dt}static fromSketchRect(B){return new V(B.x,B.y,B.width,B.height)}static mergeRects(B){let y=Number.MAX_SAFE_INTEGER,J=Number.MIN_SAFE_INTEGER,dt=Number.MAX_SAFE_INTEGER,Pt=Number.MIN_SAFE_INTEGER;if(B.length===0)throw new Error("Bad param");return B.forEach(Zt=>{const{x:_t,y:Dt,width:It,height:T}=Zt;y=Math.min(y,_t),J=Math.max(J,_t+It),dt=Math.min(dt,Dt),Pt=Math.max(Pt,Dt+T)}),new V(y,dt,J-y,Pt-dt)}static fromDomRect(B){return new V(B.left,B.top,B.width,B.height)}size(B,y){this.width=B,this.height=y}equals(B){return this.x===B.x&&this.y===B.y&&this.width===B.width&&this.height===B.height}clone(){return new V(this.x,this.y,this.width,this.height)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}get center(){return new at.E(this.x+this.width/2,this.y+this.height/2)}get leftTop(){return new at.E(this.x,this.y)}applyFill(B){B.fillRect(this.x,this.y,this.width,this.height)}containsPoint(B){return this.x<=B.x&&B.x<this.right&&this.y<=B.y&&B.y<this.bottom}inflate(B){return new V(this.x-B,this.y-B,this.width+B*2,this.height+B*2)}get onlySize(){return new V(0,0,this.width,this.height)}offset(B,y){return new V(this.x+B,this.y+y,this.width,this.height)}toSk(){return vt.ZP.CanvasKit.XYWHRect(this.x,this.y,this.width,this.height)}scale(B){return new V(this.x*B,this.y*B,this.width*B,this.height*B)}roundPixel(){const B=Math.floor(this.x),y=Math.floor(this.y),J=Math.ceil(this.x+this.width),dt=Math.ceil(this.y+this.height);return new V(B,y,J-B,dt-y)}intersect(B){const y=this.x<B.x?B.x:this.x;if((this.right>B.right?B.right:this.right)<=y)return!1;const dt=this.y<B.y?B.y:this.y;return(this.bottom>B.bottom?B.bottom:this.bottom)>dt}static fromSk(B){return new V(B[0],B[1],B[2]-B[0],B[3]-B[1])}static fromPoints(B){if(B.length<2)throw new Error("require at least two points");let y=Number.MAX_SAFE_INTEGER,J=Number.MIN_SAFE_INTEGER,dt=Number.MAX_SAFE_INTEGER,Pt=Number.MIN_SAFE_INTEGER;return B.forEach(Ct=>{y=Math.min(y,Ct.x),J=Math.max(J,Ct.x),dt=Math.min(dt,Ct.y),Pt=Math.max(Pt,Ct.y)}),new V(y,dt,J-y,Pt-dt)}layoutRectInCenter(B,y=0){const J=y?this.inflate(-y):this,dt=J.width/B.width,Pt=J.height/B.height,Ct=Math.min(Pt,dt);return{translate:this.center.minus(B.scale(Ct).center),scale:Ct}}toPoints(){return[this.leftTop,new at.E(this.x+this.width,this.y),new at.E(this.x+this.width,this.height+this.y),new at.E(this.x,this.y+this.height)]}applyMatrix(B){return V.fromPoints(this.toPoints().map(y=>B.apply(y,y)))}};let At=V;At.Empty=new V(0,0,0,0)},2797:(Ge,te,tt)=>{"use strict";tt.d(te,{Rs:()=>Kt,os:()=>at.Z,W4:()=>_e,cB:()=>me,Og:()=>sr,rI:()=>Ye,wH:()=>gt,XP:()=>Cr,R5:()=>Le,lk:()=>Z,Fe:()=>B,yt:()=>_r,eq:()=>br,e6:()=>$t,x9:()=>Je,gx:()=>or});var at=tt(7733),vt=tt(2283),V=tt(5244),At=tt(9093);class B{constructor(){this.userData={},this.pages=[],this.symbolRegistry=new Map,this.styleRegistry=new Map,this.foreignSymbols=[],this.changed$=new V.xQ,this.imageCache={},this.registerSharedStyle=p=>{const E=new $t().fromJson(p.value);this.registerStyle(p.do_objectID,E)},B.currentContext=this}async readZipFile(p){this.zipFile=p;const E=await this.readJsonFile(p,"document.json");this.data=E;try{this.metaData=await this.readJsonFile(p,"meta.json"),this.userData=await this.readJsonFile(p,"user.json")}catch(z){console.error("Bad file structure",z)}!this.isSupportedVersion||(this.collectSymbols(),this.collectStyles(),await this.initPages())}get isSupportedVersion(){return this.metaData&&this.metaData.compatibilityVersion>=99}get appInfo(){var p,E;return`${(p=this.metaData)==null?void 0:p.app}@${(E=this.metaData)==null?void 0:E.appVersion}`}collectSymbols(){this.data.foreignSymbols.forEach(p=>{this.foreignSymbols.push(new or().fromJson(p.symbolMaster))})}collectStyles(){var p,E,z,rt,st,pt;(p=this.data.foreignTextStyles)==null||p.map(mt=>mt.localSharedStyle).forEach(this.registerSharedStyle),(E=this.data.foreignLayerStyles)==null||E.map(mt=>mt.localSharedStyle).forEach(this.registerSharedStyle),(rt=(z=this.data.layerTextStyles)==null?void 0:z.objects)==null||rt.forEach(this.registerSharedStyle),(pt=(st=this.data.layerStyles)==null?void 0:st.objects)==null||pt.forEach(this.registerSharedStyle)}async initPages(){for(const p of this.data.pages){const E=await this.readPageFileRefJson(p);this.pages.push(new _r().fromJson(E))}}registerSymbol(p,E){this.symbolRegistry.set(p,E)}getSymbol(p){return this.symbolRegistry.get(p)}registerStyle(p,E){this.styleRegistry.set(p,E)}getStyle(p){return this.styleRegistry.get(p)}async readJsonFile(p,E){var z;const rt=await((z=p.file(E))==null?void 0:z.async("string"));return(0,vt.ZP)(typeof rt=="string",`${E} not exist!`),JSON.parse(rt)}async readImgFile(p){if(/\.\w+$/.test(p)||(p=`${p}.png`),this.imageCache[p])return this.imageCache[p];const E=this.zipFile.file(p);if(!E){console.error(`image not exist: >>>${p}<<<`);return}const rt=await(await E.async("blob")).arrayBuffer(),st=At.ZP.CanvasKit.MakeImageFromEncoded(rt);return st?this.imageCache[p]=st:console.error("Make image failed: ",p),this.imageCache[p]}async readPageFileRefJson(p){return await this.readJsonFile(this.zipFile,p._ref+".json")}}var y=tt(6126),J=tt(8080),dt=tt(436),Pt=Object.defineProperty,Ct=Object.defineProperties,Zt=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,T=(X,p,E)=>p in X?Pt(X,p,{enumerable:!0,configurable:!0,writable:!0,value:E}):X[p]=E,Jt=(X,p)=>{for(var E in p||(p={}))Dt.call(p,E)&&T(X,E,p[E]);if(_t)for(var E of _t(p))It.call(p,E)&&T(X,E,p[E]);return X},Vt=(X,p)=>Ct(X,Zt(p)),Kt;(function(X){X.SymbolMaster="SymbolMaster",X.SymbolInstance="SymbolInstance",X.ShapeGroup="ShapeGroup",X.ShapeLike="ShapeLike",X.ShapePath="ShapePath",X.Rectangle="Rectangle",X.Triangle="Triangle",X.Star="Star",X.Group="Group",X.Artboard="Artboard",X.Page="Page",X.Oval="Oval",X.Bitmap="Bitmap",X.Text="Text",X.CurvePoint="CurvePoint",X.Style="Style",X.BaseObject="BaseObject",X.BaseLayer="BaseLayer",X.BaseGroup="BaseGroup"})(Kt||(Kt={}));const Se={Unset:63,Right:1,Width:2,Left:4,Bottom:8,Height:16,Top:32};let Ie=1e3;class Nt{constructor(){this.objectId=""+Ie++,this.ctx=B.currentContext}}class me extends Nt{constructor(){super();this.frame=new y.U,this.isFlippedHorizontal=!1,this.isFlippedVertical=!1,this.rotation=0,this.hasClippingMask=!1,this.shouldBreakMaskChain=!1,this.isVisible=!0,this.resizingConstraint=Se.Unset,this.booleanOperation=At.ZP.CanvasKit.PathOp.XOR,this.isLocked=!1,this.isSelected=!1,this.isOutlineExpanded=!1,this.subSelected=!1,this.subInVisible=!1,this.depth=0,this._name=""}fromJson(p){const{frame:E,isFlippedHorizontal:z,isFlippedVertical:rt,rotation:st,sharedStyleID:pt}=p;return this.booleanOperation=vr(p.booleanOperation),this.frame=new y.U(E.x,E.y,E.width,E.height),this.isFlippedHorizontal=z,this.isFlippedVertical=rt,this.rotation=st,this._sharedStyleID=pt,this.objectId=p.do_objectID,p.style&&(this.style=new $t().fromJson(p.style)),this.isVisible=p.isVisible,this.hasClippingMask=p.hasClippingMask??this.hasClippingMask,this.shouldBreakMaskChain=p.shouldBreakMaskChain??this.shouldBreakMaskChain,this.resizingConstraint=p.resizingConstraint??this.resizingConstraint,this.isLocked=p.isLocked??this.isLocked,this._name=p.name,this._fromJson(p),this}get sharedStyle(){if(this._sharedStyleID)return this.ctx.getStyle(this._sharedStyleID)}get snapLeft(){return~this.resizingConstraint&Se.Left}get snapRight(){return~this.resizingConstraint&Se.Right}get snapBottom(){return~this.resizingConstraint&Se.Bottom}get snapTop(){return~this.resizingConstraint&Se.Top}get fixedWidth(){return~this.resizingConstraint&Se.Width}get fixedHeight(){return~this.resizingConstraint&Se.Height}get name(){return this._name}recUp(p){this.parent&&(p(this.parent),this.parent.recUp(p))}inflateFrame(p){const E=this.style;if(!E)return p;let z=0;const rt=[];if(E.borders.forEach(st=>{const{isEnabled:pt,thickness:mt,position:Gt}=st;if(pt){const Ee=Gt===Ye.Outside?mt:Gt===Ye.Center?mt/2:0;z=Ee>z?Ee:z}}),E.blur){const{isEnabled:st,type:pt,radius:mt}=E.blur;st&&pt===sr.Gaussian&&mt>z&&(z=mt)}return rt.push(z?p.inflate(z):p),E.shadows.forEach(st=>{const{offsetX:pt,offsetY:mt,spread:Gt,blurRadius:Ee,isEnabled:ar}=st;ar&&rt.push(p.offset(pt,mt).inflate(Gt+Ee))}),rt.length===1?rt[0]:y.U.mergeRects(rt)}}class _e extends me{constructor(){super();this.layers=[]}_fromJson(p){this.buildLayers(p.layers),this.isOutlineExpanded=p.layerListExpandedType===at.Z.LayerListExpanded.Expanded}buildLayers(p){p.forEach(E=>{switch(E._class){case at.Z.ClassValue.Group:return this.layers.push(new xe().fromJson(E));case at.Z.ClassValue.ShapeGroup:return this.layers.push(new Oe().fromJson(E));case at.Z.ClassValue.ShapePath:case at.Z.ClassValue.Rectangle:case at.Z.ClassValue.Oval:case at.Z.ClassValue.Star:case at.Z.ClassValue.Triangle:case at.Z.ClassValue.Polygon:return this.layers.push(new wr().fromJson(E));case at.Z.ClassValue.Bitmap:return this.layers.push(new Sr().fromJson(E));case at.Z.ClassValue.Text:return this.layers.push(new Lr().fromJson(E));case at.Z.ClassValue.SymbolMaster:return this.layers.push(new or().fromJson(E));case at.Z.ClassValue.SymbolInstance:return this.layers.push(new Je().fromJson(E));case at.Z.ClassValue.Artboard:return this.layers.push(new Ft().fromJson(E));case"shapePath":case"polygon":case"oval":case"star":case"triangle":case"slice":case"MSImmutableHotspotLayer":return;default:return}}),this.layers.forEach(E=>E.parent=this)}getOutlineList(p,E=0,z=!1,rt=!1){const st=z||!this.isVisible,pt=rt||this.isSelected;for(let mt=this.layers.length-1;mt>=0;mt--){const Gt=this.layers[mt];Gt.depth=E,Gt.subInVisible=st,Gt.subSelected=pt,p.push(Gt),Gt instanceof _e&&Gt.isOutlineExpanded&&Gt.getOutlineList(p,E+1,st,pt)}}}class xe extends _e{constructor(){super(...arguments);this._class=Kt.Group}}class Ft extends _e{constructor(){super(...arguments);this._class=Kt.Artboard,this.backgroundColor=new gt,this.hasBackgroundColor=!1}_fromJson(p){super._fromJson(p),this.backgroundColor.fromJson(p.backgroundColor),this.hasBackgroundColor=p.hasBackgroundColor}}class Oe extends _e{constructor(){super(...arguments);this._class=Kt.ShapeGroup,this.booleanOperation=At.ZP.CanvasKit.PathOp.XOR}_fromJson(p){super._fromJson(p),this.booleanOperation=vr(p.booleanOperation)}}function vr(X){const p=At.ZP.CanvasKit.PathOp;return{[at.Z.BooleanOperation.Union]:p.Union,[at.Z.BooleanOperation.Intersection]:p.Intersect,[at.Z.BooleanOperation.Difference]:p.XOR,[at.Z.BooleanOperation.Subtract]:p.Difference,[at.Z.BooleanOperation.None]:p.XOR}[X]??p.XOR}class wr extends me{constructor(){super(...arguments);this._class=Kt.ShapeLike,this.isClosed=!1,this.points=[]}_fromJson(p){var E;this.isClosed=p.isClosed??this.isClosed,this.points=((E=p.points)==null?void 0:E.map(z=>new Dr(this.frame).fromJson(z)))||[]}}class Sr extends me{constructor(){super(...arguments);this._class=Kt.Bitmap}async _fromJson(p){p.image&&(this.file=new ir().fromJson(p.image))}}class ir extends Nt{constructor(){super(...arguments);this._class="file"}fromJson(p){return p._class===at.Z.ClassValue.MSJSONFileReference?this.ctx.readImgFile(p._ref).then(E=>{this.skImage!==E&&(this.skImage=E,this.ctx.changed$.next())}):p._class===at.Z.ClassValue.MSJSONOriginalDataReference?console.log("!!!!!! Todo"):(0,vt.ZP)(!1,"never"),this}}class Lr extends me{constructor(){super(...arguments);this._class=Kt.Text}_fromJson(p){var E;this._attributedString={string:p.attributedString.string||"",attributes:((E=p.attributedString.attributes)==null?void 0:E.map(z=>{const rt=new gt;return z.attributes.MSAttributedStringColorAttribute&&rt.fromJson(z.attributes.MSAttributedStringColorAttribute),Vt(Jt({},z),{attributes:Vt(Jt({},z.attributes),{MSAttributedStringColorAttribute:rt})})}))||[]}}get attributedString(){return this._attributedString.attributes.forEach(p=>{p.attributes.MSAttributedStringColorAttribute&&(p.attributes.MSAttributedStringColorAttribute.tintColor=this.tintColor)}),this._attributedString}get validBorderCount(){var p,E;return((E=(p=this.style)==null?void 0:p.borders)==null?void 0:E.reduce((z,rt)=>z+=rt.isEnabled?1:0,0))||0}get validFillCount(){var p,E;return((E=(p=this.style)==null?void 0:p.fills)==null?void 0:E.reduce((z,rt)=>z+=rt.isEnabled?1:0,0))||0}get hasComplicatedPaint(){var p,E,z,rt;return((E=(p=this.style)==null?void 0:p.fills)==null?void 0:E.some(st=>st.isEnabled&&st.fillType!==Le.Color))||((rt=(z=this.style)==null?void 0:z.borders)==null?void 0:rt.some(st=>st.isEnabled&&st.fillType!==Le.Color))}get hasInnerShadow(){var p;return(p=this.style)==null?void 0:p.innerShadows.some(E=>E.isEnabled)}}const Cr=at.Z.CurveMode,Fe=at.Z.MarkerType,qt=at.Z.WindingRule;class $t extends Nt{constructor(){super(...arguments);this._class=Kt.CurvePoint,this._borders=[],this.borderOptions=new Ht,this._fills=[],this.startMarkerType=Fe.OpenArrow,this.endMarkerType=Fe.OpenArrow,this.miterLimit=0,this.windingRule=qt.NonZero,this._shadows=[],this._innerShadows=[],this.colorControls=new qr}fromJson(p){var E,z,rt,st;return(E=p.borders)==null||E.map(pt=>{this._borders.push(new fe().fromJson(pt))}),p.borderOptions&&this.borderOptions.fromJson(p.borderOptions),(z=p.fills)==null||z.map(pt=>{this._fills.push(new ke().fromJson(pt))}),this.startMarkerType=p.startMarkerType,this.endMarkerType=p.endMarkerType,this.miterLimit=p.miterLimit,this.windingRule=p.windingRule,p.textStyle&&(this.textStyle=new Ce().fromJson(p.textStyle)),(rt=p.shadows)==null||rt.forEach(pt=>{this._shadows.push(new Ve().fromJson(pt))}),(st=p.innerShadows)==null||st.forEach(pt=>{this._innerShadows.push(new Ve().fromJson(pt))}),p.contextSettings&&(this.contextSettings=new Wt().fromJson(p.contextSettings)),p.blur&&(this.blur=new Qr().fromJson(p.blur)),this}overrideStyle(p,E){return new Proxy(this,{get(z,rt,st){return rt==="textStyle"?p:rt==="tintColor"?E:Reflect.get(z,rt,st)}})}get fills(){return this._fills.forEach(p=>{p.tintColor=this.tintColor}),this._fills}get borders(){return this._borders.forEach(p=>{p.tintColor=this.tintColor}),this._borders}get shadows(){return this._shadows.forEach(p=>{p.tintColor=this.tintColor}),this._shadows}get innerShadows(){return this._innerShadows.forEach(p=>{p.tintColor=this.tintColor}),this._innerShadows}}const Le=at.Z.FillType,Ye=at.Z.BorderPosition,br=at.Z.PatternFillType,sr=at.Z.BlurType;class Qr extends Nt{constructor(){super(...arguments);this._class="blur",this.isEnabled=!0,this.center=new J.E(.5,.5),this.motionAngle=0,this.radius=0,this.saturation=1,this.type=sr.Gaussian}fromJson(p){return this.isEnabled=p.isEnabled,this.center=J.E.fromPointString(p.center),this.motionAngle=p.motionAngle??this.motionAngle,this.radius=p.radius??this.radius,this.saturation=p.saturation,this.type=p.type,this}}class Pr extends Nt{constructor(){super(...arguments);this._color=new gt}get color(){return this._color.tintColor=this.tintColor,this._color}}class qr{}class ke extends Pr{constructor(){super(...arguments);this._class="fill",this.isEnabled=!0,this.fillType=Le.Color,this.noiseIndex=0,this.noiseIntensity=0,this.patternFillType=br.Fill,this.patternTileScale=0,this.contextSettings=new Wt}fromJson(p){return this.isEnabled=p.isEnabled,this._color.fromJson(p.color),this.fillType=p.fillType,this.noiseIndex=p.noiseIndex,this.noiseIntensity=p.noiseIntensity,this.patternFillType=p.patternFillType,this.patternTileScale=p.patternTileScale,p.contextSettings&&this.contextSettings.fromJson(p.contextSettings),p.gradient&&(this._gradient=new lt().fromJson(p.gradient)),p.image&&(this.image=new ir().fromJson(p.image)),this}get gradient(){return this._gradient&&(this._gradient.tintColor=this.tintColor),this._gradient}}class fe extends Pr{constructor(){super(...arguments);this._class="border",this.isEnabled=!0,this.fillType=Le.Color,this.position=Ye.Center,this.thickness=1}fromJson(p){return this.isEnabled=p.isEnabled,this._color=this.color.fromJson(p.color),this.fillType=p.fillType,this.position=p.position,this.thickness=p.thickness,p.gradient&&(this._gradient=new lt().fromJson(p.gradient)),this}get gradient(){return this._gradient&&(this._gradient.tintColor=this.tintColor),this._gradient}}class gt extends Nt{constructor(){super(...arguments);this._class="color",this._skColor=At.ZP.CanvasKit.TRANSPARENT}get isEmpty(){return this._skColor[3]===0}get skColor(){if(this.tintColor){const p=this.tintColor._skColor;if(p[3]===this._skColor[3])return p;{const E=p.slice();return E[3]=this._skColor[3],E}}else return this._skColor}fromJson(p){return this._skColor=At.ZP.CanvasKit.Color(p.red*256|0,p.green*256|0,p.blue*256|0,p.alpha),this}}class De{}class Wt extends Nt{constructor(){super(...arguments);this._class="graphicsContextSettings",this.blendMode=At.ZP.CanvasKit.BlendMode.Src,this.opacity=1}fromJson(p){return this.blendMode=(0,dt.kR)(p.blendMode),this.opacity=p.opacity,this}}const Z=at.Z.GradientType;class ee{constructor(p,E){this.color=p,this.position=E}}class lt extends Nt{constructor(){super(...arguments);this._class="gradient",this.gradientType=Z.Linear,this.elipseLength=100,this.from=new J.E,this.to=new J.E,this._stops=[]}fromJson(p){return this.gradientType=p.gradientType,this.elipseLength=p.elipseLength,this.from=J.E.fromPointString(p.from),this.to=J.E.fromPointString(p.to),this._stops=p.stops.map(E=>new ee(new gt().fromJson(E.color),E.position)),this}get stops(){return this._stops.forEach(p=>{p.color.tintColor=this.tintColor}),this._stops}}class Ve extends Pr{constructor(){super(...arguments);this._class="shadow",this.isInner=!1,this.isEnabled=!0,this.blurRadius=0,this.contextSettings=new Wt,this.offsetX=0,this.offsetY=0,this.spread=0}static create(p,E,z=0,rt=0,st=0){const pt=new Ve;return pt._color._skColor=p,pt.blurRadius=E,pt.offsetX=z,pt.offsetY=rt,pt.spread=st,pt}get isEmpty(){return this.blurRadius===0&&this.spread===0||this.color.isEmpty}fromJson(p){return this.isInner=p._class==="innerShadow",this.isEnabled=p.isEnabled,this.blurRadius=p.blurRadius,this._color.fromJson(p.color),this.contextSettings.fromJson(p.contextSettings),this.offsetX=p.offsetX,this.offsetY=p.offsetY,this.spread=p.spread,this}}class Ce extends Nt{constructor(){super(...arguments);this._class="textStyle",this.verticalAlignment=at.Z.TextVerticalAlignment.Top,this.encodedAttributes={},this.defaultFontAttribute={_class:at.Z.ClassValue.FontDescriptor,attributes:{name:"Roboto",size:12}}}fromJson(p){return this.verticalAlignment=p.verticalAlignment,Object.assign(this.encodedAttributes,p.encodedAttributes),this.encodedAttributes.MSAttributedStringFontAttribute||(this.encodedAttributes.MSAttributedStringFontAttribute=this.defaultFontAttribute),this}}class Ht extends Nt{constructor(){super(...arguments);this._class="borderOptions",this.isEnabled=!1,this.dashPattern=[],this.lineCapStyle=At.ZP.CanvasKit.StrokeCap.Butt,this.lineJoinStyle=At.ZP.CanvasKit.StrokeJoin.Round}fromJson(p){return this.isEnabled=p.isEnabled,this.dashPattern=p.dashPattern,this.lineCapStyle=(0,dt.iz)(p.lineCapStyle),this.lineJoinStyle=(0,dt.Rb)(p.lineJoinStyle),this}}class Dr extends Nt{constructor(p){super();this.frame=p,this._class=Kt.CurvePoint,this.curveFrom=new J.E,this.curveTo=new J.E,this.point=new J.E,this.curveMode=Cr.None,this.cornerRadius=0,this.hasCurveFrom=!1,this.hasCurveTo=!1}fromJson(p){const{width:E,height:z}=this.frame;return this.curveMode=p.curveMode,this.cornerRadius=p.cornerRadius,this.point=J.E.fromPointString(p.point).scale(E,z),this.curveFrom=J.E.fromPointString(p.curveFrom).scale(E,z),this.curveTo=J.E.fromPointString(p.curveTo).scale(E,z),this.hasCurveFrom=p.hasCurveFrom,this.hasCurveTo=p.hasCurveTo,this}}class _r extends _e{constructor(){super(...arguments);this._class=Kt.Page,this.axisOffset=new J.E}_fromJson(p){super._fromJson(p),this.axisOffset.x=p.horizontalRulerData.base,this.axisOffset.y=p.verticalRulerData.base,this.frame.x=0,this.frame.y=0,this.frame.width=0,this.frame.height=0}getLayerList(){const p=[];return this.getOutlineList(p),p}expandLayers(p){p.recUp(E=>{E.isOutlineExpanded=!0})}}var Vr=Object.defineProperty,xr=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,Xe=(X,p,E)=>p in X?Vr(X,p,{enumerable:!0,configurable:!0,writable:!0,value:E}):X[p]=E,ae=(X,p)=>{for(var E in p||(p={}))Ne.call(p,E)&&Xe(X,E,p[E]);if(je)for(var E of je(p))de.call(p,E)&&Xe(X,E,p[E]);return X},jr=(X,p)=>xr(X,oe(p));class or extends _e{constructor(){super(...arguments);this._class=Kt.SymbolMaster,this.backgroundColor=new gt,this.hasBackgroundColor=!1}_fromJson(p){super._fromJson(p),this.backgroundColor.fromJson(p.backgroundColor),this.hasBackgroundColor=p.hasBackgroundColor,this.ctx.registerSymbol(p.symbolID,this)}}const Zr=class{constructor(X){this.overrideValues=X,this.overrideLayerStyles=new Map,this.overrideTextStyles=new Map,this.overrideText=new Map,this.subOverrides=new Map,this.subTint=new Map,this.overrideSymbols=new Map,this.buildOverrides()}static getInstance(X){let p=this.refs.get(X);return p||(p=new Zr(X),this.refs.set(X,p)),p}buildOverrides(){this.overrideValues.forEach(p=>{const E=p.overrideName.indexOf("/");if(E!==-1){const st=p.overrideName.slice(0,E),pt=p.overrideName.slice(E+1),mt=this.subOverrides.get(st)||[];mt.push(jr(ae({},p),{overrideName:pt})),this.subOverrides.set(st,mt);return}const[z,rt]=p.overrideName.split("_");switch(rt){case"layerStyle":this.overrideLayerStyles.set(z,p.value);break;case"textStyle":this.overrideTextStyles.set(z,p.value);break;case"stringValue":this.overrideText.set(z,p.value);break;case"symbolID":this.overrideSymbols.set(z,p.value);break;case"fillColor":this.subTint.set(z,new gt().fromJson(p.value));break}})}};let ze=Zr;ze.refs=new WeakMap;class Je extends me{constructor(){super(...arguments);this._class=Kt.SymbolInstance,this._symbolID="",this.overrideValues=[],this.isProxy=!1}get refModel(){return this.ctx.getSymbol(this._symbolID)}get layers(){var p;return this.isProxy?((p=this.refModel)==null?void 0:p.layers)||[]:(this._layers===void 0&&(this._layers=this.wrapLayers()),this._layers)}get parentInstance(){let p=this.parent;for(;p&&!(p instanceof Je);)p=p.parent;return p}wrapLayers(){var p;const E=[];return(p=this.refModel)==null||p.layers.forEach(z=>{E.push(new Proxy(z,new Mr(z,this)))}),E}_fromJson(p){var E,z,rt;this._symbolID=p.symbolID;const st=(z=(E=this.refModel)==null?void 0:E.style)==null?void 0:z.fills[0],pt=(rt=this.style)==null?void 0:rt.fills[0];(st==null?void 0:st.isEnabled)?this.tintColor=st.color:(pt==null?void 0:pt.isEnabled)&&(this.tintColor=pt.color),this.overrideValues=p.overrideValues??this.overrideValues}get overrideValuesHelper(){return ze.getInstance(this.overrideValues)}getActualSymbol(p,E){return this.overrideValuesHelper.overrideSymbols.get(E)??p}getSubInstanceOverrides(p){return this.overrideValuesHelper.subOverrides.get(p)}getOverrideLayerTintColor(p){return this.tintColor||this.overrideValuesHelper.subTint.get(p)}getChildrenOverrideStyle(p,E){const z=this.overrideValuesHelper.overrideLayerStyles.get(E);let rt=p;z&&(rt=this.ctx.getStyle(z)||rt);const st=this.overrideValuesHelper.overrideTextStyles.get(E),pt=st?this.ctx.getStyle(st):void 0;return rt.overrideStyle(pt==null?void 0:pt.textStyle,this.tintColor)}getChildrenOverrideString(p,E){const z=this.overrideValuesHelper.overrideText.get(E),rt=this.overrideValuesHelper.overrideTextStyles.get(E);if(z===void 0&&rt===void 0)return p;const st=ae({},p);if(z!==void 0&&(st.string=z),rt!==void 0){const pt=this.ctx.getStyle(rt);if(pt){const mt=pt.textStyle,Gt=new gt;(mt==null?void 0:mt.encodedAttributes.MSAttributedStringColorAttribute)&&Gt.fromJson(mt.encodedAttributes.MSAttributedStringColorAttribute),st.attributes=[{location:0,length:st.string.length,attributes:{kerning:mt==null?void 0:mt.encodedAttributes.kerning,textStyleVerticalAlignmentKey:mt==null?void 0:mt.encodedAttributes.textStyleVerticalAlignmentKey,MSAttributedStringColorAttribute:Gt,MSAttributedStringFontAttribute:(mt==null?void 0:mt.encodedAttributes.MSAttributedStringFontAttribute)||st.attributes[0].attributes.MSAttributedStringFontAttribute,paragraphStyle:mt==null?void 0:mt.encodedAttributes.paragraphStyle}}]}}return st}}class Mr{constructor(p,E){this.target=p,this.instance=E,p.objectId==="1C639DD8-8465-4FDE-BCC2-E83D7D00DB1B"}get(p,E,z){if(E==="isProxy")return!0;if(E==="layers"){if(!this.layers){const rt=Reflect.get(p,E,z)||[];this.layers=rt.map(st=>new Proxy(st,new Mr(st,this.target instanceof Je?z:this.instance)))}return this.layers}if(E==="tintColor")return this.instance.getOverrideLayerTintColor(this.target.objectId)??this.target.tintColor;if(E==="style"){const rt=Reflect.get(p,E,z);return this.instance.getChildrenOverrideStyle(rt,this.target.objectId)}if(E==="attributedString"){const rt=Reflect.get(p,E,z);return this.instance.getChildrenOverrideString(rt,this.target.objectId)}if(E==="_symbolID"){const rt=Reflect.get(p,E,z);return this.instance.getActualSymbol(rt,this.target.objectId)}return E==="overrideValues"?this.instance.getSubInstanceOverrides(this.target.objectId)||[]:Reflect.get(p,E,z)}}},9093:(Ge,te,tt)=>{"use strict";tt.d(te,{IF:()=>B,FZ:()=>J,fp:()=>dt,pK:()=>Pt,yu:()=>Ct,ZP:()=>Zt});var at=tt(478),vt=tt.n(at);let V;V=tt(903),V=V.default||V;const At={},B=at({locateFile:V&&(()=>V)}).then(_t=>(At.CanvasKit=_t,window.CanvasKit=_t,At.CanvasKit));let y;const J=["Roboto","HarmonyOS Sans SC","Noto Color Emoji"];function dt(){return y?Promise.resolve(y):Promise.all(["/Roboto-Regular.ttf","/HarmonyOSSansSC-Regular.ttf","/colorfulemoji.woff2"].map(_t=>fetch(_t).then(Dt=>Dt.arrayBuffer()))).then(_t=>(_t.forEach(Dt=>{const It=new At.CanvasKit.Font(At.CanvasKit.FontMgr.RefDefault().MakeTypefaceFromData(Dt),72);console.log(">>> Font info:",It.getMetrics())}),y=At.CanvasKit.FontMgr.FromData(..._t),_t.forEach((Dt,It)=>{console.log(">>> Font name: ",y==null?void 0:y.getFamilyName(It))}),y))}function Pt(_t){const Dt=new At.CanvasKit.Paint;return Dt.setColor(_t),Dt}function Ct(_t,Dt){const It=new At.CanvasKit.Paint;return It.setStyle(At.CanvasKit.PaintStyle.Stroke),_t!==void 0&&It.setStrokeWidth(_t),Dt!==void 0&&It.setColor(Dt),It}const Zt=At},5131:(Ge,te,tt)=>{"use strict";tt.d(te,{v:()=>B});var at=tt(4203),vt=tt(7027),V=tt(1558),At=tt(4217);function B(J,dt){return new at.y(Pt=>{const Ct=(0,vt.R)(J,"mousedown").subscribe(Zt=>{y(Zt,Pt,dt)});return()=>{Ct.unsubscribe()}})}function y(J,dt,Pt){J.preventDefault();const Ct={x:J.clientX,y:J.clientY};let Zt=!1,_t;(0,vt.R)(document,"mousemove").pipe((0,V.R)((0,vt.R)(document,"mouseup").pipe((0,At.q)(1)))).subscribe({next(T){Dt(T)},complete(){It()}});function Dt(T){const Jt=T.clientX-Ct.x,Vt=T.clientY-Ct.y;if(!Zt)if(Math.hypot(Jt,Vt)>3)Zt=!0,_t=document.createElement("div"),_t.className="global-drag-mask",Pt&&(_t.style.cursor=Pt),document.body.appendChild(_t),dt.next({type:"dragStart"});else return;T.stopPropagation(),dt.next({type:"dragging",dx:Jt,dy:Vt})}function It(){!Zt||(Zt=!1,J.stopPropagation(),J.preventDefault(),_t&&_t.parentNode&&_t.parentNode.removeChild(_t),dt.next({type:"dragEnd"}))}}},436:(Ge,te,tt)=>{"use strict";tt.d(te,{kR:()=>At,iz:()=>B,Rb:()=>y,pR:()=>J});var at=tt(9093),vt=tt(7733);let V;at.IF.then(()=>{V=at.ZP.CanvasKit});function At(dt){return{[vt.Z.BlendMode.Normal]:V.BlendMode.Src,[vt.Z.BlendMode.Darken]:V.BlendMode.Darken,[vt.Z.BlendMode.Multiply]:V.BlendMode.Multiply,[vt.Z.BlendMode.ColorBurn]:V.BlendMode.ColorBurn,[vt.Z.BlendMode.Lighten]:V.BlendMode.Lighten,[vt.Z.BlendMode.Screen]:V.BlendMode.Screen,[vt.Z.BlendMode.ColorDodge]:V.BlendMode.ColorDodge,[vt.Z.BlendMode.Overlay]:V.BlendMode.Overlay,[vt.Z.BlendMode.SoftLight]:V.BlendMode.SoftLight,[vt.Z.BlendMode.HardLight]:V.BlendMode.HardLight,[vt.Z.BlendMode.Difference]:V.BlendMode.Difference,[vt.Z.BlendMode.Exclusion]:V.BlendMode.Exclusion,[vt.Z.BlendMode.Hue]:V.BlendMode.Hue,[vt.Z.BlendMode.Saturation]:V.BlendMode.Saturation,[vt.Z.BlendMode.Color]:V.BlendMode.Color,[vt.Z.BlendMode.Luminosity]:V.BlendMode.Luminosity,[vt.Z.BlendMode.PlusDarker]:V.BlendMode.Darken,[vt.Z.BlendMode.PlusLighter]:V.BlendMode.Lighten}[dt]}function B(dt){return{[vt.Z.LineCapStyle.Butt]:V.StrokeCap.Butt,[vt.Z.LineCapStyle.Projecting]:V.StrokeCap.Square,[vt.Z.LineCapStyle.Round]:V.StrokeCap.Round}[dt]}function y(dt){return{[vt.Z.LineJoinStyle.Bevel]:V.StrokeJoin.Bevel,[vt.Z.LineJoinStyle.Miter]:V.StrokeJoin.Miter,[vt.Z.LineJoinStyle.Round]:V.StrokeJoin.Round}[dt]}function J(dt){return dt/2}},3428:()=>{},391:()=>{}}]);
